(function(){"use strict";const T=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,B=globalThis,tt="10.2.0";function nt(){return Dn(B),B}function Dn(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||tt,t[tt]=t[tt]||{}}function Pn(e,t,n=B){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[tt]=r[tt]||{};return s[e]||(s[e]=t())}const Xs=["debug","info","warn","error","log","assert","trace"],Sp="Sentry Logger ",yr={};function mt(e){if(!("console"in B))return e();const t=B.console,n={},r=Object.keys(yr);r.forEach(s=>{const o=yr[s];n[s]=t[s],t[s]=o});try{return e()}finally{r.forEach(s=>{t[s]=n[s]})}}function bp(){Js().enabled=!0}function Ep(){Js().enabled=!1}function ba(){return Js().enabled}function vp(...e){Ks("log",...e)}function wp(...e){Ks("warn",...e)}function Tp(...e){Ks("error",...e)}function Ks(e,...t){T&&ba()&&mt(()=>{B.console[e](`${Sp}[${e}]:`,...t)})}function Js(){return T?Pn("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const g={enable:bp,disable:Ep,isEnabled:ba,log:vp,warn:wp,error:Tp},Ea=50,Xe="?",va=/\(error: (.*)\)/,wa=/captureMessage|captureException/;function Ta(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,s=0)=>{const o=[],i=n.split(`
`);for(let a=r;a<i.length;a++){let c=i[a];c.length>1024&&(c=c.slice(0,1024));const u=va.test(c)?c.replace(va,"$1"):c;if(!u.match(/\S*Error: /)){for(const d of t){const l=d(u);if(l){o.push(l);break}}if(o.length>=Ea+s)break}}return kp(o.slice(s))}}function Ip(e){return Array.isArray(e)?Ta(...e):e}function kp(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(Sr(t).function||"")&&t.pop(),t.reverse(),wa.test(Sr(t).function||"")&&(t.pop(),wa.test(Sr(t).function||"")&&t.pop()),t.slice(0,Ea).map(n=>({...n,filename:n.filename||Sr(t).filename,function:n.function||Xe}))}function Sr(e){return e[e.length-1]||{}}const Zs="<anonymous>";function rt(e){try{return!e||typeof e!="function"?Zs:e.name||Zs}catch{return Zs}}function Qs(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}const br={},Ia={};function gt(e,t){br[e]=br[e]||[],br[e].push(t)}function _t(e,t){if(!Ia[e]){Ia[e]=!0;try{t()}catch(n){T&&g.error(`Error while instrumenting ${e}`,n)}}}function Fe(e,t){const n=e&&br[e];if(n)for(const r of n)try{r(t)}catch(s){T&&g.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${rt(r)}
Error:`,s)}}let eo=null;function ka(e){const t="error";gt(t,e),_t(t,Cp)}function Cp(){eo=B.onerror,B.onerror=function(e,t,n,r,s){return Fe("error",{column:r,error:s,line:n,msg:e,url:t}),eo?eo.apply(this,arguments):!1},B.onerror.__SENTRY_INSTRUMENTED__=!0}let to=null;function Ca(e){const t="unhandledrejection";gt(t,e),_t(t,Rp)}function Rp(){to=B.onunhandledrejection,B.onunhandledrejection=function(e){return Fe("unhandledrejection",e),to?to.apply(this,arguments):!0},B.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Ra=Object.prototype.toString;function yt(e){switch(Ra.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return ot(e,Error)}}function Zt(e,t){return Ra.call(e)===`[object ${t}]`}function xa(e){return Zt(e,"ErrorEvent")}function Ma(e){return Zt(e,"DOMError")}function xp(e){return Zt(e,"DOMException")}function He(e){return Zt(e,"String")}function Er(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Qt(e){return e===null||Er(e)||typeof e!="object"&&typeof e!="function"}function st(e){return Zt(e,"Object")}function vr(e){return typeof Event<"u"&&ot(e,Event)}function Mp(e){return typeof Element<"u"&&ot(e,Element)}function Ap(e){return Zt(e,"RegExp")}function Fn(e){return!!(e?.then&&typeof e.then=="function")}function Op(e){return st(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function ot(e,t){try{return e instanceof t}catch{return!1}}function Aa(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function Oa(e){return typeof Request<"u"&&ot(e,Request)}const no=B,Np=80;function $e(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let o=0,i=0;const a=" > ",c=a.length;let u;const d=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||Np;for(;n&&o++<r&&(u=Lp(n,d),!(u==="html"||o>1&&i+s.length*c+u.length>=l));)s.push(u),i+=u.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function Lp(e,t){const n=e,r=[];if(!n?.tagName)return"";if(no.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=t?.length?t.filter(i=>n.getAttribute(i)).map(i=>[i,n.getAttribute(i)]):null;if(s?.length)s.forEach(i=>{r.push(`[${i[0]}="${i[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const i=n.className;if(i&&He(i)){const a=i.split(/\s+/);for(const c of a)r.push(`.${c}`)}}const o=["aria-label","type","name","title","alt"];for(const i of o){const a=n.getAttribute(i);a&&r.push(`[${i}="${a}"]`)}return r.join("")}function At(){try{return no.document.location.href}catch{return""}}function Na(e){if(!no.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function en(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function ro(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let s=Math.max(t-60,0);s<5&&(s=0);let o=Math.min(s+140,r);return o>r-5&&(o=r),o===r&&(s=Math.max(o-140,0)),n=n.slice(s,o),s>0&&(n=`'{snip} ${n}`),o<r&&(n+=" {snip}"),n}function wr(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const s=e[r];try{Aa(s)?n.push("[VueViewModel]"):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function Tr(e,t,n=!1){return He(e)?Ap(t)?t.test(e):He(t)?n?e===t:e.includes(t):!1:!1}function We(e,t=[],n=!1){return t.some(r=>Tr(e,r,n))}function we(e,t,n){if(!(t in e))return;const r=e[t];if(typeof r!="function")return;const s=n(r);typeof s=="function"&&La(s,r);try{e[t]=s}catch{T&&g.log(`Failed to replace method "${t}" in object`,e)}}function xe(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{T&&g.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function La(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,xe(e,"__sentry_original__",t)}catch{}}function so(e){return e.__sentry_original__}function Da(e){if(yt(e))return{message:e.message,name:e.name,stack:e.stack,...Fa(e)};if(vr(e)){const t={type:e.type,target:Pa(e.target),currentTarget:Pa(e.currentTarget),...Fa(e)};return typeof CustomEvent<"u"&&ot(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function Pa(e){try{return Mp(e)?$e(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Fa(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function Dp(e,t=40){const n=Object.keys(Da(e));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return en(r,t);for(let s=n.length;s>0;s--){const o=n.slice(0,s).join(", ");if(!(o.length>t))return s===n.length?o:en(o,t)}return""}function Pp(){const e=B;return e.crypto||e.msCrypto}function Te(e=Pp()){let t=()=>Math.random()*16;try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"");e?.getRandomValues&&(t=()=>{const n=new Uint8Array(1);return e.getRandomValues(n),n[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,n=>(n^(t()&15)>>n/4).toString(16))}function $a(e){return e.exception?.values?.[0]}function Ot(e){const{message:t,event_id:n}=e;if(t)return t;const r=$a(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function oo(e,t,n){const r=e.exception=e.exception||{},s=r.values=r.values||[],o=s[0]=s[0]||{};o.value||(o.value=t||""),o.type||(o.type="Error")}function St(e,t){const n=$a(e);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...t},t&&"data"in t){const o={...s?.data,...t.data};n.mechanism.data=o}}function Fp(e,t,n=5){if(t.lineno===void 0)return;const r=e.length,s=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,s-n),s).map(i=>ro(i,0));const o=Math.min(r-1,s);t.context_line=ro(e[o],t.colno||0),t.post_context=e.slice(Math.min(s+1,r),s+1+n).map(i=>ro(i,0))}function Ba(e){if($p(e))return!0;try{xe(e,"__sentry_captured__",!0)}catch{}return!1}function $p(e){try{return e.__sentry_captured__}catch{}}const Ua=1e3;function Nt(){return Date.now()/Ua}function Bp(){const{performance:e}=B;if(!e?.now||!e.timeOrigin)return Nt;const t=e.timeOrigin;return()=>(t+e.now())/Ua}let Ha;function pe(){return(Ha??(Ha=Bp()))()}let io;function Up(){const{performance:e}=B;if(!e?.now)return[void 0,"none"];const t=3600*1e3,n=e.now(),r=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,o=s<t,i=e.timing?.navigationStart,c=typeof i=="number"?Math.abs(i+n-r):t,u=c<t;return o||u?s<=c?[e.timeOrigin,"timeOrigin"]:[i,"navigationStart"]:[r,"dateNow"]}function Ie(){return io||(io=Up()),io[0]}function Hp(e){const t=pe(),n={sid:Te(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>zp(n)};return e&&tn(n,e),n}function tn(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||pe(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:Te()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Wp(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),tn(e,n)}function zp(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function $n(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=$n(r[s],t[s],n-1));return r}function it(){return Te()}function Bn(){return Te().substring(16)}const ao="_sentrySpan";function Lt(e,t){t?xe(e,ao,t):delete e[ao]}function Un(e){return e[ao]}const jp=100;class ze{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:it(),sampleRand:Math.random()}}clone(){const t=new ze;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,Lt(t,Un(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&tn(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,r=n instanceof ze?n.getScopeData():st(n)?t:void 0,{tags:s,extra:o,user:i,contexts:a,level:c,fingerprint:u=[],propagationContext:d}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...o},this._contexts={...this._contexts,...a},i&&Object.keys(i).length&&(this._user=i),c&&(this._level=c),u.length&&(this._fingerprint=u),d&&(this._propagationContext=d),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,Lt(this,void 0),this._attachments=[],this.setPropagationContext({traceId:it(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:jp;if(r<=0)return this;const s={timestamp:Nt(),...t,message:t.message?en(t.message,2048):t.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Un(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=$n(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n?.event_id||Te();if(!this._client)return T&&g.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:s,...n,event_id:r},this),r}captureMessage(t,n,r){const s=r?.event_id||Te();if(!this._client)return T&&g.warn("No client configured on scope - will not capture message!"),s;const o=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:o,...r,event_id:s},this),s}captureEvent(t,n){const r=n?.event_id||Te();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(T&&g.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function qp(){return Pn("defaultCurrentScope",()=>new ze)}function Gp(){return Pn("defaultIsolationScope",()=>new ze)}class Vp{constructor(t,n){let r;t?r=t:r=new ze;let s;n?s=n:s=new ze,this._stack=[{scope:r}],this._isolationScope=s}withScope(t){const n=this._pushScope();let r;try{r=t(n)}catch(s){throw this._popScope(),s}return Fn(r)?r.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function nn(){const e=nt(),t=Dn(e);return t.stack=t.stack||new Vp(qp(),Gp())}function Yp(e){return nn().withScope(e)}function Xp(e,t){const n=nn();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function Wa(e){return nn().withScope(()=>e(nn().getIsolationScope()))}function Kp(){return{withIsolationScope:Wa,withScope:Yp,withSetScope:Xp,withSetIsolationScope:(e,t)=>Wa(t),getCurrentScope:()=>nn().getScope(),getIsolationScope:()=>nn().getIsolationScope()}}function bt(e){const t=Dn(e);return t.acs?t.acs:Kp()}function G(){const e=nt();return bt(e).getCurrentScope()}function ge(){const e=nt();return bt(e).getIsolationScope()}function Ir(){return Pn("globalScope",()=>new ze)}function Be(...e){const t=nt(),n=bt(t);if(e.length===2){const[r,s]=e;return r?n.withSetScope(r,s):n.withScope(s)}return n.withScope(e[0])}function Jp(...e){const t=nt(),n=bt(t);if(e.length===2){const[r,s]=e;return r?n.withSetIsolationScope(r,s):n.withIsolationScope(s)}return n.withIsolationScope(e[0])}function R(){return G().getClient()}function za(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:s}=t,o={trace_id:n,span_id:s||Bn()};return r&&(o.parent_span_id=r),o}const Ae="sentry.source",kr="sentry.sample_rate",ja="sentry.previous_trace_sample_rate",Oe="sentry.op",ce="sentry.origin",Cr="sentry.idle_span_finish_reason",Hn="sentry.measurement_unit",Wn="sentry.measurement_value",co="sentry.custom_span_name",uo="sentry.profile_id",rn="sentry.exclusive_time",Zp="http.request.method",Qp="url.full",eh="sentry.link.type",th=0,lo=1,le=2;function qa(e){if(e<400&&e>=100)return{code:lo};if(e>=400&&e<500)switch(e){case 401:return{code:le,message:"unauthenticated"};case 403:return{code:le,message:"permission_denied"};case 404:return{code:le,message:"not_found"};case 409:return{code:le,message:"already_exists"};case 413:return{code:le,message:"failed_precondition"};case 429:return{code:le,message:"resource_exhausted"};case 499:return{code:le,message:"cancelled"};default:return{code:le,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:le,message:"unimplemented"};case 503:return{code:le,message:"unavailable"};case 504:return{code:le,message:"deadline_exceeded"};default:return{code:le,message:"internal_error"}}return{code:le,message:"unknown_error"}}function zn(e,t){e.setAttribute("http.response.status_code",t);const n=qa(t);n.message!=="unknown_error"&&e.setStatus(n)}const Ga="_sentryScope",Va="_sentryIsolationScope";function nh(e,t,n){e&&(xe(e,Va,n),xe(e,Ga,t))}function Rr(e){return{scope:e[Ga],isolationScope:e[Va]}}const fo="sentry-",rh=/^sentry-/,sh=8192;function po(e){const t=oh(e);if(!t)return;const n=Object.entries(t).reduce((r,[s,o])=>{if(s.match(rh)){const i=s.slice(fo.length);r[i]=o}return r},{});if(Object.keys(n).length>0)return n}function Ya(e){if(!e)return;const t=Object.entries(e).reduce((n,[r,s])=>(s&&(n[`${fo}${r}`]=s),n),{});return ih(t)}function oh(e){if(!(!e||!He(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const r=Xa(n);return Object.entries(r).forEach(([s,o])=>{t[s]=o}),t},{}):Xa(e)}function Xa(e){return e.split(",").map(t=>t.split("=").map(n=>{try{return decodeURIComponent(n.trim())}catch{return}})).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function ih(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],s)=>{const o=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,i=s===0?o:`${t},${o}`;return i.length>sh?(T&&g.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):i},"")}const ah=/^o(\d+)\./,ch=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function uh(e){return e==="http"||e==="https"}function Dt(e,t=!1){const{host:n,path:r,pass:s,port:o,projectId:i,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&s?`:${s}`:""}@${n}${o?`:${o}`:""}/${r&&`${r}/`}${i}`}function Ka(e){const t=ch.exec(e);if(!t){mt(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,s="",o="",i="",a=""]=t.slice(1);let c="",u=a;const d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){const l=u.match(/^\d+/);l&&(u=l[0])}return Ja({host:o,pass:s,path:c,projectId:u,port:i,protocol:n,publicKey:r})}function Ja(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function lh(e){if(!T)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(i=>e[i]?!1:(g.error(`Invalid Sentry Dsn: ${i} missing`),!0))?!1:n.match(/^\d+$/)?uh(r)?t&&isNaN(parseInt(t,10))?(g.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(g.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(g.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function dh(e){return e.match(ah)?.[1]}function Za(e){const t=e.getOptions(),{host:n}=e.getDsn()||{};let r;return t.orgId?r=String(t.orgId):n&&(r=dh(n)),r}function Qa(e){const t=typeof e=="string"?Ka(e):Ja(e);if(!(!t||!lh(t)))return t}function Pt(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const ec=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function fh(e){if(!e)return;const t=e.match(ec);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function tc(e,t){const n=fh(e),r=po(t);if(!n?.traceId)return{traceId:it(),sampleRand:Math.random()};const s=ph(n,r);r&&(r.sample_rand=s.toString());const{traceId:o,parentSpanId:i,parentSampled:a}=n;return{traceId:o,parentSpanId:i,sampled:a,dsc:r||{},sampleRand:s}}function nc(e=it(),t=Bn(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function ph(e,t){const n=Pt(t?.sample_rand);if(n!==void 0)return n;const r=Pt(t?.sample_rate);return r&&e?.parentSampled!==void 0?e.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}function hh(e,t){const n=Za(e);return t&&n&&t!==n?(g.log(`Won't continue trace because org IDs don't match (incoming baggage: ${t}, SDK options: ${n})`),!1):(e.getOptions().strictTraceContinuation||!1)&&(t&&!n||!t&&n)?(g.log(`Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ${t}, Sentry client: ${n})`),!1):!0}const rc=0,ho=1;let sc=!1;function mh(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:s,parent_span_id:o,status:i,origin:a,links:c}=z(e);return{parent_span_id:o,span_id:t,trace_id:n,data:r,op:s,status:i,origin:a,links:c}}function oc(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),s=r?t:z(e).parent_span_id,o=Rr(e).scope,i=r?o?.getPropagationContext().propagationSpanId||Bn():t;return{parent_span_id:s,span_id:i,trace_id:n}}function ic(e){const{traceId:t,spanId:n}=e.spanContext(),r=$t(e);return nc(t,n,r)}function ac(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...s},attributes:o})=>({span_id:t,trace_id:n,sampled:r===ho,attributes:o,...s}))}function Ft(e){return typeof e=="number"?cc(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?cc(e.getTime()):pe()}function cc(e){return e>9999999999?e/1e3:e}function z(e){if(_h(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(gh(e)){const{attributes:r,startTime:s,name:o,endTime:i,status:a,links:c}=e,u="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0;return{span_id:t,trace_id:n,data:r,description:o,parent_span_id:u,start_timestamp:Ft(s),timestamp:Ft(i)||void 0,status:uc(a),op:r[Oe],origin:r[ce],links:ac(c)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function gh(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function _h(e){return typeof e.getSpanJSON=="function"}function $t(e){const{traceFlags:t}=e.spanContext();return t===ho}function uc(e){if(!(!e||e.code===th))return e.code===lo?"ok":e.message||"unknown_error"}const Bt="_sentryChildSpans",mo="_sentryRootSpan";function lc(e,t){const n=e[mo]||e;xe(t,mo,n),e[Bt]?e[Bt].add(t):xe(e,Bt,new Set([t]))}function yh(e,t){e[Bt]&&e[Bt].delete(t)}function jn(e){const t=new Set;function n(r){if(!t.has(r)&&$t(r)){t.add(r);const s=r[Bt]?Array.from(r[Bt]):[];for(const o of s)n(o)}}return n(e),Array.from(t)}function _e(e){return e[mo]||e}function ye(){const e=nt(),t=bt(e);return t.getActiveSpan?t.getActiveSpan():Un(G())}function go(){sc||(mt(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),sc=!0)}function Sh(e,t){e.updateName(t),e.setAttributes({[Ae]:"custom",[co]:t})}let dc=!1;function fc(){if(dc)return;function e(){const t=ye(),n=t&&_e(t);if(n){const r="internal_error";T&&g.log(`[Tracing] Root span: ${r} -> Global error occurred`),n.setStatus({code:le,message:r})}}e.tag="sentry_tracingErrorCallback",dc=!0,ka(e),Ca(e)}function Et(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||R()?.getOptions();return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}const xr="production",pc="_frozenDsc";function Mr(e,t){xe(e,pc,t)}function hc(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},s={environment:n.environment||xr,release:n.release,public_key:r,trace_id:e,org_id:Za(t)};return t.emit("createDsc",s),s}function _o(e,t){const n=t.getPropagationContext();return n.dsc||hc(n.traceId,e)}function je(e){const t=R();if(!t)return{};const n=_e(e),r=z(n),s=r.data,o=n.spanContext().traceState,i=o?.get("sentry.sample_rate")??s[kr]??s[ja];function a(h){return(typeof i=="number"||typeof i=="string")&&(h.sample_rate=`${i}`),h}const c=n[pc];if(c)return a(c);const u=o?.get("sentry.dsc"),d=u&&po(u);if(d)return a(d);const l=hc(e.spanContext().traceId,t),p=s[Ae],f=r.description;return p!=="url"&&f&&(l.transaction=f),Et()&&(l.sampled=String($t(n)),l.sample_rand=o?.get("sentry.sample_rand")??Rr(n).scope?.getPropagationContext().sampleRand.toString()),a(l),t.emit("createDsc",l,n),l}function bh(e){const t=je(e);return Ya(t)}class at{constructor(t={}){this._traceId=t.traceId||it(),this._spanId=t.spanId||Bn()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:rc}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}}function Ne(e,t=100,n=1/0){try{return yo("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function mc(e,t=3,n=100*1024){const r=Ne(e,t);return Th(r)>n?mc(e,t-1,n):r}function yo(e,t,n=1/0,r=1/0,s=Ih()){const[o,i]=s;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=Eh(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(o(t))return"[Circular ~]";const u=t;if(u&&typeof u.toJSON=="function")try{const f=u.toJSON();return yo("",f,c-1,r,s)}catch{}const d=Array.isArray(t)?[]:{};let l=0;const p=Da(t);for(const f in p){if(!Object.prototype.hasOwnProperty.call(p,f))continue;if(l>=r){d[f]="[MaxProperties ~]";break}const h=p[f];d[f]=yo(f,h,c-1,r,s),l++}return i(t),d}function Eh(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(Aa(t))return"[VueViewModel]";if(Op(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${rt(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=vh(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function vh(e){const t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}function wh(e){return~-encodeURI(e).split(/%..|./).length}function Th(e){return wh(JSON.stringify(e))}function Ih(){const e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function ct(e,t=[]){return[e,t]}function kh(e,t){const[n,r]=e;return[n,[...r,t]]}function Ut(e,t){const n=e[1];for(const r of n){const s=r[0].type;if(t(r,s))return!0}return!1}function gc(e,t){return Ut(e,(n,r)=>t.includes(r))}function Ar(e){const t=Dn(B);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function Ch(e){const t=Dn(B);return t.decodePolyfill?t.decodePolyfill(e):new TextDecoder().decode(e)}function Or(e){const[t,n]=e;let r=JSON.stringify(t);function s(o){typeof r=="string"?r=typeof o=="string"?r+o:[Ar(r),o]:r.push(typeof o=="string"?Ar(o):o)}for(const o of n){const[i,a]=o;if(s(`
${JSON.stringify(i)}
`),typeof a=="string"||a instanceof Uint8Array)s(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(Ne(a))}s(c)}}return typeof r=="string"?r:Rh(r)}function Rh(e){const t=e.reduce((s,o)=>s+o.length,0),n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function xh(e){let t=typeof e=="string"?Ar(e):e;function n(i){const a=t.subarray(0,i);return t=t.subarray(i+1),a}function r(){let i=t.indexOf(10);return i<0&&(i=t.length),JSON.parse(Ch(n(i)))}const s=r(),o=[];for(;t.length;){const i=r(),a=typeof i.length=="number"?i.length:void 0;o.push([i,a?n(a):r()])}return[s,o]}function Mh(e){return[{type:"span"},e]}function Ah(e){const t=typeof e.data=="string"?Ar(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const Oh={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function _c(e){return Oh[e]}function So(e){if(!e?.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function yc(e,t,n,r){const s=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Dt(r)},...s&&{trace:s}}}function bo(e,t){if(!t?.length||!e.description)return!1;for(const n of t){if(Lh(n)){if(Tr(e.description,n))return!0;continue}if(!n.name&&!n.op)continue;const r=n.name?Tr(e.description,n.name):!0,s=n.op?e.op&&Tr(e.op,n.op):!0;if(r&&s)return!0}return!1}function Nh(e,t){const n=t.parent_span_id,r=t.span_id;if(n)for(const s of e)s.parent_span_id===r&&(s.parent_span_id=n)}function Lh(e){return typeof e=="string"||e instanceof RegExp}function Dh(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function Ph(e,t,n,r){const s=So(n),o={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&t&&{dsn:Dt(t)}},i="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return ct(o,[i])}function Fh(e,t,n,r){const s=So(n),o=e.type&&e.type!=="replay_event"?e.type:"event";Dh(e,n?.sdk);const i=yc(e,s,r,t);return delete e.sdkProcessingMetadata,ct(i,[[{type:o},e]])}function $h(e,t){function n(f){return!!f.trace_id&&!!f.public_key}const r=je(e[0]),s=t?.getDsn(),o=t?.getOptions().tunnel,i={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!o&&s&&{dsn:Dt(s)}},{beforeSendSpan:a,ignoreSpans:c}=t?.getOptions()||{},u=c?.length?e.filter(f=>!bo(z(f),c)):e,d=e.length-u.length;d&&t?.recordDroppedEvent("before_send","span",d);const l=a?f=>{const h=z(f),m=a(h);return m||(go(),h)}:z,p=[];for(const f of u){const h=l(f);h&&p.push(Mh(h))}return ct(i,p)}function Bh(e){if(!T)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=z(e),{spanId:s}=e.spanContext(),o=$t(e),i=_e(e),a=i===e,c=`[Tracing] Starting ${o?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${s}`];if(r&&u.push(`parent ID: ${r}`),!a){const{op:d,description:l}=z(i);u.push(`root ID: ${i.spanContext().spanId}`),d&&u.push(`root op: ${d}`),l&&u.push(`root description: ${l}`)}g.log(`${c}
  ${u.join(`
  `)}`)}function Uh(e){if(!T)return;const{description:t="< unknown name >",op:n="< unknown op >"}=z(e),{spanId:r}=e.spanContext(),o=_e(e)===e,i=`[Tracing] Finishing "${n}" ${o?"root ":""}span "${t}" with ID ${r}`;g.log(i)}function Sc(e,t,n,r=ye()){const s=r&&_e(r);s&&(T&&g.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),s.addEvent(e,{[Wn]:t,[Hn]:n}))}function bc(e){if(!e||e.length===0)return;const t={};return e.forEach(n=>{const r=n.attributes||{},s=r[Hn],o=r[Wn];typeof s=="string"&&typeof o=="number"&&(t[n.name]={value:o,unit:s})}),t}const Ec=1e3;class Nr{constructor(t={}){this._traceId=t.traceId||it(),this._spanId=t.spanId||Bn(),this._startTime=t.startTimestamp||pe(),this._links=t.links,this._attributes={},this.setAttributes({[ce]:"manual",[Oe]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?ho:rc}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=Ft(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(Ae,"custom"),this}end(t){this._endTime||(this._endTime=Ft(t),Uh(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Oe],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:uc(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[ce],profile_id:this._attributes[uo],exclusive_time:this._attributes[rn],measurements:bc(this._events),is_segment:this._isStandaloneSpan&&_e(this)===this||void 0,segment_id:this._isStandaloneSpan?_e(this).spanContext().spanId:void 0,links:ac(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){T&&g.log("[Tracing] Adding an event to span:",t);const s=vc(n)?n:r||pe(),o=vc(n)?{}:n||{},i={name:t,time:Ft(s),attributes:o};return this._events.push(i),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const t=R();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===_e(this)))return;if(this._isStandaloneSpan){this._sampled?Wh($h([this],t)):(T&&g.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(Rr(this).scope||G()).captureEvent(r)}_convertSpanToTransaction(){if(!wc(z(this)))return;this._name||(T&&g.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:n}=Rr(this),r=t?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(this._sampled!==!0)return;const o=jn(this).filter(d=>d!==this&&!Hh(d)).map(d=>z(d)).filter(wc),i=this._attributes[Ae];delete this._attributes[co],o.forEach(d=>{delete d.data[co]});const a={contexts:{trace:mh(this)},spans:o.length>Ec?o.sort((d,l)=>d.start_timestamp-l.start_timestamp).slice(0,Ec):o,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:je(this)},request:r,...i&&{transaction_info:{source:i}}},c=bc(this._events);return c&&Object.keys(c).length&&(T&&g.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}}function vc(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function wc(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function Hh(e){return e instanceof Nr&&e.isStandaloneSpan()}function Wh(e){const t=R();if(!t)return;const n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function Tc(e,t,n=()=>{}){let r;try{r=e()}catch(s){throw t(s),n(),s}return zh(r,t,n)}function zh(e,t,n){return Fn(e)?e.then(r=>(n(),r),r=>{throw t(r),n(),r}):(n(),e)}function jh(e,t,n){if(!Et(e))return[!1];let r,s;typeof e.tracesSampler=="function"?(s=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?s=t.parentSampled:typeof e.tracesSampleRate<"u"&&(s=e.tracesSampleRate,r=!0);const o=Pt(s);if(o===void 0)return T&&g.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),[!1];if(!o)return T&&g.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,o,r];const i=n<o;return i||T&&g.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),[i,o,r]}const Lr="__SENTRY_SUPPRESS_TRACING__";function Dr(e,t){const n=Gn();if(n.startSpan)return n.startSpan(e,t);const r=vo(e),{forceTransaction:s,parentSpan:o,scope:i}=e,a=i?.clone();return Be(a,()=>Rc(o)(()=>{const u=G(),d=wo(u,o),p=e.onlyIfParent&&!d?new at:Eo({parentSpan:d,spanArguments:r,forceTransaction:s,scope:u});return Lt(u,p),Tc(()=>t(p),()=>{const{status:f}=z(p);p.isRecording()&&(!f||f==="ok")&&p.setStatus({code:le,message:"internal_error"})},()=>{p.end()})}))}function qh(e,t){const n=Gn();if(n.startSpanManual)return n.startSpanManual(e,t);const r=vo(e),{forceTransaction:s,parentSpan:o,scope:i}=e,a=i?.clone();return Be(a,()=>Rc(o)(()=>{const u=G(),d=wo(u,o),p=e.onlyIfParent&&!d?new at:Eo({parentSpan:d,spanArguments:r,forceTransaction:s,scope:u});return Lt(u,p),Tc(()=>t(p,()=>p.end()),()=>{const{status:f}=z(p);p.isRecording()&&(!f||f==="ok")&&p.setStatus({code:le,message:"internal_error"})})}))}function Ht(e){const t=Gn();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=vo(e),{forceTransaction:r,parentSpan:s}=e;return(e.scope?i=>Be(e.scope,i):s!==void 0?i=>qn(s,i):i=>i())(()=>{const i=G(),a=wo(i,s);return e.onlyIfParent&&!a?new at:Eo({parentSpan:a,spanArguments:n,forceTransaction:r,scope:i})})}const Gh=(e,t)=>{const n=nt(),r=bt(n);if(r.continueTrace)return r.continueTrace(e,t);const{sentryTrace:s,baggage:o}=e,i=R(),a=po(o);return i&&!hh(i,a?.org_id)?kc(t):Be(c=>{const u=tc(s,o);return c.setPropagationContext(u),t()})};function qn(e,t){const n=Gn();return n.withActiveSpan?n.withActiveSpan(e,t):Be(r=>(Lt(r,e||void 0),t(r)))}function Ic(e){const t=Gn();return t.suppressTracing?t.suppressTracing(e):Be(n=>{n.setSDKProcessingMetadata({[Lr]:!0});const r=e();return n.setSDKProcessingMetadata({[Lr]:void 0}),r})}function kc(e){return Be(t=>(t.setPropagationContext({traceId:it(),sampleRand:Math.random()}),T&&g.log(`Starting a new trace with id ${t.getPropagationContext().traceId}`),qn(null,e)))}function Eo({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!Et()){const i=new at;if(n||!e){const a={sampled:"false",sample_rate:"0",transaction:t.name,...je(i)};Mr(i,a)}return i}const s=ge();let o;if(e&&!n)o=Vh(e,r,t),lc(e,o);else if(e){const i=je(e),{traceId:a,spanId:c}=e.spanContext(),u=$t(e);o=Cc({traceId:a,parentSpanId:c,...t},r,u),Mr(o,i)}else{const{traceId:i,dsc:a,parentSpanId:c,sampled:u}={...s.getPropagationContext(),...r.getPropagationContext()};o=Cc({traceId:i,parentSpanId:c,...t},r,u),a&&Mr(o,a)}return Bh(o),nh(o,r,s),o}function vo(e){const n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const r={...n};return r.startTimestamp=Ft(e.startTime),delete r.startTime,r}return n}function Gn(){const e=nt();return bt(e)}function Cc(e,t,n){const r=R(),s=r?.getOptions()||{},{name:o=""}=e,i={spanAttributes:{...e.attributes},spanName:o,parentSampled:n};r?.emit("beforeSampling",i,{decision:!1});const a=i.parentSampled??n,c=i.spanAttributes,u=t.getPropagationContext(),[d,l,p]=t.getScopeData().sdkProcessingMetadata[Lr]?[!1]:jh(s,{name:o,parentSampled:a,attributes:c,parentSampleRate:Pt(u.dsc?.sample_rate)},u.sampleRand),f=new Nr({...e,attributes:{[Ae]:"custom",[kr]:l!==void 0&&p?l:void 0,...c},sampled:d});return!d&&r&&(T&&g.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",f),f}function Vh(e,t,n){const{spanId:r,traceId:s}=e.spanContext(),o=t.getScopeData().sdkProcessingMetadata[Lr]?!1:$t(e),i=o?new Nr({...n,parentSpanId:r,traceId:s,sampled:o}):new at({traceId:s});lc(e,i);const a=R();return a&&(a.emit("spanStart",i),n.endTimestamp&&a.emit("spanEnd",i)),i}function wo(e,t){if(t)return t;if(t===null)return;const n=Un(e);if(!n)return;const r=R();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?_e(n):n}function Rc(e){return e!==void 0?t=>qn(e,t):t=>t()}const Pr={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},Yh="heartbeatFailed",Xh="idleTimeout",Kh="finalTimeout",Jh="externalFinish";function xc(e,t={}){const n=new Map;let r=!1,s,o=Jh,i=!t.disableAutoFinish;const a=[],{idleTimeout:c=Pr.idleTimeout,finalTimeout:u=Pr.finalTimeout,childSpanTimeout:d=Pr.childSpanTimeout,beforeSpanEnd:l}=t,p=R();if(!p||!Et()){const S=new at,w={sample_rate:"0",sampled:"false",...je(S)};return Mr(S,w),S}const f=G(),h=ye(),m=Zh(e);m.end=new Proxy(m.end,{apply(S,w,C){if(l&&l(m),w instanceof at)return;const[E,...I]=C,U=E||pe(),v=Ft(U),A=jn(m).filter(O=>O!==m);if(!A.length)return x(v),Reflect.apply(S,w,[v,...I]);const W=A.map(O=>z(O).timestamp).filter(O=>!!O),N=W.length?Math.max(...W):void 0,M=z(m).start_timestamp,$=Math.min(M?M+u/1e3:1/0,Math.max(M||-1/0,Math.min(v,N||1/0)));return x($),Reflect.apply(S,w,[$,...I])}});function _(){s&&(clearTimeout(s),s=void 0)}function y(S){_(),s=setTimeout(()=>{!r&&n.size===0&&i&&(o=Xh,m.end(S))},c)}function b(S){s=setTimeout(()=>{!r&&i&&(o=Yh,m.end(S))},d)}function L(S){_(),n.set(S,!0);const w=pe();b(w+d/1e3)}function k(S){if(n.has(S)&&n.delete(S),n.size===0){const w=pe();y(w+c/1e3)}}function x(S){r=!0,n.clear(),a.forEach(v=>v()),Lt(f,h);const w=z(m),{start_timestamp:C}=w;if(!C)return;w.data[Cr]||m.setAttribute(Cr,o),g.log(`[Tracing] Idle span "${w.op}" finished`);const I=jn(m).filter(v=>v!==m);let U=0;I.forEach(v=>{v.isRecording()&&(v.setStatus({code:le,message:"cancelled"}),v.end(S),T&&g.log("[Tracing] Cancelling span since span ended early",JSON.stringify(v,void 0,2)));const A=z(v),{timestamp:W=0,start_timestamp:N=0}=A,M=N<=S,$=(u+c)/1e3,O=W-N<=$;if(T){const q=JSON.stringify(v,void 0,2);M?O||g.log("[Tracing] Discarding span since it finished after idle span final timeout",q):g.log("[Tracing] Discarding span since it happened after idle span was finished",q)}(!O||!M)&&(yh(m,v),U++)}),U>0&&m.setAttribute("sentry.idle_span_discarded_spans",U)}return a.push(p.on("spanStart",S=>{if(r||S===m||z(S).timestamp||S instanceof Nr&&S.isStandaloneSpan())return;jn(m).includes(S)&&L(S.spanContext().spanId)})),a.push(p.on("spanEnd",S=>{r||k(S.spanContext().spanId)})),a.push(p.on("idleSpanEnableAutoFinish",S=>{S===m&&(i=!0,y(),n.size&&b())})),t.disableAutoFinish||y(),setTimeout(()=>{r||(m.setStatus({code:le,message:"deadline_exceeded"}),o=Kh,m.end())},u),m}function Zh(e){const t=Ht(e);return Lt(G(),t),T&&g.log("[Tracing] Started span is an idle span"),t}const To=0,Mc=1,Ac=2;function ut(e){return new vt(t=>{t(e)})}function Fr(e){return new vt((t,n)=>{n(e)})}class vt{constructor(t){this._state=To,this._handlers=[],this._runExecutor(t)}then(t,n){return new vt((r,s)=>{this._handlers.push([!1,o=>{if(!t)r(o);else try{r(t(o))}catch(i){s(i)}},o=>{if(!n)s(o);else try{r(n(o))}catch(i){s(i)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new vt((n,r)=>{let s,o;return this.then(i=>{o=!1,s=i,t&&t()},i=>{o=!0,s=i,t&&t()}).then(()=>{if(o){r(s);return}n(s)})})}_executeHandlers(){if(this._state===To)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Mc&&n[1](this._value),this._state===Ac&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(o,i)=>{if(this._state===To){if(Fn(i)){i.then(r,s);return}this._state=o,this._value=i,this._executeHandlers()}},r=o=>{n(Mc,o)},s=o=>{n(Ac,o)};try{t(r,s)}catch(o){s(o)}}}function Io(e,t,n,r=0){return new vt((s,o)=>{const i=e[r];if(t===null||typeof i!="function")s(t);else{const a=i({...t},n);T&&i.id&&a===null&&g.log(`Event processor "${i.id}" dropped event`),Fn(a)?a.then(c=>Io(e,c,n,r+1).then(s)).then(null,o):Io(e,a,n,r+1).then(s).then(null,o)}})}function Qh(e,t){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:o}=t;em(e,t),r&&rm(e,r),sm(e,n),tm(e,s),nm(e,o)}function $r(e,t){const{extra:n,tags:r,user:s,contexts:o,level:i,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:d,attachments:l,propagationContext:p,transactionName:f,span:h}=t;Br(e,"extra",n),Br(e,"tags",r),Br(e,"user",s),Br(e,"contexts",o),e.sdkProcessingMetadata=$n(e.sdkProcessingMetadata,a,2),i&&(e.level=i),f&&(e.transactionName=f),h&&(e.span=h),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),d.length&&(e.eventProcessors=[...e.eventProcessors,...d]),l.length&&(e.attachments=[...e.attachments,...l]),e.propagationContext={...e.propagationContext,...p}}function Br(e,t,n){e[t]=$n(e[t],n,1)}function em(e,t){const{extra:n,tags:r,user:s,contexts:o,level:i,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(s).length&&(e.user={...s,...e.user}),Object.keys(o).length&&(e.contexts={...o,...e.contexts}),i&&(e.level=i),a&&e.type!=="transaction"&&(e.transaction=a)}function tm(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function nm(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function rm(e,t){e.contexts={trace:oc(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:je(t),...e.sdkProcessingMetadata};const n=_e(t),r=z(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function sm(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}let Ur,Oc,Hr;function Nc(e){const t=B._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return Hr&&n.length===Oc||(Oc=n.length,Hr=n.reduce((r,s)=>{Ur||(Ur={});const o=Ur[s];if(o)r[o[0]]=o[1];else{const i=e(s);for(let a=i.length-1;a>=0;a--){const u=i[a]?.filename,d=t[s];if(u&&d){r[u]=d,Ur[s]=[u,d];break}}}return r},{})),Hr}function om(e,t){const n=Nc(e);if(!n)return[];const r=[];for(const s of t)s&&n[s]&&r.push({type:"sourcemap",code_file:s,debug_id:n[s]});return r}function Lc(e,t,n,r,s,o){const{normalizeDepth:i=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||Te(),timestamp:t.timestamp||Nt()},u=n.integrations||e.integrations.map(_=>_.name);im(c,e),um(c,u),s&&s.emit("applyFrameMetadata",t),t.type===void 0&&am(c,e.stackParser);const d=dm(r,n.captureContext);n.mechanism&&St(c,n.mechanism);const l=s?s.getEventProcessors():[],p=Ir().getScopeData();if(o){const _=o.getScopeData();$r(p,_)}if(d){const _=d.getScopeData();$r(p,_)}const f=[...n.attachments||[],...p.attachments];f.length&&(n.attachments=f),Qh(c,p);const h=[...l,...p.eventProcessors];return Io(h,c,n).then(_=>(_&&cm(_),typeof i=="number"&&i>0?lm(_,i,a):_))}function im(e,t){const{environment:n,release:r,dist:s,maxValueLength:o=250}=t;e.environment=e.environment||n||xr,!e.release&&r&&(e.release=r),!e.dist&&s&&(e.dist=s);const i=e.request;i?.url&&(i.url=en(i.url,o))}function am(e,t){const n=Nc(t);e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(s=>{s.filename&&(s.debug_id=n[s.filename])})})}function cm(e){const t={};if(e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(s=>{s.debug_id&&(s.abs_path?t[s.abs_path]=s.debug_id:s.filename&&(t[s.filename]=s.debug_id),delete s.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([r,s])=>{n.push({type:"sourcemap",code_file:r,debug_id:s})})}function um(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function lm(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(s=>({...s,...s.data&&{data:Ne(s.data,t,n)}}))},...e.user&&{user:Ne(e.user,t,n)},...e.contexts&&{contexts:Ne(e.contexts,t,n)},...e.extra&&{extra:Ne(e.extra,t,n)}};return e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Ne(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(s=>({...s,...s.data&&{data:Ne(s.data,t,n)}}))),e.contexts?.flags&&r.contexts&&(r.contexts.flags=Ne(e.contexts.flags,3,n)),r}function dm(e,t){if(!t)return e;const n=e?e.clone():new ze;return n.update(t),n}function fm(e){if(e)return pm(e)?{captureContext:e}:mm(e)?{captureContext:e}:e}function pm(e){return e instanceof ze||typeof e=="function"}const hm=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function mm(e){return Object.keys(e).some(t=>hm.includes(t))}function Wt(e,t){return G().captureException(e,fm(t))}function Wr(e,t){const n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return G().captureMessage(e,n,r)}function Vn(e,t){return G().captureEvent(e,t)}function Dc(e,t){ge().setContext(e,t)}function gm(e){ge().setExtras(e)}function _m(e,t){ge().setExtra(e,t)}function ym(e){ge().setTags(e)}function Sm(e,t){ge().setTag(e,t)}function bm(e){ge().setUser(e)}function Pc(){return ge().lastEventId()}async function Em(e){const t=R();return t?t.flush(e):(T&&g.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function vm(e){const t=R();return t?t.close(e):(T&&g.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function wm(){return!!R()}function Fc(){const e=R();return e?.getOptions().enabled!==!1&&!!e?.getTransport()}function $c(e){ge().addEventProcessor(e)}function ko(e){const t=ge(),n=G(),{userAgent:r}=B.navigator||{},s=Hp({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),o=t.getSession();return o?.status==="ok"&&tn(o,{status:"exited"}),Co(),t.setSession(s),s}function Co(){const e=ge(),n=G().getSession()||e.getSession();n&&Wp(n),Bc(),e.setSession()}function Bc(){const e=ge(),t=R(),n=e.getSession();n&&t&&t.captureSession(n)}function Ro(e=!1){if(e){Co();return}Bc()}const Tm="7";function Uc(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Im(e){return`${Uc(e)}${e.projectId}/envelope/`}function km(e,t){const n={sentry_version:Tm};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function Hc(e,t,n){return t||`${Im(e)}?${km(e,n)}`}function Cm(e,t){const n=Qa(e);if(!n)return"";const r=`${Uc(n)}embed/error-page/`;let s=`dsn=${Dt(n)}`;for(const o in t)if(o!=="dsn"&&o!=="onClose")if(o==="user"){const i=t.user;if(!i)continue;i.name&&(s+=`&name=${encodeURIComponent(i.name)}`),i.email&&(s+=`&email=${encodeURIComponent(i.email)}`)}else s+=`&${encodeURIComponent(o)}=${encodeURIComponent(t[o])}`;return`${r}?${s}`}const Wc=[];function Rm(e){const t={};return e.forEach(n=>{const{name:r}=n,s=t[r];s&&!s.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function xm(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(s=>{s.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){const s=n(t);r=Array.isArray(s)?s:[s]}else r=t;return Rm(r)}function Mm(e,t){const n={};return t.forEach(r=>{r&&jc(e,r,n)}),n}function zc(e,t){for(const n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function jc(e,t,n){if(n[t.name]){T&&g.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,Wc.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),Wc.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(s,o)=>r(s,o,e))}if(typeof t.processEvent=="function"){const r=t.processEvent.bind(t),s=Object.assign((o,i)=>r(o,i,e),{id:t.name});e.addEventProcessor(s)}T&&g.log(`Integration installed: ${t.name}`)}function xo(e){const t=R();if(!t){T&&g.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function n1(e){return e}function Am(e,t,n){const r=[{type:"client_report"},{timestamp:Nt(),discarded_events:e}];return ct(t?{dsn:t}:{},[r])}function qc(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function Om(e){const{trace_id:t,parent_span_id:n,span_id:r,status:s,origin:o,data:i,op:a}=e.contexts?.trace??{};return{data:i??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:s,timestamp:e.timestamp,trace_id:t??"",origin:o,profile_id:i?.[uo],exclusive_time:i?.[rn],measurements:e.measurements,is_segment:!0}}function Nm(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[uo]:e.profile_id},...e.exclusive_time&&{[rn]:e.exclusive_time}}}},measurements:e.measurements}}const Gc="Not capturing exception because it's already been captured.",Vc="Discarded session because of missing or non-string release",Yc=Symbol.for("SentryInternalError"),Xc=Symbol.for("SentryDoNotSendEventError");function zr(e){return{message:e,[Yc]:!0}}function Mo(e){return{message:e,[Xc]:!0}}function Kc(e){return!!e&&typeof e=="object"&&Yc in e}function Jc(e){return!!e&&typeof e=="object"&&Xc in e}class Lm{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Qa(t.dsn):T&&g.warn("No DSN provided, client will not send events."),this._dsn){const n=Hc(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){const s=Te();if(Ba(t))return T&&g.log(Gc),s;const o={event_id:s,...n};return this._process(this.eventFromException(t,o).then(i=>this._captureEvent(i,o,r))),o.event_id}captureMessage(t,n,r,s){const o={event_id:Te(),...r},i=Er(t)?t:String(t),a=Qt(t)?this.eventFromMessage(i,n,o):this.eventFromException(t,o);return this._process(a.then(c=>this._captureEvent(c,o,s))),o.event_id}captureEvent(t,n,r){const s=Te();if(n?.originalException&&Ba(n.originalException))return T&&g.log(Gc),s;const o={event_id:s,...n},i=t.sdkProcessingMetadata||{},a=i.capturedSpanScope,c=i.capturedSpanIsolationScope;return this._process(this._captureEvent(t,o,a||r,c)),o.event_id}captureSession(t){this.sendSession(t),tn(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(s=>r&&s))):ut(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];jc(this,t,this._integrations),n||zc(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=Fh(t,this._dsn,this._options._metadata,this._options.tunnel);for(const o of n.attachments||[])r=kh(r,Ah(o));const s=this.sendEnvelope(r);s&&s.then(o=>this.emit("afterSendEvent",t,o),null)}sendSession(t){const{release:n,environment:r=xr}=this._options;if("aggregates"in t){const o=t.attrs||{};if(!o.release&&!n){T&&g.warn(Vc);return}o.release=o.release||n,o.environment=o.environment||r,t.attrs=o}else{if(!t.release&&!n){T&&g.warn(Vc);return}t.release=t.release||n,t.environment=t.environment||r}this.emit("beforeSendSession",t);const s=Ph(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(s)}recordDroppedEvent(t,n,r=1){if(this._options.sendClientReports){const s=`${t}:${n}`;T&&g.log(`Recording outcome: "${s}"${r>1?` (${r} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+r}}on(t,n){const r=this._hooks[t]=this._hooks[t]||[];return r.push(n),()=>{const s=r.indexOf(n);s>-1&&r.splice(s,1)}}emit(t,...n){const r=this._hooks[t];r&&r.forEach(s=>s(...n))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,n=>(T&&g.error("Error while sending envelope:",n),n)):(T&&g.error("Transport disabled"),ut({}))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=Mm(this,t),zc(this,t)}_updateSessionFromEvent(t,n){let r=n.level==="fatal",s=!1;const o=n.exception?.values;if(o){s=!0;for(const c of o)if(c.mechanism?.handled===!1){r=!0;break}}const i=t.status==="ok";(i&&t.errors===0||i&&r)&&(tn(t,{...r&&{status:"crashed"},errors:t.errors||Number(s||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new vt(n=>{let r=0;const s=1,o=setInterval(()=>{this._numProcessing==0?(clearInterval(o),n(!0)):(r+=s,t&&r>=t&&(clearInterval(o),n(!1)))},s)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,s){const o=this.getOptions(),i=Object.keys(this._integrations);return!n.integrations&&i?.length&&(n.integrations=i),this.emit("preprocessEvent",t,n),t.type||s.setLastEventId(t.event_id||n.event_id),Lc(o,t,n,r,this,s).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:za(r),...a.contexts};const c=_o(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r=G(),s=ge()){return T&&Ao(t)&&g.log(`Captured error event \`${qc(t)[0]||"<unknown>"}\``),this._processEvent(t,n,r,s).then(o=>o.event_id,o=>{T&&(Jc(o)?g.log(o.message):Kc(o)?g.warn(o.message):g.warn(o))})}_processEvent(t,n,r,s){const o=this.getOptions(),{sampleRate:i}=o,a=Zc(t),c=Ao(t),u=t.type||"error",d=`before send for type \`${u}\``,l=typeof i>"u"?void 0:Pt(i);if(c&&typeof l=="number"&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error"),Fr(Mo(`Discarding event because it's not included in the random sample (sampling rate = ${i})`));const p=u==="replay_event"?"replay":u;return this._prepareEvent(t,n,r,s).then(f=>{if(f===null)throw this.recordDroppedEvent("event_processor",p),Mo("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return f;const m=Pm(this,o,f,n);return Dm(m,d)}).then(f=>{if(f===null){if(this.recordDroppedEvent("before_send",p),a){const y=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",y)}throw Mo(`${d} returned \`null\`, will not send event.`)}const h=r.getSession()||s.getSession();if(c&&h&&this._updateSessionFromEvent(h,f),a){const _=f.sdkProcessingMetadata?.spanCountBeforeProcessing||0,y=f.spans?f.spans.length:0,b=_-y;b>0&&this.recordDroppedEvent("before_send","span",b)}const m=f.transaction_info;if(a&&m&&f.transaction!==t.transaction){const _="custom";f.transaction_info={...m,source:_}}return this.sendEvent(f,n),f}).then(null,f=>{throw Jc(f)||Kc(f)?f:(this.captureException(f,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:f}),zr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${f}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{const[s,o]=n.split(":");return{reason:s,category:o,quantity:r}})}_flushOutcomes(){T&&g.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){T&&g.log("No outcomes to send");return}if(!this._dsn){T&&g.log("No dsn provided, will not send outcomes");return}T&&g.log("Sending outcomes:",t);const n=Am(t,this._options.tunnel&&Dt(this._dsn));this.sendEnvelope(n)}}function Dm(e,t){const n=`${t} must return \`null\` or a valid event.`;if(Fn(e))return e.then(r=>{if(!st(r)&&r!==null)throw zr(n);return r},r=>{throw zr(`${t} rejected with ${r}`)});if(!st(e)&&e!==null)throw zr(n);return e}function Pm(e,t,n,r){const{beforeSend:s,beforeSendTransaction:o,beforeSendSpan:i,ignoreSpans:a}=t;let c=n;if(Ao(c)&&s)return s(c,r);if(Zc(c)){if(i||a){const u=Om(c);if(a?.length&&bo(u,a))return null;if(i){const d=i(u);d?c=$n(n,Nm(d)):go()}if(c.spans){const d=[],l=c.spans;for(const f of l){if(a?.length&&bo(f,a)){Nh(l,f);continue}if(i){const h=i(f);h?d.push(h):(go(),d.push(f))}else d.push(f)}const p=c.spans.length-d.length;p&&e.recordDroppedEvent("before_send","span",p),c.spans=d}}if(o){if(c.spans){const u=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:u}}return o(c,r)}}return c}function Ao(e){return e.type===void 0}function Zc(e){return e.type==="transaction"}function Fm(e,t){return t?Be(t,()=>{const n=ye(),r=n?oc(n):za(t);return[n?je(n):_o(e,t),r]}):[void 0,void 0]}const $m={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function Bm(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function Um(e,t,n,r){const s={};return t?.sdk&&(s.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(s.dsn=Dt(r)),ct(s,[Bm(e)])}const Hm=100;function Wm(e){switch(typeof e){case"number":return Number.isInteger(e)?{value:e,type:"integer"}:{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let t="";try{t=JSON.stringify(e)??""}catch{}return{value:t,type:"string"}}}}function wt(e,t,n,r=!0){n&&(!e[t]||r)&&(e[t]=n)}function zm(e,t){const n=No(),r=Qc(e);r===void 0?n.set(e,[t]):(n.set(e,[...r,t]),r.length>=Hm&&jr(e,r))}function Oo(e,t=R(),n=G(),r=zm){if(!t){T&&g.warn("No client available to capture log.");return}const{release:s,environment:o,enableLogs:i=!1,beforeSendLog:a}=t.getOptions();if(!i){T&&g.warn("logging option not enabled, log will not be captured.");return}const[,c]=Fm(t,n),u={...e.attributes},{user:{id:d,email:l,username:p}}=jm(n);wt(u,"user.id",d,!1),wt(u,"user.email",l,!1),wt(u,"user.name",p,!1),wt(u,"sentry.release",s),wt(u,"sentry.environment",o);const{name:f,version:h}=t.getSdkMetadata()?.sdk??{};wt(u,"sentry.sdk.name",f),wt(u,"sentry.sdk.version",h);const m=e.message;if(Er(m)){const{__sentry_template_string__:C,__sentry_template_values__:E=[]}=m;u["sentry.message.template"]=C,E.forEach((I,U)=>{u[`sentry.message.parameter.${U}`]=I})}const _=Un(n);wt(u,"sentry.trace.parent_span_id",_?.spanContext().spanId);const y={...e,attributes:u};t.emit("beforeCaptureLog",y);const b=a?mt(()=>a(y)):y;if(!b){t.recordDroppedEvent("before_send","log_item",1),T&&g.warn("beforeSendLog returned null, log will not be captured.");return}const{level:L,message:k,attributes:x={},severityNumber:S}=b,w={timestamp:pe(),level:L,body:k,trace_id:c?.trace_id,severity_number:S??$m[L],attributes:Object.keys(x).reduce((C,E)=>(C[E]=Wm(x[E]),C),{})};r(t,w),t.emit("afterCaptureLog",b)}function jr(e,t){const n=t??Qc(e)??[];if(n.length===0)return;const r=e.getOptions(),s=Um(n,r._metadata,r.tunnel,e.getDsn());No().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(s)}function Qc(e){return No().get(e)}function jm(e){const t=Ir().getScopeData();return $r(t,ge().getScopeData()),$r(t,e.getScopeData()),t}function No(){return Pn("clientToLogBufferMap",()=>new WeakMap)}function qm(e,t){t.debug===!0&&(T?g.enable():mt(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),G().update(t.initialScope);const r=new e(t);return eu(r),r.init(),r}function eu(e){G().setClient(e)}const tu=Symbol.for("SentryBufferFullError");function Gm(e){const t=[];function n(){return e===void 0||t.length<e}function r(i){return t.splice(t.indexOf(i),1)[0]||Promise.resolve(void 0)}function s(i){if(!n())return Fr(tu);const a=i();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function o(i){return new vt((a,c)=>{let u=t.length;if(!u)return a(!0);const d=setTimeout(()=>{i&&i>0&&a(!1)},i);t.forEach(l=>{ut(l).then(()=>{--u||(clearTimeout(d),a(!0))},c)})})}return{$:t,add:s,drain:o}}const Vm=60*1e3;function nu(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?Vm:r-t}function Ym(e,t){return e[t]||e.all||0}function ru(e,t,n=Date.now()){return Ym(e,t)>n}function su(e,{statusCode:t,headers:n},r=Date.now()){const s={...e},o=n?.["x-sentry-rate-limits"],i=n?.["retry-after"];if(o)for(const a of o.trim().split(",")){const[c,u,,,d]=a.split(":",5),l=parseInt(c,10),p=(isNaN(l)?60:l)*1e3;if(!u)s.all=r+p;else for(const f of u.split(";"))f==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(s[f]=r+p):s[f]=r+p}else i?s.all=r+nu(i,r):t===429&&(s.all=r+60*1e3);return s}const Xm=64;function ou(e,t,n=Gm(e.bufferSize||Xm)){let r={};const s=i=>n.drain(i);function o(i){const a=[];if(Ut(i,(l,p)=>{const f=_c(p);ru(r,f)?e.recordDroppedEvent("ratelimit_backoff",f):a.push(l)}),a.length===0)return ut({});const c=ct(i[0],a),u=l=>{Ut(c,(p,f)=>{e.recordDroppedEvent(l,_c(f))})},d=()=>t({body:Or(c)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&T&&g.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=su(r,l),l),l=>{throw u("network_error"),T&&g.error("Encountered error running transport request:",l),l});return n.add(d).then(l=>l,l=>{if(l===tu)return T&&g.error("Skipped sending event because buffer is full."),u("queue_overflow"),ut({});throw l})}return{send:o,flush:s}}const Lo=100,Do=5e3,Km=36e5;function Jm(e){function t(...n){T&&g.log("[Offline]:",...n)}return n=>{const r=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");const s=n.createStore(n);let o=Do,i;function a(l,p,f){return gc(l,["client_report"])?!1:n.shouldStore?n.shouldStore(l,p,f):!0}function c(l){i&&clearTimeout(i),i=setTimeout(async()=>{i=void 0;const p=await s.shift();p&&(t("Attempting to send previously queued event"),p[0].sent_at=new Date().toISOString(),d(p,!0).catch(f=>{t("Failed to retry sending",f)}))},l),typeof i!="number"&&i.unref&&i.unref()}function u(){i||(c(o),o=Math.min(o*2,Km))}async function d(l,p=!1){if(!p&&gc(l,["replay_event","replay_recording"]))return await s.push(l),c(Lo),{};try{if(n.shouldSend&&await n.shouldSend(l)===!1)throw new Error("Envelope not sent because `shouldSend` callback returned false");const f=await r.send(l);let h=Lo;if(f){if(f.headers?.["retry-after"])h=nu(f.headers["retry-after"]);else if(f.headers?.["x-sentry-rate-limits"])h=6e4;else if((f.statusCode||0)>=400)return f}return c(h),o=Do,f}catch(f){if(await a(l,f,o))return p?await s.unshift(l):await s.push(l),u(),t("Error sending. Event queued.",f),{};throw f}}return n.flushAtStartup&&u(),{send:d,flush:l=>(l===void 0&&(o=Do,c(Lo)),r.flush(l))}}}function iu(e,t){let n;return Ut(e,(r,s)=>(t.includes(s)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function Zm(e,t){return n=>{const r=e(n);return{...r,send:async s=>{const o=iu(s,["event","transaction","profile","replay_event"]);return o&&(o.release=t),r.send(s)}}}}function Qm(e,t){return ct(t?{...e[0],dsn:t}:e[0],e[1])}function eg(e,t){return n=>{const r=e(n),s=new Map;function o(c,u){const d=u?`${c}:${u}`:c;let l=s.get(d);if(!l){const p=Ka(c);if(!p)return;const f=Hc(p,n.tunnel);l=u?Zm(e,u)({...n,url:f}):e({...n,url:f}),s.set(d,l)}return[c,l]}async function i(c){function u(f){const h=f?.length?f:["event"];return iu(c,h)}const d=t({envelope:c,getEvent:u}).map(f=>typeof f=="string"?o(f,void 0):o(f.dsn,f.release)).filter(f=>!!f),l=d.length?d:[["",r]];return(await Promise.all(l.map(([f,h])=>h.send(Qm(c,f)))))[0]}async function a(c){const u=[...s.values(),r];return(await Promise.all(u.map(l=>l.flush(c)))).every(l=>l)}return{send:i,flush:a}}}function au(e,t){const n=t?.getDsn(),r=t?.getOptions().tunnel;return ng(e,n)||tg(e,r)}function tg(e,t){return t?cu(e)===cu(t):!1}function ng(e,t){return t?e.includes(t.host):!1}function cu(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function uu(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}const rg=uu;function sg(e){e.user?.ip_address===void 0&&(e.user={...e.user,ip_address:"{{auto}}"})}function og(e){"aggregates"in e?e.attrs?.ip_address===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function ig(e,t,n=[t],r="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:n.map(o=>({name:`${r}:@sentry/${o}`,version:tt})),version:tt}),e._metadata=s}function Po(e={}){const t=e.client||R();if(!Fc()||!t)return{};const n=nt(),r=bt(n);if(r.getTraceData)return r.getTraceData(e);const s=e.scope||G(),o=e.span||ye(),i=o?ic(o):ag(s),a=o?je(o):_o(t,s),c=Ya(a);return ec.test(i)?{"sentry-trace":i,baggage:c}:(g.warn("Invalid sentry-trace data. Cannot generate trace data"),{})}function ag(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return nc(t,r,n)}function cg(e,t,n){let r,s,o;const i=n?.maxWait?Math.max(n.maxWait,t):0,a=n?.setTimeoutImpl||setTimeout;function c(){return u(),r=e(),r}function u(){s!==void 0&&clearTimeout(s),o!==void 0&&clearTimeout(o),s=o=void 0}function d(){return s!==void 0||o!==void 0?c():r}function l(){return s&&clearTimeout(s),s=a(c,t),i&&o===void 0&&(o=a(c,i)),r}return l.cancel=u,l.flush=d,l}const ug=100;function Ke(e,t){const n=R(),r=ge();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:o=ug}=n.getOptions();if(o<=0)return;const a={timestamp:Nt(),...e},c=s?mt(()=>s(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,o))}let lu;const lg="FunctionToString",du=new WeakMap,fu=()=>({name:lg,setupOnce(){lu=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=so(this),n=du.has(R())&&t!==void 0?t:this;return lu.apply(n,e)}}catch{}},setup(e){du.set(e,!0)}}),dg=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],fg="EventFilters",pu=(e={})=>{let t;return{name:fg,setup(n){const r=n.getOptions();t=mu(e,r)},processEvent(n,r,s){if(!t){const o=s.getOptions();t=mu(e,o)}return pg(n,t)?null:n}}},hu=(e={})=>({...pu(e),name:"InboundFilters"});function mu(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:dg],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function pg(e,t){if(e.type){if(e.type==="transaction"&&mg(e,t.ignoreTransactions))return T&&g.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Ot(e)}`),!0}else{if(hg(e,t.ignoreErrors))return T&&g.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Ot(e)}`),!0;if(Sg(e))return T&&g.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Ot(e)}`),!0;if(gg(e,t.denyUrls))return T&&g.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Ot(e)}.
Url: ${qr(e)}`),!0;if(!_g(e,t.allowUrls))return T&&g.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Ot(e)}.
Url: ${qr(e)}`),!0}return!1}function hg(e,t){return t?.length?qc(e).some(n=>We(n,t)):!1}function mg(e,t){if(!t?.length)return!1;const n=e.transaction;return n?We(n,t):!1}function gg(e,t){if(!t?.length)return!1;const n=qr(e);return n?We(n,t):!1}function _g(e,t){if(!t?.length)return!0;const n=qr(e);return n?We(n,t):!0}function yg(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function qr(e){try{const n=[...e.exception?.values??[]].reverse().find(r=>r.mechanism?.parent_id===void 0&&r.stacktrace?.frames?.length)?.stacktrace?.frames;return n?yg(n):null}catch{return T&&g.error(`Cannot extract url for event ${Ot(e)}`),null}}function Sg(e){return e.exception?.values?.length?!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value):!1}function bg(e,t,n,r,s,o){if(!s.exception?.values||!o||!ot(o.originalException,Error))return;const i=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;i&&(s.exception.values=Fo(e,t,r,o.originalException,n,s.exception.values,i,0))}function Fo(e,t,n,r,s,o,i,a){if(o.length>=n+1)return o;let c=[...o];if(ot(r[s],Error)){gu(i,a);const u=e(t,r[s]),d=c.length;_u(u,s,d,a),c=Fo(e,t,n,r[s],s,[u,...c],u,d)}return Array.isArray(r.errors)&&r.errors.forEach((u,d)=>{if(ot(u,Error)){gu(i,a);const l=e(t,u),p=c.length;_u(l,`errors[${d}]`,p,a),c=Fo(e,t,n,u,s,[l,...c],l,p)}}),c}function gu(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function _u(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}const yu=new Map,Su=new Set;function Eg(e){if(B._sentryModuleMetadata)for(const t of Object.keys(B._sentryModuleMetadata)){const n=B._sentryModuleMetadata[t];if(Su.has(t))continue;Su.add(t);const r=e(t);for(const s of r.reverse())if(s.filename){yu.set(s.filename,n);break}}}function vg(e,t){return Eg(e),yu.get(t)}function bu(e,t){try{t.exception.values.forEach(n=>{if(n.stacktrace)for(const r of n.stacktrace.frames||[]){if(!r.filename||r.module_metadata)continue;const s=vg(e,r.filename);s&&(r.module_metadata=s)}})}catch{}}function Eu(e){try{e.exception.values.forEach(t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[])delete n.module_metadata})}catch{}}const wg=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",t=>{Ut(t,(n,r)=>{if(r==="event"){const s=Array.isArray(n)?n[1]:void 0;s&&(Eu(s),n[1]=s)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;const n=e.getOptions().stackParser;bu(n,t)})}});function $o(e){const t="console";gt(t,e),_t(t,Tg)}function Tg(){"console"in B&&Xs.forEach(function(e){e in B.console&&we(B.console,e,function(t){return yr[e]=t,function(...n){Fe("console",{args:n,level:e}),yr[e]?.apply(B.console,n)}})})}function Bo(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const Ig="CaptureConsole",kg=(e={})=>{const t=e.levels||Xs,n=e.handled??!0;return{name:Ig,setup(r){"console"in B&&$o(({args:s,level:o})=>{R()!==r||!t.includes(o)||Cg(s,o,n)})}}};function Cg(e,t,n){const r={level:Bo(t),extra:{arguments:e}};Be(s=>{if(s.addEventProcessor(a=>(a.logger="console",St(a,{handled:n,type:"console"}),a)),t==="assert"){if(!e[0]){const a=`Assertion failed: ${wr(e.slice(1)," ")||"console.assert"}`;s.setExtra("arguments",e.slice(1)),Wr(a,r)}return}const o=e.find(a=>a instanceof Error);if(o){Wt(o,r);return}const i=wr(e," ");Wr(i,r)})}const Rg="Dedupe",vu=()=>{let e;return{name:Rg,processEvent(t){if(t.type)return t;try{if(xg(t,e))return T&&g.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}};function xg(e,t){return t?!!(Mg(e,t)||Ag(e,t)):!1}function Mg(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Tu(e,t)||!wu(e,t))}function Ag(e,t){const n=Iu(t),r=Iu(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Tu(e,t)||!wu(e,t))}function wu(e,t){let n=Qs(e),r=Qs(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let s=0;s<r.length;s++){const o=r[s],i=n[s];if(o.filename!==i.filename||o.lineno!==i.lineno||o.colno!==i.colno||o.function!==i.function)return!1}return!0}function Tu(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Iu(e){return e.exception?.values?.[0]}const Og="ExtraErrorData",Ng=(e={})=>{const{depth:t=3,captureErrorCause:n=!0}=e;return{name:Og,processEvent(r,s,o){const{maxValueLength:i=250}=o.getOptions();return Lg(r,s,t,n,i)}}};function Lg(e,t={},n,r,s){if(!t.originalException||!yt(t.originalException))return e;const o=t.originalException.name||t.originalException.constructor.name,i=Dg(t.originalException,r,s);if(i){const a={...e.contexts},c=Ne(i,n);return st(c)&&(xe(c,"__sentry_skip_normalization__",!0),a[o]=c),{...e,contexts:a}}return e}function Dg(e,t,n){try{const r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],s={};for(const o of Object.keys(e)){if(r.indexOf(o)!==-1)continue;const i=e[o];s[o]=yt(i)||typeof i=="string"?en(`${i}`,n):i}if(t&&e.cause!==void 0&&(s.cause=yt(e.cause)?e.cause.toString():e.cause),typeof e.toJSON=="function"){const o=e.toJSON();for(const i of Object.keys(o)){const a=o[i];s[i]=yt(a)?a.toString():a}}return s}catch(r){T&&g.error("Unable to extract extra data from the Error object:",r)}return null}function Pg(e,t){let n=0;for(let r=e.length-1;r>=0;r--){const s=e[r];s==="."?e.splice(r,1):s===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}const Fg=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function $g(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=Fg.exec(t);return n?n.slice(1):[]}function ku(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const s=r>=0?e[r]:"/";s&&(t=`${s}/${t}`,n=s.charAt(0)==="/")}return t=Pg(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function Cu(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function Bg(e,t){e=ku(e).slice(1),t=ku(t).slice(1);const n=Cu(e.split("/")),r=Cu(t.split("/")),s=Math.min(n.length,r.length);let o=s;for(let a=0;a<s;a++)if(n[a]!==r[a]){o=a;break}let i=[];for(let a=o;a<n.length;a++)i.push("..");return i=i.concat(r.slice(o)),i.join("/")}function Ug(e,t){return $g(e)[2]||""}const Hg="RewriteFrames",Wg=(e={})=>{const t=e.root,n=e.prefix||"app:///",r="window"in B&&!!B.window,s=e.iteratee||zg({isBrowser:r,root:t,prefix:n});function o(a){try{return{...a,exception:{...a.exception,values:a.exception.values.map(c=>({...c,...c.stacktrace&&{stacktrace:i(c.stacktrace)}}))}}}catch{return a}}function i(a){return{...a,frames:a?.frames?.map(c=>s(c))}}return{name:Hg,processEvent(a){let c=a;return a.exception&&Array.isArray(a.exception.values)&&(c=o(c)),c}}};function zg({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;const s=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),o=/^\//.test(r.filename);if(e){if(t){const i=r.filename;i.indexOf(t)===0&&(r.filename=i.replace(t,n))}}else if(s||o){const i=s?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,a=t?Bg(t,i):Ug(i);r.filename=`${n}${a}`}return r}}const jg=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],qg=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],Gg={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},Ru=["select","insert","upsert","update","delete"];function Gr(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function Vr(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function Vg(e,t={}){switch(e){case"GET":return"select";case"POST":return t.Prefer?.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}function Yg(e,t){if(t===""||t==="*")return"select(*)";if(e==="select")return`select(${t})`;if(e==="or"||e.endsWith(".or"))return`${e}${t}`;const[n,...r]=t.split(".");let s;return n?.startsWith("fts")?s="textSearch":n?.startsWith("plfts")?s="textSearch[plain]":n?.startsWith("phfts")?s="textSearch[phrase]":n?.startsWith("wfts")?s="textSearch[websearch]":s=n&&Gg[n]||"filter",`${s}(${e}, ${r.join(".")})`}function xu(e,t=!1){return new Proxy(e,{apply(n,r,s){return Dr({name:`auth ${t?"(admin) ":""}${e.name}`,attributes:{[ce]:"auto.db.supabase",[Oe]:"db","db.system":"postgresql","db.operation":`auth.${t?"admin.":""}${e.name}`}},o=>Reflect.apply(n,r,s).then(i=>(i&&typeof i=="object"&&"error"in i&&i.error?(o.setStatus({code:le}),Wt(i.error,{mechanism:{handled:!1}})):o.setStatus({code:lo}),o.end(),i)).catch(i=>{throw o.setStatus({code:le}),o.end(),Wt(i,{mechanism:{handled:!1}}),i}).then(...s))}})}function Xg(e){const t=e.auth;if(!(!t||Vr(e.auth))){for(const n of jg){const r=t[n];r&&typeof e.auth[n]=="function"&&(e.auth[n]=xu(r))}for(const n of qg){const r=t.admin[n];r&&typeof e.auth.admin[n]=="function"&&(e.auth.admin[n]=xu(r,!0))}Gr(e.auth)}}function Kg(e){Vr(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(t,n,r){const s=Reflect.apply(t,n,r),o=s.constructor;return Zg(o),s}}),Gr(e.prototype.from))}function Jg(e){Vr(e.prototype.then)||(e.prototype.then=new Proxy(e.prototype.then,{apply(t,n,r){const s=Ru,o=n,i=Vg(o.method,o.headers);if(!s.includes(i)||!o?.url?.pathname||typeof o.url.pathname!="string")return Reflect.apply(t,n,r);const a=o.url.pathname.split("/"),c=a.length>0?a[a.length-1]:"",u=[];for(const[f,h]of o.url.searchParams.entries())u.push(Yg(f,h));const d=Object.create(null);if(st(o.body))for(const[f,h]of Object.entries(o.body))d[f]=h;const l=`${i==="select"?"":`${i}${d?"(...) ":""}`}${u.join(" ")} from(${c})`,p={"db.table":c,"db.schema":o.schema,"db.url":o.url.origin,"db.sdk":o.headers["X-Client-Info"],"db.system":"postgresql","db.operation":i,[ce]:"auto.db.supabase",[Oe]:"db"};return u.length&&(p["db.query"]=u),Object.keys(d).length&&(p["db.body"]=d),Dr({name:l,attributes:p},f=>Reflect.apply(t,n,[]).then(h=>{if(f&&(h&&typeof h=="object"&&"status"in h&&zn(f,h.status||500),f.end()),h.error){const y=new Error(h.error.message);h.error.code&&(y.code=h.error.code),h.error.details&&(y.details=h.error.details);const b={};u.length&&(b.query=u),Object.keys(d).length&&(b.body=d),Wt(y,{contexts:{supabase:b}})}const m={type:"supabase",category:`db.${i}`,message:l},_={};return u.length&&(_.query=u),Object.keys(d).length&&(_.body=d),Object.keys(_).length&&(m.data=_),Ke(m),h},h=>{throw f&&(zn(f,500),f.end()),h}).then(...r))}}),Gr(e.prototype.then))}function Zg(e){for(const t of Ru)Vr(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(n,r,s){const o=Reflect.apply(n,r,s),i=o.constructor;return T&&g.log(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),Jg(i),o}}),Gr(e.prototype[t]))}const Mu=e=>{if(!e){T&&g.warn("Supabase integration was not installed because no Supabase client was provided.");return}const t=e.constructor===Function?e:e.constructor;Kg(t),Xg(e)},Qg="Supabase",e_=e=>({setupOnce(){Mu(e)},name:Qg}),t_=e=>e_(e.supabaseClient),n_=10,r_="ZodErrors";function s_(e){return yt(e)&&e.name==="ZodError"&&Array.isArray(e.issues)}function o_(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function i_(e){return e.map(t=>typeof t=="number"?"<array>":t).join(".")}function a_(e){const t=new Set;for(const r of e.issues){const s=i_(r.path);s.length>0&&t.add(s)}const n=Array.from(t);if(n.length===0){let r="variable";if(e.issues.length>0){const s=e.issues[0];s!==void 0&&"expected"in s&&typeof s.expected=="string"&&(r=s.expected)}return`Failed to validate ${r}`}return`Failed to validate keys: ${en(n.join(", "),100)}`}function c_(e,t=!1,n,r){if(!n.exception?.values||!r.originalException||!s_(r.originalException)||r.originalException.issues.length===0)return n;try{const o=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(o_);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:o})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:a_(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":o.slice(0,e)}}}catch(s){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:s instanceof Error?`${s.name}: ${s.message}
${s.stack}`:"unknown"}}}}}const u_=(e={})=>{const t=e.limit??n_;return{name:r_,processEvent(n,r){return c_(t,e.saveZodIssuesAsAttachment,n,r)}}},l_=e=>({name:"ThirdPartyErrorsFilter",setup(t){t.on("beforeEnvelope",n=>{Ut(n,(r,s)=>{if(s==="event"){const o=Array.isArray(r)?r[1]:void 0;o&&(Eu(o),r[1]=o)}})}),t.on("applyFrameMetadata",n=>{if(n.type)return;const r=t.getOptions().stackParser;bu(r,n)})},processEvent(t){const n=d_(t);if(n){const r=e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(n[r](o=>!o.some(i=>e.filterKeys.includes(i)))){if(e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;t.tags={...t.tags,third_party_code:!0}}}return t}});function d_(e){const t=Qs(e);if(t)return t.filter(n=>!!n.filename).map(n=>n.module_metadata?Object.keys(n.module_metadata).filter(r=>r.startsWith(Au)).map(r=>r.slice(Au.length)):[])}const Au="_sentryBundlerPluginAppKey:",f_=100,p_=10,Yr="flag.evaluation.";function Yn(e){const n=G().getScopeData().contexts.flags,r=n?n.values:[];return r.length&&(e.contexts===void 0&&(e.contexts={}),e.contexts.flags={values:[...r]}),e}function sn(e,t,n=f_){const r=G().getScopeData().contexts;r.flags||(r.flags={values:[]});const s=r.flags.values;h_(s,e,t,n)}function h_(e,t,n,r){if(typeof n!="boolean")return;if(e.length>r){T&&g.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${r}`);return}const s=e.findIndex(o=>o.flag===t);s!==-1&&e.splice(s,1),e.length===r&&e.shift(),e.push({flag:t,result:n})}function on(e,t,n=p_){if(typeof t!="boolean")return;const r=ye();if(!r)return;const s=z(r).data;if(`${Yr}${e}`in s){r.setAttribute(`${Yr}${e}`,t);return}Object.keys(s).filter(i=>i.startsWith(Yr)).length<n&&r.setAttribute(`${Yr}${e}`,t)}const m_=()=>({name:"FeatureFlags",processEvent(e,t,n){return Yn(e)},addFeatureFlag(e,t){sn(e,t),on(e,t)}}),g_="thismessage:/";function Ou(e){return"isRelative"in e}function Nu(e,t){const n=e.indexOf("://")<=0&&e.indexOf("//")!==0,r=n?g_:void 0;try{if("canParse"in URL&&!URL.canParse(e,r))return;const s=new URL(e,r);return n?{isRelative:n,pathname:s.pathname,search:s.search,hash:s.hash}:s}catch{}}function __(e){if(Ou(e))return e.pathname;const t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function zt(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function Lu(e){return e.split(/[?#]/,1)[0]}function y_(e,t,n,r,s="auto.http.browser"){if(!e.fetchData)return;const{method:o,url:i}=e.fetchData,a=Et()&&t(i);if(e.endTimestamp&&a){const l=e.fetchData.__span;if(!l)return;const p=r[l];p&&(b_(p,e),delete r[l]);return}const c=!!ye(),u=a&&c?Ht(v_(i,o,s)):new at;if(e.fetchData.__span=u.spanContext().spanId,r[u.spanContext().spanId]=u,n(e.fetchData.url)){const l=e.args[0],p=e.args[1]||{},f=S_(l,p,Et()&&c?u:void 0);f&&(e.args[1]=p,p.headers=f)}const d=R();if(d){const l={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};d.emit("beforeOutgoingRequestSpan",u,l)}return u}function S_(e,t,n){const r=Po({span:n}),s=r["sentry-trace"],o=r.baggage;if(!s)return;const i=t.headers||(Oa(e)?e.headers:void 0);if(i)if(E_(i)){const a=new Headers(i);if(a.get("sentry-trace")||a.set("sentry-trace",s),o){const c=a.get("baggage");c?Xr(c)||a.set("baggage",`${c},${o}`):a.set("baggage",o)}return a}else if(Array.isArray(i)){const a=[...i];i.find(u=>u[0]==="sentry-trace")||a.push(["sentry-trace",s]);const c=i.find(u=>u[0]==="baggage"&&Xr(u[1]));return o&&!c&&a.push(["baggage",o]),a}else{const a="sentry-trace"in i?i["sentry-trace"]:void 0,c="baggage"in i?i.baggage:void 0,u=c?Array.isArray(c)?[...c]:[c]:[],d=c&&(Array.isArray(c)?c.find(l=>Xr(l)):Xr(c));return o&&!d&&u.push(o),{...i,"sentry-trace":a??s,baggage:u.length>0?u.join(","):void 0}}else return{...r}}function b_(e,t){if(t.response){zn(e,t.response.status);const n=t.response?.headers?.get("content-length");if(n){const r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus({code:le,message:"internal_error"});e.end()}function Xr(e){return e.split(",").some(t=>t.trim().startsWith(fo))}function E_(e){return typeof Headers<"u"&&ot(e,Headers)}function v_(e,t,n){const r=Nu(e);return{name:r?`${t} ${__(r)}`:t,attributes:w_(e,r,t,n)}}function w_(e,t,n,r){const s={url:e,type:"fetch","http.method":n,[ce]:r,[Oe]:"http.client"};return t&&(Ou(t)||(s["http.url"]=t.href,s["server.address"]=t.host),t.search&&(s["http.query"]=t.search),t.hash&&(s["http.fragment"]=t.hash)),s}function Du(e,t={},n=G()){const{message:r,name:s,email:o,url:i,source:a,associatedEventId:c,tags:u}=e,d={contexts:{feedback:{contact_email:o,name:s,message:r,url:i,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},l=n?.getClient()||R();return l&&l.emit("beforeSendFeedback",d,t),n.captureEvent(d,t)}const T_="ConsoleLogs",Pu={[ce]:"auto.console.logging"},I_=(e={})=>{const t=e.levels||Xs;return{name:T_,setup(n){const{enableLogs:r,normalizeDepth:s=3,normalizeMaxBreadth:o=1e3}=n.getOptions();if(!r){T&&g.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}$o(({args:i,level:a})=>{if(R()!==n||!t.includes(a))return;if(a==="assert"){if(!i[0]){const u=i.slice(1),d=u.length>0?`Assertion failed: ${Fu(u,s,o)}`:"Assertion failed";Oo({level:"error",message:d,attributes:Pu})}return}const c=a==="log";Oo({level:c?"info":a,message:Fu(i,s,o),severityNumber:c?10:void 0,attributes:Pu})})}}};function Fu(e,t,n){return"util"in B&&typeof B.util.format=="function"?B.util.format(...e):k_(e,t,n)}function k_(e,t,n){return e.map(r=>Qt(r)?String(r):JSON.stringify(Ne(r,t,n))).join(" ")}function $u(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const an=B;function C_(){return"history"in an&&!!an.history}function R_(){if(!("fetch"in an))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function Uo(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Bu(){if(typeof EdgeRuntime=="string")return!0;if(!R_())return!1;if(Uo(an.fetch))return!0;let e=!1;const t=an.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=Uo(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){T&&g.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function x_(){return"ReportingObserver"in an}function Ho(e,t){const n="fetch";gt(n,e),_t(n,()=>Uu(void 0,t))}function M_(e){const t="fetch-body-resolved";gt(t,e),_t(t,()=>Uu(O_))}function Uu(e,t=!1){t&&!Bu()||we(B,"fetch",function(n){return function(...r){const s=new Error,{method:o,url:i}=N_(r),a={args:r,fetchData:{method:o,url:i},startTimestamp:pe()*1e3,virtualError:s,headers:L_(r)};return e||Fe("fetch",{...a}),n.apply(B,r).then(async c=>(e?e(c):Fe("fetch",{...a,endTimestamp:pe()*1e3,response:c}),c),c=>{if(Fe("fetch",{...a,endTimestamp:pe()*1e3,error:c}),yt(c)&&c.stack===void 0&&(c.stack=s.stack,xe(c,"framesToPop",1)),c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{const u=new URL(a.fetchData.url);c.message=`${c.message} (${u.host})`}catch{}throw c})}})}async function A_(e,t){if(e?.body){const n=e.body,r=n.getReader(),s=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3);let o=!0;for(;o;){let i;try{i=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:a}=await r.read();clearTimeout(i),a&&(t(),o=!1)}catch{o=!1}finally{clearTimeout(i)}}clearTimeout(s),r.releaseLock(),n.cancel().then(null,()=>{})}}function O_(e){let t;try{t=e.clone()}catch{return}A_(t,()=>{Fe("fetch-body-resolved",{endTimestamp:pe()*1e3,response:e})})}function Wo(e,t){return!!e&&typeof e=="object"&&!!e[t]}function Hu(e){return typeof e=="string"?e:e?Wo(e,"url")?e.url:e.toString?e.toString():"":""}function N_(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:Hu(n),method:Wo(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:Hu(t),method:Wo(t,"method")?String(t.method).toUpperCase():"GET"}}function L_(e){const[t,n]=e;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(Oa(t))return new Headers(t.headers)}catch{}}function D_(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function P_(){return"npm"}function F_(){return!D_()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function zo(){return typeof window<"u"&&(!F_()||$_())}function $_(){return B.process?.type==="renderer"}const qe=B,te=qe.document,Xn=qe.navigator,Wu="Report a Bug",B_="Cancel",U_="Send Bug Report",H_="Confirm",W_="Report a Bug",z_="your.email@example.org",j_="Email",q_="What's the bug? What did you expect?",G_="Description",V_="Your Name",Y_="Name",X_="Thank you for your report!",K_="(required)",J_="Add a screenshot",Z_="Remove screenshot",Q_="widget",ey="api",ty=5e3,zu=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");const n=R();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&G().setTags(e.tags);const r=Du({source:ey,url:At(),...e},t);return new Promise((s,o)=>{const i=setTimeout(()=>o("Unable to determine if Feedback was correctly sent."),3e4),a=n.on("afterSendEvent",(c,u)=>{if(c.event_id===r)return clearTimeout(i),a(),u?.statusCode&&u.statusCode>=200&&u.statusCode<300?s(r):u?.statusCode===403?o("Unable to send feedback. This could be because this domain is not in your list of allowed domains."):o("Unable to send feedback. This could be because of network issues, or because you are using an ad-blocker.")})})},Kr=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function ny(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Xn.userAgent)||/Macintosh/i.test(Xn.userAgent)&&Xn.maxTouchPoints&&Xn.maxTouchPoints>1||!isSecureContext)}function Jr(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{t.onFormOpen?.(),e.onFormOpen?.()},onFormClose:()=>{t.onFormClose?.(),e.onFormClose?.()},onSubmitSuccess:(n,r)=>{t.onSubmitSuccess?.(n,r),e.onSubmitSuccess?.(n,r)},onSubmitError:n=>{t.onSubmitError?.(n),e.onSubmitError?.(n)},onFormSubmitted:()=>{t.onFormSubmitted?.(),e.onFormSubmitted?.()},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function ry(e){const t=te.createElement("style");return t.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,e&&t.setAttribute("nonce",e),t}function Le(e,t){return Object.entries(t).forEach(([n,r])=>{e.setAttributeNS(null,n,r)}),e}const cn=20,sy="http://www.w3.org/2000/svg";function oy(){const e=a=>qe.document.createElementNS(sy,a),t=Le(e("svg"),{width:`${cn}`,height:`${cn}`,viewBox:`0 0 ${cn} ${cn}`,fill:"var(--actor-color, var(--foreground))"}),n=Le(e("g"),{clipPath:"url(#clip0_57_80)"}),r=Le(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const s=e("defs"),o=Le(e("clipPath"),{id:"clip0_57_80"}),i=Le(e("rect"),{width:`${cn}`,height:`${cn}`,fill:"white"});return o.appendChild(i),s.appendChild(o),t.appendChild(s).appendChild(o).appendChild(i),t}function iy({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){const s=te.createElement("button");if(s.type="button",s.className="widget__actor",s.ariaHidden="false",s.ariaLabel=t||e||Wu,s.appendChild(oy()),e){const i=te.createElement("span");i.appendChild(te.createTextNode(e)),s.appendChild(i)}const o=ry(r);return{el:s,appendToDom(){n.appendChild(o),n.appendChild(s)},removeFromDom(){s.remove(),o.remove()},show(){s.ariaHidden="false"},hide(){s.ariaHidden="true"}}}const ju="rgba(88, 74, 192, 1)",ay={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:ju,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},qu={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:ju,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function Gu(e){return`
  --foreground: ${e.foreground};
  --background: ${e.background};
  --accent-foreground: ${e.accentForeground};
  --accent-background: ${e.accentBackground};
  --success-color: ${e.successColor};
  --error-color: ${e.errorColor};
  --border: ${e.border};
  --box-shadow: ${e.boxShadow};
  --outline: ${e.outline};
  --interactive-filter: ${e.interactiveFilter};
  `}function cy({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){const s=te.createElement("style");return s.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${e!=="system"?"color-scheme: only light;":""}

  ${Gu(e==="dark"?{...qu,...t}:{...ay,...n})}
}

${e==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${Gu({...qu,...t})}
  }
}`:""}
}
`,r&&s.setAttribute("nonce",r),s}const Vu=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>({id:s="sentry-feedback",autoInject:o=!0,showBranding:i=!0,isEmailRequired:a=!1,isNameRequired:c=!1,showEmail:u=!0,showName:d=!0,enableScreenshot:l=!0,useSentryUser:p={email:"email",name:"username"},tags:f,styleNonce:h,scriptNonce:m,colorScheme:_="system",themeLight:y={},themeDark:b={},addScreenshotButtonLabel:L=J_,cancelButtonLabel:k=B_,confirmButtonLabel:x=H_,emailLabel:S=j_,emailPlaceholder:w=z_,formTitle:C=W_,isRequiredLabel:E=K_,messageLabel:I=G_,messagePlaceholder:U=q_,nameLabel:v=Y_,namePlaceholder:A=V_,removeScreenshotButtonLabel:W=Z_,submitButtonLabel:N=U_,successMessageText:M=X_,triggerLabel:$=Wu,triggerAriaLabel:O="",onFormOpen:q,onFormClose:K,onSubmitSuccess:ie,onSubmitError:Ue,onFormSubmitted:Se}={})=>{const me={id:s,autoInject:o,showBranding:i,isEmailRequired:a,isNameRequired:c,showEmail:u,showName:d,enableScreenshot:l,useSentryUser:p,tags:f,styleNonce:h,scriptNonce:m,colorScheme:_,themeDark:b,themeLight:y,triggerLabel:$,triggerAriaLabel:O,cancelButtonLabel:k,submitButtonLabel:N,confirmButtonLabel:x,formTitle:C,emailLabel:S,emailPlaceholder:w,messageLabel:I,messagePlaceholder:U,nameLabel:v,namePlaceholder:A,successMessageText:M,isRequiredLabel:E,addScreenshotButtonLabel:L,removeScreenshotButtonLabel:W,onFormClose:K,onFormOpen:q,onSubmitError:Ue,onSubmitSuccess:ie,onFormSubmitted:Se};let Pe=null,ht=[];const On=ae=>{if(!Pe){const ve=te.createElement("div");ve.id=String(ae.id),te.body.appendChild(ve),Pe=ve.attachShadow({mode:"open"}),Pe.appendChild(cy(ae))}return Pe},Nn=async ae=>{const ve=ae.enableScreenshot&&ny();let Qe,he;try{Qe=(t?t():await e("feedbackModalIntegration",m))(),xo(Qe)}catch{throw Kr&&g.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{const et=ve?n?n():await e("feedbackScreenshotIntegration",m):void 0;et&&(he=et(),xo(he))}catch{Kr&&g.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}const be=Qe.createDialog({options:{...ae,onFormClose:()=>{be?.close(),ae.onFormClose?.()},onFormSubmitted:()=>{be?.close(),ae.onFormSubmitted?.()}},screenshotIntegration:he,sendFeedback:zu,shadow:On(ae)});return be},_r=(ae,ve={})=>{const Qe=Jr(me,ve),he=typeof ae=="string"?te.querySelector(ae):typeof ae.addEventListener=="function"?ae:null;if(!he)throw Kr&&g.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let be=null;const et=async()=>{be||(be=await Nn({...Qe,onFormSubmitted:()=>{be?.removeFromDom(),Qe.onFormSubmitted?.()}})),be.appendToDom(),be.open()};he.addEventListener("click",et);const Jt=()=>{ht=ht.filter(Ln=>Ln!==Jt),be?.removeFromDom(),be=null,he.removeEventListener("click",et)};return ht.push(Jt),Jt},Mt=(ae={})=>{const ve=Jr(me,ae),Qe=On(ve),he=iy({triggerLabel:ve.triggerLabel,triggerAriaLabel:ve.triggerAriaLabel,shadow:Qe,styleNonce:h});return _r(he.el,{...ve,onFormOpen(){he.hide()},onFormClose(){he.show()},onFormSubmitted(){he.show()}}),he};return{name:"Feedback",setupOnce(){!zo()||!me.autoInject||(te.readyState==="loading"?te.addEventListener("DOMContentLoaded",()=>Mt().appendToDom()):Mt().appendToDom())},attachTo:_r,createWidget(ae={}){const ve=Mt(Jr(me,ae));return ve.appendToDom(),ve},async createForm(ae={}){return Nn(Jr(me,ae))},remove(){Pe&&(Pe.parentElement?.remove(),Pe=null),ht.forEach(ae=>ae()),ht=[]}}};function uy(){return R()?.getIntegrationByName("Feedback")}var Zr,ne,Yu,jt,Xu,Ku,jo,Kn={},qo=[],ly=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Go=Array.isArray;function Tt(e,t){for(var n in t)e[n]=t[n];return e}function Ju(e){var t=e.parentNode;t&&t.removeChild(e)}function V(e,t,n){var r,s,o,i={};for(o in t)o=="key"?r=t[o]:o=="ref"?s=t[o]:i[o]=t[o];if(arguments.length>2&&(i.children=arguments.length>3?Zr.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)i[o]===void 0&&(i[o]=e.defaultProps[o]);return Qr(e,i,r,s,null)}function Qr(e,t,n,r,s){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:s??++Yu,__i:-1,__u:0};return s==null&&ne.vnode!=null&&ne.vnode(o),o}function Jn(e){return e.children}function es(e,t){this.props=e,this.context=t}function un(e,t){if(t==null)return e.__?un(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?un(e):null}function dy(e,t,n){var r,s=e.__v,o=s.__e,i=e.__P;if(i)return(r=Tt({},s)).__v=s.__v+1,ne.vnode&&ne.vnode(r),Vo(i,r,s,e.__n,i.ownerSVGElement!==void 0,32&s.__u?[o]:null,t,o??un(s),!!(32&s.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=o&&Zu(r),r}function Zu(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Zu(e)}}function Qu(e){(!e.__d&&(e.__d=!0)&&jt.push(e)&&!ts.__r++||Xu!==ne.debounceRendering)&&((Xu=ne.debounceRendering)||Ku)(ts)}function ts(){var e,t,n,r=[],s=[];for(jt.sort(jo);e=jt.shift();)e.__d&&(n=jt.length,t=dy(e,r,s)||t,n===0||jt.length>n?(Yo(r,t,s),s.length=r.length=0,t=void 0,jt.sort(jo)):t&&ne.__c&&ne.__c(t,qo));t&&Yo(r,t,s),ts.__r=0}function el(e,t,n,r,s,o,i,a,c,u,d){var l,p,f,h,m,_=r&&r.__k||qo,y=t.length;for(n.__d=c,fy(n,t,_),c=n.__d,l=0;l<y;l++)(f=n.__k[l])!=null&&typeof f!="boolean"&&typeof f!="function"&&(p=f.__i===-1?Kn:_[f.__i]||Kn,f.__i=l,Vo(e,f,p,s,o,i,a,c,u,d),h=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&Xo(p.ref,null,f),d.push(f.ref,f.__c||h,f)),m==null&&h!=null&&(m=h),65536&f.__u||p.__k===f.__k?c=tl(f,c,e):typeof f.type=="function"&&f.__d!==void 0?c=f.__d:h&&(c=h.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=c,n.__e=m}function fy(e,t,n){var r,s,o,i,a,c=t.length,u=n.length,d=u,l=0;for(e.__k=[],r=0;r<c;r++)(s=e.__k[r]=(s=t[r])==null||typeof s=="boolean"||typeof s=="function"?null:typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?Qr(null,s,null,null,s):Go(s)?Qr(Jn,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?Qr(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s)!=null?(s.__=e,s.__b=e.__b+1,a=py(s,n,i=r+l,d),s.__i=a,o=null,a!==-1&&(d--,(o=n[a])&&(o.__u|=131072)),o==null||o.__v===null?(a==-1&&l--,typeof s.type!="function"&&(s.__u|=65536)):a!==i&&(a===i+1?l++:a>i?d>c-i?l+=a-i:l--:l=a<i&&a==i-1?a-i:0,a!==r+l&&(s.__u|=65536))):(o=n[r])&&o.key==null&&o.__e&&(o.__e==e.__d&&(e.__d=un(o)),Ko(o,o,!1),n[r]=null,d--);if(d)for(r=0;r<u;r++)(o=n[r])!=null&&(131072&o.__u)==0&&(o.__e==e.__d&&(e.__d=un(o)),Ko(o,o))}function tl(e,t,n){var r,s;if(typeof e.type=="function"){for(r=e.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=e,t=tl(r[s],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function py(e,t,n,r){var s=e.key,o=e.type,i=n-1,a=n+1,c=t[n];if(c===null||c&&s==c.key&&o===c.type)return n;if(r>(c!=null&&(131072&c.__u)==0?1:0))for(;i>=0||a<t.length;){if(i>=0){if((c=t[i])&&(131072&c.__u)==0&&s==c.key&&o===c.type)return i;i--}if(a<t.length){if((c=t[a])&&(131072&c.__u)==0&&s==c.key&&o===c.type)return a;a++}}return-1}function nl(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||ly.test(t)?n:n+"px"}function ns(e,t,n,r,s){var o;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||nl(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||nl(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")o=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,o?sl:rl,o)):e.removeEventListener(t,o?sl:rl,o);else{if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function rl(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(ne.event?ne.event(e):e)}}function sl(e){if(this.l)return this.l[e.type+!0](ne.event?ne.event(e):e)}function Vo(e,t,n,r,s,o,i,a,c,u){var d,l,p,f,h,m,_,y,b,L,k,x,S,w,C,E=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),o=[a=t.__e=n.__e]),(d=ne.__b)&&d(t);e:if(typeof E=="function")try{if(y=t.props,b=(d=E.contextType)&&r[d.__c],L=d?b?b.props.value:d.__:r,n.__c?_=(l=t.__c=n.__c).__=l.__E:("prototype"in E&&E.prototype.render?t.__c=l=new E(y,L):(t.__c=l=new es(y,L),l.constructor=E,l.render=my),b&&b.sub(l),l.props=y,l.state||(l.state={}),l.context=L,l.__n=r,p=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),E.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=Tt({},l.__s)),Tt(l.__s,E.getDerivedStateFromProps(y,l.__s))),f=l.props,h=l.state,l.__v=t,p)E.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(E.getDerivedStateFromProps==null&&y!==f&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(y,L),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(y,l.__s,L)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(l.props=y,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(I){I&&(I.__=t)}),k=0;k<l._sb.length;k++)l.__h.push(l._sb[k]);l._sb=[],l.__h.length&&i.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(y,l.__s,L),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(f,h,m)})}if(l.context=L,l.props=y,l.__P=e,l.__e=!1,x=ne.__r,S=0,"prototype"in E&&E.prototype.render){for(l.state=l.__s,l.__d=!1,x&&x(t),d=l.render(l.props,l.state,l.context),w=0;w<l._sb.length;w++)l.__h.push(l._sb[w]);l._sb=[]}else do l.__d=!1,x&&x(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++S<25);l.state=l.__s,l.getChildContext!=null&&(r=Tt(Tt({},r),l.getChildContext())),p||l.getSnapshotBeforeUpdate==null||(m=l.getSnapshotBeforeUpdate(f,h)),el(e,Go(C=d!=null&&d.type===Jn&&d.key==null?d.props.children:d)?C:[C],t,n,r,s,o,i,a,c,u),l.base=t.__e,t.__u&=-161,l.__h.length&&i.push(l),_&&(l.__E=l.__=null)}catch(I){t.__v=null,c||o!=null?(t.__e=a,t.__u|=c?160:32,o[o.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),ne.__e(I,t,n)}else o==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=hy(n.__e,t,n,r,s,o,i,c,u);(d=ne.diffed)&&d(t)}function Yo(e,t,n){for(var r=0;r<n.length;r++)Xo(n[r],n[++r],n[++r]);ne.__c&&ne.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(o){o.call(s)})}catch(o){ne.__e(o,s.__v)}})}function hy(e,t,n,r,s,o,i,a,c){var u,d,l,p,f,h,m,_=n.props,y=t.props,b=t.type;if(b==="svg"&&(s=!0),o!=null){for(u=0;u<o.length;u++)if((f=o[u])&&"setAttribute"in f==!!b&&(b?f.localName===b:f.nodeType===3)){e=f,o[u]=null;break}}if(e==null){if(b===null)return document.createTextNode(y);e=s?document.createElementNS("http://www.w3.org/2000/svg",b):document.createElement(b,y.is&&y),o=null,a=!1}if(b===null)_===y||a&&e.data===y||(e.data=y);else{if(o=o&&Zr.call(e.childNodes),_=n.props||Kn,!a&&o!=null)for(_={},u=0;u<e.attributes.length;u++)_[(f=e.attributes[u]).name]=f.value;for(u in _)f=_[u],u=="children"||(u=="dangerouslySetInnerHTML"?l=f:u==="key"||u in y||ns(e,u,null,f,s));for(u in y)f=y[u],u=="children"?p=f:u=="dangerouslySetInnerHTML"?d=f:u=="value"?h=f:u=="checked"?m=f:u==="key"||a&&typeof f!="function"||_[u]===f||ns(e,u,f,_[u],s);if(d)a||l&&(d.__html===l.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),el(e,Go(p)?p:[p],t,n,r,s&&b!=="foreignObject",o,i,o?o[0]:n.__k&&un(n,0),a,c),o!=null)for(u=o.length;u--;)o[u]!=null&&Ju(o[u]);a||(u="value",h!==void 0&&(h!==e[u]||b==="progress"&&!h||b==="option"&&h!==_[u])&&ns(e,u,h,_[u],!1),u="checked",m!==void 0&&m!==e[u]&&ns(e,u,m,_[u],!1))}return e}function Xo(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){ne.__e(r,n)}}function Ko(e,t,n){var r,s;if(ne.unmount&&ne.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Xo(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){ne.__e(o,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&Ko(r[s],t,n||typeof e.type!="function");n||e.__e==null||Ju(e.__e),e.__=e.__e=e.__d=void 0}function my(e,t,n){return this.constructor(e,n)}function gy(e,t,n){var r,s,o,i;ne.__&&ne.__(e,t),s=(r=!1)?null:t.__k,o=[],i=[],Vo(t,e=t.__k=V(Jn,null,[e]),s||Kn,Kn,t.ownerSVGElement!==void 0,s?null:t.firstChild?Zr.call(t.childNodes):null,o,s?s.__e:t.firstChild,r,i),e.__d=void 0,Yo(o,e,i)}Zr=qo.slice,ne={__e:function(e,t,n,r){for(var s,o,i;t=t.__;)if((s=t.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(e)),i=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,r||{}),i=s.__d),i)return s.__E=s}catch(a){e=a}throw e}},Yu=0,es.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Tt({},this.state),typeof e=="function"&&(e=e(Tt({},n),this.props)),e&&Tt(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Qu(this))},es.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Qu(this))},es.prototype.render=Jn,jt=[],Ku=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,jo=function(e,t){return e.__v.__b-t.__v.__b},ts.__r=0;var lt,re,Jo,ol,ln=0,il=[],rs=[],ue=ne,al=ue.__b,cl=ue.__r,ul=ue.diffed,ll=ue.__c,dl=ue.unmount,fl=ue.__;function qt(e,t){ue.__h&&ue.__h(re,e,ln||t),ln=0;var n=re.__H||(re.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:rs}),n.__[e]}function Gt(e){return ln=1,pl(gl,e)}function pl(e,t,n){var r=qt(lt++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):gl(void 0,t),function(a){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,a);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=re,!re.u)){var s=function(a,c,u){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(p){return!!p.__c});if(d.every(function(p){return!p.__N}))return!o||o.call(this,a,c,u);var l=!1;return d.forEach(function(p){if(p.__N){var f=p.__[0];p.__=p.__N,p.__N=void 0,f!==p.__[0]&&(l=!0)}}),!(!l&&r.__c.props===a)&&(!o||o.call(this,a,c,u))};re.u=!0;var o=re.shouldComponentUpdate,i=re.componentWillUpdate;re.componentWillUpdate=function(a,c,u){if(this.__e){var d=o;o=void 0,s(a,c,u),o=d}i&&i.call(this,a,c,u)},re.shouldComponentUpdate=s}return r.__N||r.__}function _y(e,t){var n=qt(lt++,3);!ue.__s&&Qo(n.__H,t)&&(n.__=e,n.i=t,re.__H.__h.push(n))}function hl(e,t){var n=qt(lt++,4);!ue.__s&&Qo(n.__H,t)&&(n.__=e,n.i=t,re.__h.push(n))}function yy(e){return ln=5,Zn(function(){return{current:e}},[])}function Sy(e,t,n){ln=6,hl(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function Zn(e,t){var n=qt(lt++,7);return Qo(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function dn(e,t){return ln=8,Zn(function(){return e},t)}function by(e){var t=re.context[e.__c],n=qt(lt++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(re)),t.props.value):e.__}function Ey(e,t){ue.useDebugValue&&ue.useDebugValue(t?t(e):e)}function vy(e){var t=qt(lt++,10),n=Gt();return t.__=e,re.componentDidCatch||(re.componentDidCatch=function(r,s){t.__&&t.__(r,s),n[1](r)}),[n[0],function(){n[1](void 0)}]}function wy(){var e=qt(lt++,11);if(!e.__){for(var t=re.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function Ty(){for(var e;e=il.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ss),e.__H.__h.forEach(Zo),e.__H.__h=[]}catch(t){e.__H.__h=[],ue.__e(t,e.__v)}}ue.__b=function(e){re=null,al&&al(e)},ue.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),fl&&fl(e,t)},ue.__r=function(e){cl&&cl(e),lt=0;var t=(re=e.__c).__H;t&&(Jo===re?(t.__h=[],re.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=rs,n.__N=n.i=void 0})):(t.__h.forEach(ss),t.__h.forEach(Zo),t.__h=[],lt=0)),Jo=re},ue.diffed=function(e){ul&&ul(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(il.push(t)!==1&&ol===ue.requestAnimationFrame||((ol=ue.requestAnimationFrame)||Iy)(Ty)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==rs&&(n.__=n.__V),n.i=void 0,n.__V=rs})),Jo=re=null},ue.__c=function(e,t){t.some(function(n){try{n.__h.forEach(ss),n.__h=n.__h.filter(function(r){return!r.__||Zo(r)})}catch(r){t.some(function(s){s.__h&&(s.__h=[])}),t=[],ue.__e(r,n.__v)}}),ll&&ll(e,t)},ue.unmount=function(e){dl&&dl(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{ss(r)}catch(s){t=s}}),n.__H=void 0,t&&ue.__e(t,n.__v))};var ml=typeof requestAnimationFrame=="function";function Iy(e){var t,n=function(){clearTimeout(r),ml&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);ml&&(t=requestAnimationFrame(n))}function ss(e){var t=re,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),re=t}function Zo(e){var t=re;e.__c=e.__(),re=t}function Qo(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function gl(e,t){return typeof t=="function"?t(e):t}const ky=Object.defineProperty({__proto__:null,useCallback:dn,useContext:by,useDebugValue:Ey,useEffect:_y,useErrorBoundary:vy,useId:wy,useImperativeHandle:Sy,useLayoutEffect:hl,useMemo:Zn,useReducer:pl,useRef:yy,useState:Gt},Symbol.toStringTag,{value:"Module"}),Cy="http://www.w3.org/2000/svg";function Ry(){const e=r=>te.createElementNS(Cy,r),t=Le(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=Le(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function xy({options:e}){const t=Zn(()=>({__html:Ry().outerHTML}),[]);return V("h2",{class:"dialog__header"},V("span",{class:"dialog__title"},e.formTitle),e.showBranding?V("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function My(e,t){const n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}function ei(e,t){const n=e.get(t);return typeof n=="string"?n.trim():""}function Ay({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:s,onSubmitSuccess:o,onSubmitError:i,showEmail:a,showName:c,screenshotInput:u}){const{tags:d,addScreenshotButtonLabel:l,removeScreenshotButtonLabel:p,cancelButtonLabel:f,emailLabel:h,emailPlaceholder:m,isEmailRequired:_,isNameRequired:y,messageLabel:b,messagePlaceholder:L,nameLabel:k,namePlaceholder:x,submitButtonLabel:S,isRequiredLabel:w}=e,[C,E]=Gt(!1),[I,U]=Gt(null),[v,A]=Gt(!1),W=u?.input,[N,M]=Gt(null),$=dn(K=>{M(K),A(!1)},[]),O=dn(K=>{const ie=My(K,{emailLabel:h,isEmailRequired:_,isNameRequired:y,messageLabel:b,nameLabel:k});return ie.length>0?U(`Please enter in the following required fields: ${ie.join(", ")}`):U(null),ie.length===0},[h,_,y,b,k]),q=dn(async K=>{E(!0);try{if(K.preventDefault(),!(K.target instanceof HTMLFormElement))return;const ie=new FormData(K.target),Ue=await(u&&v?u.value():void 0),Se={name:ei(ie,"name"),email:ei(ie,"email"),message:ei(ie,"message"),attachments:Ue?[Ue]:void 0};if(!O(Se))return;try{const me=await s({name:Se.name,email:Se.email,message:Se.message,source:Q_,tags:d},{attachments:Se.attachments});o(Se,me)}catch(me){Kr&&g.error(me),U(me),i(me)}}finally{E(!1)}},[u&&v,o,i]);return V("form",{class:"form",onSubmit:q},W&&v?V(W,{onError:$}):null,V("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:C},V("div",{class:"form__top"},I?V("div",{class:"form__error-container"},I):null,c?V("label",{for:"name",class:"form__label"},V(ti,{label:k,isRequiredLabel:w,isRequired:y}),V("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:x,required:y,type:"text"})):V("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?V("label",{for:"email",class:"form__label"},V(ti,{label:h,isRequiredLabel:w,isRequired:_}),V("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:m,required:_,type:"email"})):V("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),V("label",{for:"message",class:"form__label"},V(ti,{label:b,isRequiredLabel:w,isRequired:!0}),V("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:L,required:!0,rows:5})),W?V("label",{for:"screenshot",class:"form__label"},V("button",{class:"btn btn--default",disabled:C,type:"button",onClick:()=>{M(null),A(K=>!K)}},v?p:l),N?V("div",{class:"form__error-container"},N.message):null):null),V("div",{class:"btn-group"},V("button",{class:"btn btn--primary",disabled:C,type:"submit"},S),V("button",{class:"btn btn--default",disabled:C,type:"button",onClick:r},f))))}function ti({label:e,isRequired:t,isRequiredLabel:n}){return V("span",{class:"form__label__text"},e,t&&V("span",{class:"form__label__text--required"},n))}const os=16,_l=17,Oy="http://www.w3.org/2000/svg";function Ny(){const e=c=>qe.document.createElementNS(Oy,c),t=Le(e("svg"),{width:`${os}`,height:`${_l}`,viewBox:`0 0 ${os} ${_l}`,fill:"inherit"}),n=Le(e("g"),{clipPath:"url(#clip0_57_156)"}),r=Le(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),s=Le(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(s,r);const o=e("defs"),i=Le(e("clipPath"),{id:"clip0_57_156"}),a=Le(e("rect"),{width:`${os}`,height:`${os}`,fill:"white",transform:"translate(0 0.5)"});return i.appendChild(a),o.appendChild(i),t.appendChild(o).appendChild(i).appendChild(a),t}function Ly({open:e,onFormSubmitted:t,...n}){const r=n.options,s=Zn(()=>({__html:Ny().outerHTML}),[]),[o,i]=Gt(null),a=dn(()=>{o&&(clearTimeout(o),i(null)),t()},[o]),c=dn((u,d)=>{n.onSubmitSuccess(u,d),i(setTimeout(()=>{t(),i(null)},ty))},[t]);return V(Jn,null,o?V("div",{class:"success__position",onClick:a},V("div",{class:"success__content"},r.successMessageText,V("span",{class:"success__icon",dangerouslySetInnerHTML:s}))):V("dialog",{class:"dialog",onClick:r.onFormClose,open:e},V("div",{class:"dialog__position"},V("div",{class:"dialog__content",onClick:u=>{u.stopPropagation()}},V(xy,{options:r}),V(Ay,{...n,onSubmitSuccess:c})))))}const Dy=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`,Py=`
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,Fy=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form fieldset {
  border: none;
  margin: 0;
  padding: 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,$y=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,By=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function Uy(e){const t=te.createElement("style");return t.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${Dy}
${Py}
${Fy}
${$y}
${By}
`,e&&t.setAttribute("nonce",e),t}function Hy(){const e=G().getUser(),t=ge().getUser(),n=Ir().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}const Wy=()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{const s=r,o=e.useSentryUser,i=Hy(),a=te.createElement("div"),c=Uy(e.styleNonce);let u="";const d={get el(){return a},appendToDom(){!s.contains(c)&&!s.contains(a)&&(s.appendChild(c),s.appendChild(a))},removeFromDom(){a.remove(),c.remove(),te.body.style.overflow=u},open(){p(!0),e.onFormOpen?.(),R()?.emit("openFeedbackWidget"),u=te.body.style.overflow,te.body.style.overflow="hidden"},close(){p(!1),te.body.style.overflow=u}},l=t?.createInput({h:V,hooks:ky,dialog:d,options:e}),p=f=>{gy(V(Ly,{options:e,screenshotInput:l,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:o&&i?.[o.name]||"",defaultEmail:o&&i?.[o.email]||"",onFormClose:()=>{p(!1),e.onFormClose?.()},onSubmit:n,onSubmitSuccess:(h,m)=>{p(!1),e.onSubmitSuccess?.(h,m)},onSubmitError:h=>{e.onSubmitError?.(h)},onFormSubmitted:()=>{e.onFormSubmitted?.()},open:f}),a)};return d}});function zy({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}function jy(e){const t=te.createElement("style"),n="#1A141F",r="#302735";return t.textContent=`
.editor {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.editor__image-container {
  justify-items: center;
  padding: 15px;
  position: relative;
  height: 100%;
  border-radius: var(--menu-border-radius, 6px);

  background-color: ${n};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${n} 8px,
      ${n} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${r} 15px,
      ${r} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container > * {
  object-fit: contain;
  position: absolute;
}

.editor__tool-container {
  padding-top: 8px;
  display: flex;
  justify-content: center;
}

.editor__tool-bar {
  display: flex;
  gap: 8px;
}

.editor__tool {
  display: flex;
  padding: 8px 12px;
  justify-content: center;
  align-items: center;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  background: var(--button-background, var(--background));
  color: var(--button-color, var(--foreground));
}

.editor__tool--active {
  background: var(--button-primary-background, var(--accent-background));
  color: var(--button-primary-color, var(--accent-foreground));
}

.editor__rect {
  position: absolute;
  z-index: 2;
}

.editor__rect button {
  opacity: 0;
  position: absolute;
  top: -12px;
  right: -12px;
  cursor: pointer;
  padding: 0;
  z-index: 3;
  border: none;
  background: none;
}

.editor__rect:hover button {
  opacity: 1;
}
`,e&&t.setAttribute("nonce",e),t}function qy({h:e}){return function({action:n,setAction:r}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:`editor__tool ${n==="highlight"?"editor__tool--active":""}`,onClick:()=>{r(n==="highlight"?"":"highlight")}},"Highlight"),e("button",{type:"button",class:`editor__tool ${n==="hide"?"editor__tool--active":""}`,onClick:()=>{r(n==="hide"?"":"hide")}},"Hide")))}}function Gy({hooks:e}){function t(){const[n,r]=e.useState(qe.devicePixelRatio??1);return e.useEffect(()=>{const s=()=>{r(qe.devicePixelRatio)},o=matchMedia(`(resolution: ${qe.devicePixelRatio}dppx)`);return o.addEventListener("change",s),()=>{o.removeEventListener("change",s)}},[]),n}return function({onBeforeScreenshot:r,onScreenshot:s,onAfterScreenshot:o,onError:i}){const a=t();e.useEffect(()=>{(async()=>{r();const u=await Xn.mediaDevices.getDisplayMedia({video:{width:qe.innerWidth*a,height:qe.innerHeight*a},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),d=te.createElement("video");await new Promise((l,p)=>{d.srcObject=u,d.onloadedmetadata=()=>{s(d,a),u.getTracks().forEach(f=>f.stop()),l()},d.play().catch(p)}),o()})().catch(i)},[])}}function Vy(e,t,n){switch(e.type){case"highlight":{t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=50,t.fillStyle=n,t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2),t.clearRect(e.x,e.y,e.w,e.h);break}case"hide":t.fillStyle="rgb(0, 0, 0)",t.fillRect(e.x,e.y,e.w,e.h);break}}function It(e,t,n){if(!e)return;const r=e.getContext("2d",t);r&&n(e,r)}function ni(e,t){It(e,{alpha:!0},(n,r)=>{r.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height)})}function ri(e,t,n){It(e,{alpha:!0},(r,s)=>{n.length&&(s.fillStyle="rgba(0, 0, 0, 0.25)",s.fillRect(0,0,r.width,r.height)),n.forEach(o=>{Vy(o,s,t)})})}function Yy({h:e,hooks:t,outputBuffer:n,dialog:r,options:s}){const o=Gy({hooks:t}),i=qy({h:e}),a=zy({h:e}),c={__html:jy(s.styleNonce).innerText},u=r.el.style,d=({screenshot:l})=>{const[p,f]=t.useState("highlight"),[h,m]=t.useState([]),_=t.useRef(null),y=t.useRef(null),b=t.useRef(null),L=t.useRef(null),[k,x]=t.useState(1),S=t.useMemo(()=>{const v=te.getElementById(s.id);if(!v)return"white";const A=getComputedStyle(v);return A.getPropertyValue("--button-primary-background")||A.getPropertyValue("--accent-background")},[s.id]);t.useLayoutEffect(()=>{const v=()=>{const A=_.current;A&&(It(l.canvas,{alpha:!1},W=>{const N=Math.min(A.clientWidth/W.width,A.clientHeight/W.height);x(N)}),(A.clientHeight===0||A.clientWidth===0)&&setTimeout(v,0))};return v(),qe.addEventListener("resize",v),()=>{qe.removeEventListener("resize",v)}},[l]);const w=t.useCallback((v,A)=>{It(v,{alpha:!0},(W,N)=>{N.scale(A,A),W.width=l.canvas.width,W.height=l.canvas.height})},[l]);t.useEffect(()=>{w(y.current,l.dpi),ni(y.current,l.canvas)},[l]),t.useEffect(()=>{w(b.current,l.dpi),It(b.current,{alpha:!0},(v,A)=>{A.clearRect(0,0,v.width,v.height)}),ri(b.current,S,h)},[h,S]),t.useEffect(()=>{w(n,l.dpi),ni(n,l.canvas),It(te.createElement("canvas"),{alpha:!0},(v,A)=>{A.scale(l.dpi,l.dpi),v.width=l.canvas.width,v.height=l.canvas.height,ri(v,S,h),ni(n,v)})},[h,l,S]);const C=v=>{if(!p||!L.current)return;const A=L.current.getBoundingClientRect(),W={type:p,x:v.offsetX/k,y:v.offsetY/k},N=(O,q)=>{const K=(q.clientX-A.x)/k,ie=(q.clientY-A.y)/k;return{type:O.type,x:Math.min(O.x,K),y:Math.min(O.y,ie),w:Math.abs(K-O.x),h:Math.abs(ie-O.y)}},M=O=>{It(b.current,{alpha:!0},(q,K)=>{K.clearRect(0,0,q.width,q.height)}),ri(b.current,S,[...h,N(W,O)])},$=O=>{const q=N(W,O);q.w*k>=1&&q.h*k>=1&&m(K=>[...K,q]),te.removeEventListener("mousemove",M),te.removeEventListener("mouseup",$)};te.addEventListener("mousemove",M),te.addEventListener("mouseup",$)},E=t.useCallback(v=>A=>{A.preventDefault(),A.stopPropagation(),m(W=>{const N=[...W];return N.splice(v,1),N})},[]),I={width:`${l.canvas.width*k}px`,height:`${l.canvas.height*k}px`},U=v=>{v.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:s.styleNonce,dangerouslySetInnerHTML:c}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:_},e("canvas",{ref:y,id:"background",style:I}),e("canvas",{ref:b,id:"foreground",style:I}),e("div",{ref:L,onMouseDown:C,style:I},h.map((v,A)=>e("div",{key:A,class:"editor__rect",style:{top:`${v.y*k}px`,left:`${v.x*k}px`,width:`${v.w*k}px`,height:`${v.h*k}px`}},e("button",{"aria-label":"Remove",onClick:E(A),onMouseDown:U,onMouseUp:U,type:"button"},e(a,null))))))),e(i,{action:p,setAction:f}))};return function({onError:p}){const[f,h]=t.useState();return o({onBeforeScreenshot:t.useCallback(()=>{u.display="none"},[]),onScreenshot:t.useCallback((m,_)=>{It(te.createElement("canvas"),{alpha:!1},(y,b)=>{b.scale(_,_),y.width=m.videoWidth,y.height=m.videoHeight,b.drawImage(m,0,0,y.width,y.height),h({canvas:y,dpi:_})}),n.width=m.videoWidth,n.height=m.videoHeight},[]),onAfterScreenshot:t.useCallback(()=>{u.display="block"},[]),onError:t.useCallback(m=>{u.display="block",p(m)},[])}),f?e(d,{screenshot:f}):e("div",null)}}const Xy=()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{const s=te.createElement("canvas");return{input:Yy({h:e,hooks:t,outputBuffer:s,dialog:n,options:r}),value:async()=>{const o=await new Promise(i=>{s.toBlob(i,"image/png")});if(o)return{data:new Uint8Array(await o.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}),D=B;let si=0;function yl(){return si>0}function Ky(){si++,setTimeout(()=>{si--})}function fn(e,t={}){function n(s){return typeof s=="function"}if(!n(e))return e;try{const s=e.__sentry_wrapped__;if(s)return typeof s=="function"?s:e;if(so(e))return e}catch{return e}const r=function(...s){try{const o=s.map(i=>fn(i,t));return e.apply(this,o)}catch(o){throw Ky(),Be(i=>{i.addEventProcessor(a=>(t.mechanism&&(oo(a,void 0),St(a,t.mechanism)),a.extra={...a.extra,arguments:s},a)),Wt(o)}),o}};try{for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}catch{}La(r,e),xe(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function oi(){const e=At(),{referrer:t}=D.document||{},{userAgent:n}=D.navigator||{},r={...t&&{Referer:t},...n&&{"User-Agent":n}};return{url:e,headers:r}}const Jy={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata"},Sl=D;async function bl(e,t){const n=Jy[e],r=Sl.Sentry=Sl.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);const s=r[e];if(typeof s=="function"&&!("_isShim"in s))return s;const o=Zy(n),i=D.document.createElement("script");i.src=o,i.crossOrigin="anonymous",i.referrerPolicy="strict-origin",t&&i.setAttribute("nonce",t);const a=new Promise((l,p)=>{i.addEventListener("load",()=>l()),i.addEventListener("error",p)}),c=D.document.currentScript,u=D.document.body||D.document.head||c?.parentElement;if(u)u.appendChild(i);else throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);try{await a}catch{throw new Error(`Error when loading integration: ${e}`)}const d=r[e];if(typeof d!="function")throw new Error(`Could not load integration: ${e}`);return d}function Zy(e){const n=R()?.getOptions()?.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${tt}/${e}.min.js`,n).toString()}const Qy=Vu({lazyLoadIntegration:bl}),El=Vu({getModalIntegration:()=>Wy,getScreenshotIntegration:()=>Xy});function pn(e,t,n,r){Oo({level:e,message:t,attributes:n,severityNumber:r})}function eS(e,t){pn("trace",e,t)}function tS(e,t){pn("debug",e,t)}function nS(e,t){pn("info",e,t)}function rS(e,t){pn("warn",e,t)}function sS(e,t){pn("error",e,t)}function oS(e,t){pn("fatal",e,t)}const iS=Object.freeze(Object.defineProperty({__proto__:null,debug:tS,error:sS,fatal:oS,fmt:rg,info:nS,trace:eS,warn:rS},Symbol.toStringTag,{value:"Module"}));function is(e,t){const n=ai(e,t),r={type:dS(t),value:fS(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function aS(e,t,n,r){const o=R()?.getOptions().normalizeDepth,i=mS(t),a={__serialized__:mc(t,o)};if(i)return{exception:{values:[is(e,i)]},extra:a};const c={exception:{values:[{type:vr(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:pS(t,{isUnhandledRejection:r})}]},extra:a};if(n){const u=ai(e,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function ii(e,t){return{exception:{values:[is(e,t)]}}}function ai(e,t){const n=t.stacktrace||t.stack||"",r=uS(t),s=lS(t);try{return e(n,r,s)}catch{}return[]}const cS=/Minified React error #\d+;/i;function uS(e){return e&&cS.test(e.message)?1:0}function lS(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function vl(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function dS(e){const t=e?.name;return!t&&vl(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function fS(e){const t=e?.message;return vl(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function wl(e,t,n,r){const s=n?.syntheticException||void 0,o=ci(e,t,s,r);return St(o),o.level="error",n?.event_id&&(o.event_id=n.event_id),ut(o)}function Tl(e,t,n="info",r,s){const o=r?.syntheticException||void 0,i=ui(e,t,o,s);return i.level=n,r?.event_id&&(i.event_id=r.event_id),ut(i)}function ci(e,t,n,r,s){let o;if(xa(t)&&t.error)return ii(e,t.error);if(Ma(t)||xp(t)){const i=t;if("stack"in t)o=ii(e,t);else{const a=i.name||(Ma(i)?"DOMError":"DOMException"),c=i.message?`${a}: ${i.message}`:a;o=ui(e,c,n,r),oo(o,c)}return"code"in i&&(o.tags={...o.tags,"DOMException.code":`${i.code}`}),o}return yt(t)?ii(e,t):st(t)||vr(t)?(o=aS(e,t,n,s),St(o,{synthetic:!0}),o):(o=ui(e,t,n,r),oo(o,`${t}`),St(o,{synthetic:!0}),o)}function ui(e,t,n,r){const s={};if(r&&n){const o=ai(e,n);o.length&&(s.exception={values:[{value:t,stacktrace:{frames:o}}]}),St(s,{synthetic:!0})}if(Er(t)){const{__sentry_template_string__:o,__sentry_template_values__:i}=t;return s.logentry={message:o,params:i},s}return s.message=t,s}function pS(e,{isUnhandledRejection:t}){const n=Dp(e),r=t?"promise rejection":"exception";return xa(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:vr(e)?`Event \`${hS(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function hS(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function mS(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}const gS=5e3;class Il extends Lm{constructor(t){const n=_S(t),r=D.SENTRY_SDK_SOURCE||P_();ig(n,"browser",["browser"],r),super(n);const{sendDefaultPii:s,sendClientReports:o,enableLogs:i}=this._options;D.document&&(o||i)&&D.document.addEventListener("visibilitychange",()=>{D.document.visibilityState==="hidden"&&(o&&this._flushOutcomes(),i&&jr(this))}),i&&(this.on("flush",()=>{jr(this)}),this.on("afterCaptureLog",()=>{this._logFlushIdleTimeout&&clearTimeout(this._logFlushIdleTimeout),this._logFlushIdleTimeout=setTimeout(()=>{jr(this)},gS)})),s&&(this.on("postprocessEvent",sg),this.on("beforeSendSession",og))}eventFromException(t,n){return wl(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return Tl(this._options.stackParser,t,n,r,this._options.attachStacktrace)}_prepareEvent(t,n,r,s){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r,s)}}function _S(e){return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:D.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}const hn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,j=B,yS=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",Qn=(e,t,n,r)=>{let s,o;return i=>{t.value>=0&&(i||r)&&(o=t.value-(s??0),(o||s===void 0)&&(s=t.value,t.delta=o,t.rating=yS(t.value,n),e(t)))}},SS=()=>`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,er=(e=!0)=>{const t=j.performance?.getEntriesByType?.("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},mn=()=>er()?.activationStart??0,tr=(e,t=-1)=>{const n=er();let r="navigate";return n&&(j.document?.prerendering||mn()>0?r="prerender":j.document?.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:SS(),navigationType:r}},li=new WeakMap;function di(e,t){return li.get(e)||li.set(e,new t),li.get(e)}class as{constructor(){as.prototype.__init.call(this),as.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(t){if(t.hadRecentInput)return;const n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(this._sessionValue+=t.value,this._sessionEntries.push(t)):(this._sessionValue=t.value,this._sessionEntries=[t]),this._onAfterProcessingUnexpectedShift?.(t)}}const gn=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(s=>{Promise.resolve().then(()=>{t(s.getEntries())})});return r.observe({type:e,buffered:!0,...n}),r}}catch{}},fi=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let nr=-1;const bS=()=>j.document?.visibilityState==="hidden"&&!j.document?.prerendering?0:1/0,cs=e=>{j.document.visibilityState==="hidden"&&nr>-1&&(nr=e.type==="visibilitychange"?e.timeStamp:0,vS())},ES=()=>{addEventListener("visibilitychange",cs,!0),addEventListener("prerenderingchange",cs,!0)},vS=()=>{removeEventListener("visibilitychange",cs,!0),removeEventListener("prerenderingchange",cs,!0)},pi=()=>{if(j.document&&nr<0){const e=mn();nr=(j.document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden"&&n.startTime>e)[0]?.startTime)??bS(),ES()}return{get firstHiddenTime(){return nr}}},us=e=>{j.document?.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},wS=[1800,3e3],TS=(e,t={})=>{us(()=>{const n=pi(),r=tr("FCP");let s;const i=gn("paint",a=>{for(const c of a)c.name==="first-contentful-paint"&&(i.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-mn(),0),r.entries.push(c),s(!0)))});i&&(s=Qn(e,r,wS,t.reportAllChanges))})},IS=[.1,.25],kS=(e,t={})=>{TS(fi(()=>{const n=tr("CLS",0);let r;const s=di(t,as),o=a=>{for(const c of a)s._processEntry(c);s._sessionValue>n.value&&(n.value=s._sessionValue,n.entries=s._sessionEntries,r())},i=gn("layout-shift",o);i&&(r=Qn(e,n,IS,t.reportAllChanges),j.document?.addEventListener("visibilitychange",()=>{j.document?.visibilityState==="hidden"&&(o(i.takeRecords()),r(!0))}),j?.setTimeout?.(r))}))};let kl=0,hi=1/0,ls=0;const CS=e=>{e.forEach(t=>{t.interactionId&&(hi=Math.min(hi,t.interactionId),ls=Math.max(ls,t.interactionId),kl=ls?(ls-hi)/7+1:0)})};let mi;const Cl=()=>mi?kl:performance.interactionCount||0,RS=()=>{"interactionCount"in performance||mi||(mi=gn("event",CS,{type:"event",buffered:!0,durationThreshold:0}))},gi=10;let Rl=0;const xS=()=>Cl()-Rl;class ds{constructor(){ds.prototype.__init.call(this),ds.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){Rl=Cl(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const t=Math.min(this._longestInteractionList.length-1,Math.floor(xS()/50));return this._longestInteractionList[t]}_processEntry(t){if(this._onBeforeProcessingEntry?.(t),!(t.interactionId||t.entryType==="first-input"))return;const n=this._longestInteractionList.at(-1);let r=this._longestInteractionMap.get(t.interactionId);if(r||this._longestInteractionList.length<gi||t.duration>n._latency){if(r?t.duration>r._latency?(r.entries=[t],r._latency=t.duration):t.duration===r._latency&&t.startTime===r.entries[0].startTime&&r.entries.push(t):(r={id:t.interactionId,entries:[t],_latency:t.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort((s,o)=>o._latency-s._latency),this._longestInteractionList.length>gi){const s=this._longestInteractionList.splice(gi);for(const o of s)this._longestInteractionMap.delete(o.id)}this._onAfterProcessingINPCandidate?.(r)}}}const _i=e=>{const t=n=>{(n.type==="pagehide"||j.document?.visibilityState==="hidden")&&e(n)};j.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))},xl=e=>{const t=j.requestIdleCallback||j.setTimeout;j.document?.visibilityState==="hidden"?e():(e=fi(e),t(e),_i(e))},MS=[200,500],AS=40,OS=(e,t={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&us(()=>{RS();const n=tr("INP");let r;const s=di(t,ds),o=a=>{xl(()=>{for(const u of a)s._processEntry(u);const c=s._estimateP98LongestInteraction();c&&c._latency!==n.value&&(n.value=c._latency,n.entries=c.entries,r())})},i=gn("event",o,{durationThreshold:t.durationThreshold??AS});r=Qn(e,n,MS,t.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),_i(()=>{o(i.takeRecords()),r(!0)}))})};class NS{_processEntry(t){this._onBeforeProcessingEntry?.(t)}}const LS=[2500,4e3],DS=(e,t={})=>{us(()=>{const n=pi(),r=tr("LCP");let s;const o=di(t,NS),i=c=>{t.reportAllChanges||(c=c.slice(-1));for(const u of c)o._processEntry(u),u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-mn(),0),r.entries=[u],s())},a=gn("largest-contentful-paint",i);if(a){s=Qn(e,r,LS,t.reportAllChanges);const c=fi(()=>{i(a.takeRecords()),a.disconnect(),s(!0)});for(const u of["keydown","click","visibilitychange"])j.document&&addEventListener(u,()=>xl(c),{capture:!0,once:!0})}})},PS=[800,1800],yi=e=>{j.document?.prerendering?us(()=>yi(e)):j.document?.readyState!=="complete"?addEventListener("load",()=>yi(e),!0):setTimeout(e)},FS=(e,t={})=>{const n=tr("TTFB"),r=Qn(e,n,PS,t.reportAllChanges);yi(()=>{const s=er();s&&(n.value=Math.max(s.responseStart-mn(),0),n.entries=[s],r(!0))})},rr={},fs={};let Ml,Al,Ol,Nl;function Si(e,t=!1){return ps("cls",e,BS,Ml,t)}function bi(e,t=!1){return ps("lcp",e,US,Al,t)}function $S(e){return ps("ttfb",e,HS,Ol)}function Ll(e){return ps("inp",e,WS,Nl)}function Vt(e,t){return Dl(e,t),fs[e]||(zS(e),fs[e]=!0),Pl(e,t)}function sr(e,t){const n=rr[e];if(n?.length)for(const r of n)try{r(t)}catch(s){hn&&g.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${rt(r)}
Error:`,s)}}function BS(){return kS(e=>{sr("cls",{metric:e}),Ml=e},{reportAllChanges:!0})}function US(){return DS(e=>{sr("lcp",{metric:e}),Al=e},{reportAllChanges:!0})}function HS(){return FS(e=>{sr("ttfb",{metric:e}),Ol=e})}function WS(){return OS(e=>{sr("inp",{metric:e}),Nl=e})}function ps(e,t,n,r,s=!1){Dl(e,t);let o;return fs[e]||(o=n(),fs[e]=!0),r&&t({metric:r}),Pl(e,t,s?o:void 0)}function zS(e){const t={};e==="event"&&(t.durationThreshold=0),gn(e,n=>{sr(e,{entries:n})},t)}function Dl(e,t){rr[e]=rr[e]||[],rr[e].push(t)}function Pl(e,t,n){return()=>{n&&n();const r=rr[e];if(!r)return;const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}function jS(e){return"duration"in e}function Ei(e){return typeof e=="number"&&isFinite(e)}function kt(e,t,n,{...r}){const s=z(e).start_timestamp;return s&&s>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),qn(e,()=>{const o=Ht({startTime:t,...r});return o&&o.end(n),o})}function vi(e){const t=R();if(!t)return;const{name:n,transaction:r,attributes:s,startTime:o}=e,{release:i,environment:a,sendDefaultPii:c}=t.getOptions(),d=t.getIntegrationByName("Replay")?.getReplayId(),l=G(),p=l.getUser(),f=p!==void 0?p.email||p.id||p.ip_address:void 0;let h;try{h=l.getScopeData().contexts.profile.profile_id}catch{}const m={release:i,environment:a,user:f||void 0,profile_id:h||void 0,replay_id:d||void 0,transaction:r,"user_agent.original":j.navigator?.userAgent,"client.address":c?"{{auto}}":void 0,...s};return Ht({name:n,attributes:m,startTime:o,experimental:{standalone:!0}})}function hs(){return j.addEventListener&&j.performance}function de(e){return e/1e3}function Fl(e){let t="unknown",n="unknown",r="";for(const s of e){if(s==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(s))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=s}return r===e&&(t=r),{name:t,version:n}}function $l(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function Bl(e,t){let n,r=!1;function s(a){!r&&n&&t(a,n),r=!0}_i(()=>{s("pagehide")});const o=e.on("beforeStartNavigationSpan",(a,c)=>{c?.isRedirect||(s("navigation"),Ul(o,i))}),i=e.on("afterStartPageLoadSpan",a=>{n=a.spanContext().spanId,Ul(i)})}function Ul(...e){e.forEach(t=>t&&setTimeout(t,0))}function qS(e){let t=0,n;if(!$l("layout-shift"))return;const r=Si(({metric:s})=>{const o=s.entries[s.entries.length-1];o&&(t=s.value,n=o)},!0);Bl(e,(s,o)=>{GS(t,n,o,s),r()})}function GS(e,t,n,r){hn&&g.log(`Sending CLS span (${e})`);const s=de((Ie()||0)+(t?.startTime||0)),o=G().getScopeData().transactionName,i=t?$e(t.sources[0]?.node):"Layout shift",a={[ce]:"auto.http.browser.cls",[Oe]:"ui.webvital.cls",[rn]:t?.duration||0,"sentry.pageload.span_id":n,"sentry.report_event":r};t?.sources&&t.sources.forEach((u,d)=>{a[`cls.source.${d+1}`]=$e(u.node)});const c=vi({name:i,transaction:o,attributes:a,startTime:s});c&&(c.addEvent("cls",{[Hn]:"",[Wn]:e}),c.end(s))}function VS(e){let t=0,n;if(!$l("largest-contentful-paint"))return;const r=bi(({metric:s})=>{const o=s.entries[s.entries.length-1];o&&(t=s.value,n=o)},!0);Bl(e,(s,o)=>{YS(t,n,o,s),r()})}function YS(e,t,n,r){hn&&g.log(`Sending LCP span (${e})`);const s=de((Ie()||0)+(t?.startTime||0)),o=G().getScopeData().transactionName,i=t?$e(t.element):"Largest contentful paint",a={[ce]:"auto.http.browser.lcp",[Oe]:"ui.webvital.lcp",[rn]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t&&(t.element&&(a["lcp.element"]=$e(t.element)),t.id&&(a["lcp.id"]=t.id),t.url&&(a["lcp.url"]=t.url.trim().slice(0,200)),t.loadTime!=null&&(a["lcp.loadTime"]=t.loadTime),t.renderTime!=null&&(a["lcp.renderTime"]=t.renderTime),t.size!=null&&(a["lcp.size"]=t.size));const c=vi({name:i,transaction:o,attributes:a,startTime:s});c&&(c.addEvent("lcp",{[Hn]:"millisecond",[Wn]:e}),c.end(s))}const XS=2147483647;let Hl=0,Ge={},Me,ms;function KS({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:n}){const r=hs();if(r&&Ie()){r.mark&&j.performance.mark("sentry-tracing-init");const s=t?VS(n):tb(),o=nb(),i=e?qS(n):eb();return()=>{s?.(),o(),i?.()}}return()=>{}}function JS(){Vt("longtask",({entries:e})=>{const t=ye();if(!t)return;const{op:n,start_timestamp:r}=z(t);for(const s of e){const o=de(Ie()+s.startTime),i=de(s.duration);n==="navigation"&&r&&o<r||kt(t,o,o+i,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[ce]:"auto.ui.browser.metrics"}})}})}function ZS(){new PerformanceObserver(t=>{const n=ye();if(n)for(const r of t.getEntries()){if(!r.scripts[0])continue;const s=de(Ie()+r.startTime),{start_timestamp:o,op:i}=z(n);if(i==="navigation"&&o&&s<o)continue;const a=de(r.duration),c={[ce]:"auto.ui.browser.metrics"},u=r.scripts[0],{invoker:d,invokerType:l,sourceURL:p,sourceFunctionName:f,sourceCharPosition:h}=u;c["browser.script.invoker"]=d,c["browser.script.invoker_type"]=l,p&&(c["code.filepath"]=p),f&&(c["code.function"]=f),h!==-1&&(c["browser.script.source_char_position"]=h),kt(n,s,s+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function QS(){Vt("event",({entries:e})=>{const t=ye();if(t){for(const n of e)if(n.name==="click"){const r=de(Ie()+n.startTime),s=de(n.duration),o={name:$e(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[ce]:"auto.ui.browser.metrics"}},i=Na(n.target);i&&(o.attributes["ui.component_name"]=i),kt(t,r,r+s,o)}}})}function eb(){return Si(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Ge.cls={value:e.value,unit:""},ms=t)},!0)}function tb(){return bi(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Ge.lcp={value:e.value,unit:"millisecond"},Me=t)},!0)}function nb(){return $S(({metric:e})=>{e.entries[e.entries.length-1]&&(Ge.ttfb={value:e.value,unit:"millisecond"})})}function rb(e,t){const n=hs(),r=Ie();if(!n?.getEntries||!r)return;const s=de(r),o=n.getEntries(),{op:i,start_timestamp:a}=z(e);o.slice(Hl).forEach(c=>{const u=de(c.startTime),d=de(Math.max(0,c.duration));if(!(i==="navigation"&&a&&s+u<a))switch(c.entryType){case"navigation":{ib(e,c,s);break}case"mark":case"paint":case"measure":{sb(e,c,u,d,s,t.ignorePerformanceApiSpans);const l=pi(),p=c.startTime<l.firstHiddenTime;c.name==="first-paint"&&p&&(Ge.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&p&&(Ge.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{ub(e,c,c.name,u,d,s,t.ignoreResourceSpans);break}}}),Hl=Math.max(o.length-1,0),lb(e),i==="pageload"&&(fb(Ge),t.recordClsOnPageloadSpan||delete Ge.cls,t.recordLcpOnPageloadSpan||delete Ge.lcp,Object.entries(Ge).forEach(([c,u])=>{Sc(c,u.value,u.unit)}),e.setAttribute("performance.timeOrigin",s),e.setAttribute("performance.activationStart",mn()),db(e,t)),Me=void 0,ms=void 0,Ge={}}function sb(e,t,n,r,s,o){if(["mark","measure"].includes(t.entryType)&&We(t.name,o))return;const i=er(!1),a=de(i?i.requestStart:0),c=s+Math.max(n,a),u=s+n,d=u+r,l={[ce]:"auto.resource.browser.metrics"};c!==u&&(l["sentry.browser.measure_happened_before_request"]=!0,l["sentry.browser.measure_start_time"]=c),ob(l,t),c<=d&&kt(e,c,d,{name:t.name,op:t.entryType,attributes:l})}function ob(e,t){try{const n=t.detail;if(!n)return;if(typeof n=="object"){for(const[r,s]of Object.entries(n))if(s&&Qt(s))e[`sentry.browser.measure.detail.${r}`]=s;else if(s!==void 0)try{e[`sentry.browser.measure.detail.${r}`]=JSON.stringify(s)}catch{}return}if(Qt(n)){e["sentry.browser.measure.detail"]=n;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}function ib(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{gs(e,t,r,n)}),gs(e,t,"secureConnection",n,"TLS/SSL"),gs(e,t,"fetch",n,"cache"),gs(e,t,"domainLookup",n,"DNS"),cb(e,t,n)}function gs(e,t,n,r,s=n){const o=ab(n),i=t[o],a=t[`${n}Start`];!a||!i||kt(e,r+de(a),r+de(i),{op:`browser.${s}`,name:t.name,attributes:{[ce]:"auto.ui.browser.metrics",...n==="redirect"&&t.redirectCount!=null?{"http.redirect_count":t.redirectCount}:{}}})}function ab(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function cb(e,t,n){const r=n+de(t.requestStart),s=n+de(t.responseEnd),o=n+de(t.responseStart);t.responseEnd&&(kt(e,r,s,{op:"browser.request",name:t.name,attributes:{[ce]:"auto.ui.browser.metrics"}}),kt(e,o,s,{op:"browser.response",name:t.name,attributes:{[ce]:"auto.ui.browser.metrics"}}))}function ub(e,t,n,r,s,o,i){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const a=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(i?.includes(a))return;const c=zt(n),u={[ce]:"auto.resource.browser.metrics"};wi(u,t,"transferSize","http.response_transfer_size"),wi(u,t,"encodedBodySize","http.response_content_length"),wi(u,t,"decodedBodySize","http.decoded_response_content_length");const d=t.deliveryType;d!=null&&(u["http.response_delivery_type"]=d);const l=t.renderBlockingStatus;if(l&&(u["resource.render_blocking_status"]=l),c.protocol&&(u["url.scheme"]=c.protocol.split(":").pop()),c.host&&(u["server.address"]=c.host),u["url.same_origin"]=n.includes(j.location.origin),t.nextHopProtocol!=null){const{name:h,version:m}=Fl(t.nextHopProtocol);u["network.protocol.name"]=h,u["network.protocol.version"]=m}const p=o+r,f=p+s;kt(e,p,f,{name:n.replace(j.location.origin,""),op:a,attributes:u})}function lb(e){const t=j.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),Ei(n.rtt)&&(Ge["connection.rtt"]={value:n.rtt,unit:"millisecond"})),Ei(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),Ei(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function db(e,t){Me&&t.recordLcpOnPageloadSpan&&(Me.element&&e.setAttribute("lcp.element",$e(Me.element)),Me.id&&e.setAttribute("lcp.id",Me.id),Me.url&&e.setAttribute("lcp.url",Me.url.trim().slice(0,200)),Me.loadTime!=null&&e.setAttribute("lcp.loadTime",Me.loadTime),Me.renderTime!=null&&e.setAttribute("lcp.renderTime",Me.renderTime),e.setAttribute("lcp.size",Me.size)),ms?.sources&&t.recordClsOnPageloadSpan&&ms.sources.forEach((n,r)=>e.setAttribute(`cls.source.${r+1}`,$e(n.node)))}function wi(e,t,n,r){const s=t[n];s!=null&&s<XS&&(e[r]=s)}function fb(e){const t=er(!1);if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function pb(){return hs()&&Ie()?Vt("element",hb):()=>{}}const hb=({entries:e})=>{const t=ye(),n=t?_e(t):void 0,r=n?z(n).description:G().getScopeData().transactionName;e.forEach(s=>{const o=s;if(!o.identifier)return;const i=o.name,a=o.renderTime,c=o.loadTime,[u,d]=c?[de(c),"load-time"]:a?[de(a),"render-time"]:[pe(),"entry-emission"],l=i==="image-paint"?de(Math.max(0,(a??0)-(c??0))):0,p={[ce]:"auto.ui.browser.elementtiming",[Oe]:"ui.elementtiming",[Ae]:"component","sentry.span_start_time_source":d,"sentry.transaction_name":r,"element.id":o.id,"element.type":o.element?.tagName?.toLowerCase()||"unknown","element.size":o.naturalWidth&&o.naturalHeight?`${o.naturalWidth}x${o.naturalHeight}`:void 0,"element.render_time":a,"element.load_time":c,"element.url":o.url||void 0,"element.identifier":o.identifier,"element.paint_type":i};Dr({name:`element[${o.identifier}]`,attributes:p,startTime:u,onlyIfParent:!0},f=>{f.end(u+l)})})},mb=1e3;let Wl,Ti,Ii;function zl(e){gt("dom",e),_t("dom",gb)}function gb(){if(!j.document)return;const e=Fe.bind(null,"dom"),t=jl(e,!0);j.document.addEventListener("click",t,!1),j.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const s=j[n]?.prototype;s?.hasOwnProperty?.("addEventListener")&&(we(s,"addEventListener",function(o){return function(i,a,c){if(i==="click"||i=="keypress")try{const u=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},d=u[i]=u[i]||{refCount:0};if(!d.handler){const l=jl(e);d.handler=l,o.call(this,i,l,c)}d.refCount++}catch{}return o.call(this,i,a,c)}}),we(s,"removeEventListener",function(o){return function(i,a,c){if(i==="click"||i=="keypress")try{const u=this.__sentry_instrumentation_handlers__||{},d=u[i];d&&(d.refCount--,d.refCount<=0&&(o.call(this,i,d.handler,c),d.handler=void 0,delete u[i]),Object.keys(u).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return o.call(this,i,a,c)}}))})}function _b(e){if(e.type!==Ti)return!1;try{if(!e.target||e.target._sentryId!==Ii)return!1}catch{}return!0}function yb(e,t){return e!=="keypress"?!1:t?.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function jl(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=Sb(n);if(yb(n.type,r))return;xe(n,"_sentryCaptured",!0),r&&!r._sentryId&&xe(r,"_sentryId",Te());const s=n.type==="keypress"?"input":n.type;_b(n)||(e({event:n,name:s,global:t}),Ti=n.type,Ii=r?r._sentryId:void 0),clearTimeout(Wl),Wl=j.setTimeout(()=>{Ii=void 0,Ti=void 0},mb)}}function Sb(e){try{return e.target}catch{return null}}let _s;function ys(e){const t="history";gt(t,e),_t(t,bb)}function bb(){if(j.addEventListener("popstate",()=>{const t=j.location.href,n=_s;if(_s=t,n===t)return;Fe("history",{from:n,to:t})}),!C_())return;function e(t){return function(...n){const r=n.length>2?n[2]:void 0;if(r){const s=_s,o=Eb(String(r));if(_s=o,s===o)return t.apply(this,n);Fe("history",{from:s,to:o})}return t.apply(this,n)}}we(j.history,"pushState",e),we(j.history,"replaceState",e)}function Eb(e){try{return new URL(e,j.location.origin).toString()}catch{return e}}const Ss={};function ki(e){const t=Ss[e];if(t)return t;let n=j[e];if(Uo(n))return Ss[e]=n.bind(j);const r=j.document;if(r&&typeof r.createElement=="function")try{const s=r.createElement("iframe");s.hidden=!0,r.head.appendChild(s);const o=s.contentWindow;o?.[e]&&(n=o[e]),r.head.removeChild(s)}catch(s){hn&&g.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,s)}return n&&(Ss[e]=n.bind(j))}function ql(e){Ss[e]=void 0}function or(...e){return ki("setTimeout")(...e)}const dt="__sentry_xhr_v3__";function Ci(e){gt("xhr",e),_t("xhr",vb)}function vb(){if(!j.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){const s=new Error,o=pe()*1e3,i=He(r[0])?r[0].toUpperCase():void 0,a=wb(r[1]);if(!i||!a)return t.apply(n,r);n[dt]={method:i,url:a,request_headers:{}},i==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const c=()=>{const u=n[dt];if(u&&n.readyState===4){try{u.status_code=n.status}catch{}const d={endTimestamp:pe()*1e3,startTimestamp:o,xhr:n,virtualError:s};Fe("xhr",d)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(u,d,l){return c(),u.apply(d,l)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,d,l){const[p,f]=l,h=d[dt];return h&&He(p)&&He(f)&&(h.request_headers[p.toLowerCase()]=f),u.apply(d,l)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){const s=n[dt];if(!s)return t.apply(n,r);r[0]!==void 0&&(s.body=r[0]);const o={startTimestamp:pe()*1e3,xhr:n};return Fe("xhr",o),t.apply(n,r)}})}function wb(e){if(He(e))return e;try{return e.toString()}catch{}}function Gl(e){return new URLSearchParams(e).toString()}function bs(e,t=g){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[Gl(e)];if(!e)return[void 0]}catch(n){return hn&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return hn&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Ri(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}const xi=[],Es=new Map,Tb=60;function Ib(){if(hs()&&Ie()){const t=kb();return()=>{t()}}return()=>{}}const Vl={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function kb(){return Ll(Cb)}const Cb=({metric:e})=>{if(e.value==null)return;const t=de(e.value);if(t>Tb)return;const n=e.entries.find(h=>h.duration===e.value&&Vl[h.name]);if(!n)return;const{interactionId:r}=n,s=Vl[n.name],o=de(Ie()+n.startTime),i=ye(),a=i?_e(i):void 0,u=(r!=null?Es.get(r):void 0)||a,d=u?z(u).description:G().getScopeData().transactionName,l=$e(n.target),p={[ce]:"auto.http.browser.inp",[Oe]:`ui.interaction.${s}`,[rn]:n.duration},f=vi({name:l,transaction:d,attributes:p,startTime:o});f&&(f.addEvent("inp",{[Hn]:"millisecond",[Wn]:e.value}),f.end(o+t))};function Rb(){const e=({entries:t})=>{const n=ye(),r=n&&_e(n);t.forEach(s=>{if(!jS(s)||!r)return;const o=s.interactionId;if(o!=null&&!Es.has(o)){if(xi.length>10){const i=xi.shift();Es.delete(i)}xi.push(o),Es.set(o,r)}})};Vt("event",e),Vt("first-input",e)}function Mi(e,t=ki("fetch")){let n=0,r=0;function s(o){const i=o.body.length;n+=i,r++;const a={body:o.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return ql("fetch"),Fr("No fetch implementation available");try{return t(e.url,a).then(c=>(n-=i,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return ql("fetch"),n-=i,r--,Fr(c)}}return ou(e,s)}const xb=10,Mb=20,Ab=30,Ob=40,Nb=50;function _n(e,t,n,r){const s={filename:e,function:t==="<anonymous>"?Xe:t,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const Lb=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Db=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Pb=/\((\S*)(?::(\d+))(?::(\d+))\)/,Fb=/at (.+?) ?\(data:(.+?),/,Yl=[Ab,e=>{const t=e.match(Fb);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};const n=Lb.exec(e);if(n){const[,s,o,i]=n;return _n(s,Xe,+o,+i)}const r=Db.exec(e);if(r){if(r[2]&&r[2].indexOf("eval")===0){const a=Pb.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}const[o,i]=Zl(r[1]||Xe,r[2]);return _n(i,o,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}}],$b=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Bb=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Xl=[Nb,e=>{const t=$b.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const o=Bb.exec(t[3]);o&&(t[1]=t[1]||"eval",t[3]=o[1],t[4]=o[2],t[5]="")}let r=t[3],s=t[1]||Xe;return[s,r]=Zl(s,r),_n(r,s,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],Ub=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Hb=[Ob,e=>{const t=Ub.exec(e);return t?_n(t[2],t[1]||Xe,+t[3],t[4]?+t[4]:void 0):void 0}],Wb=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,zb=[xb,e=>{const t=Wb.exec(e);return t?_n(t[2],t[3]||Xe,+t[1]):void 0}],jb=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,qb=[Mb,e=>{const t=jb.exec(e);return t?_n(t[5],t[3]||t[4]||Xe,+t[1],+t[2]):void 0}],Kl=[Yl,Xl],Jl=Ta(...Kl),Zl=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:Xe,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};function Gb(e,{metadata:t,tunnel:n,dsn:r}){const s={event_id:e.event_id,sent_at:new Date().toISOString(),...t?.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Dt(r)}},o=Vb(e);return ct(s,[o])}function Vb(e){return[{type:"user_report"},e]}const Y=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,vs=1024,Yb="Breadcrumbs",Ql=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Yb,setup(n){t.console&&$o(Jb(n)),t.dom&&zl(Kb(n,t.dom)),t.xhr&&Ci(Zb(n)),t.fetch&&Ho(Qb(n)),t.history&&ys(eE(n)),t.sentry&&n.on("beforeSendEvent",Xb(n))}}};function Xb(e){return function(n){R()===e&&Ke({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Ot(n)},{event:n})}}function Kb(e,t){return function(r){if(R()!==e)return;let s,o,i=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>vs&&(Y&&g.warn(`\`dom.maxStringLength\` cannot exceed ${vs}, but a value of ${a} was configured. Sentry will use ${vs} instead.`),a=vs),typeof i=="string"&&(i=[i]);try{const u=r.event,d=tE(u)?u.target:u;s=$e(d,{keyAttrs:i,maxStringLength:a}),o=Na(d)}catch{s="<unknown>"}if(s.length===0)return;const c={category:`ui.${r.name}`,message:s};o&&(c.data={"ui.component_name":o}),Ke(c,{event:r.event,name:r.name,global:r.global})}}function Jb(e){return function(n){if(R()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:Bo(n.level),message:wr(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${wr(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;Ke(r,{input:n.args,level:n.level})}}function Zb(e){return function(n){if(R()!==e)return;const{startTimestamp:r,endTimestamp:s}=n,o=n.xhr[dt];if(!r||!s||!o)return;const{method:i,url:a,status_code:c,body:u}=o,d={method:i,url:a,status_code:c},l={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:s},p={category:"xhr",data:d,type:"http",level:$u(c)};e.emit("beforeOutgoingRequestBreadcrumb",p,l),Ke(p,l)}}function Qb(e){return function(n){if(R()!==e)return;const{startTimestamp:r,endTimestamp:s}=n;if(s&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){const o=n.fetchData,i={data:n.error,input:n.args,startTimestamp:r,endTimestamp:s},a={category:"fetch",data:o,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,i),Ke(a,i)}else{const o=n.response,i={...n.fetchData,status_code:o?.status};n.fetchData.request_body_size,n.fetchData.response_body_size,o?.status;const a={input:n.args,response:o,startTimestamp:r,endTimestamp:s},c={category:"fetch",data:i,type:"http",level:$u(i.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",c,a),Ke(c,a)}}}function eE(e){return function(n){if(R()!==e)return;let r=n.from,s=n.to;const o=zt(D.location.href);let i=r?zt(r):void 0;const a=zt(s);i?.path||(i=o),o.protocol===a.protocol&&o.host===a.host&&(s=a.relative),o.protocol===i.protocol&&o.host===i.host&&(r=i.relative),Ke({category:"navigation",data:{from:r,to:s}})}}function tE(e){return!!e&&!!e.target}const nE=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],rE="BrowserApiErrors",ed=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:rE,setupOnce(){t.setTimeout&&we(D,"setTimeout",td),t.setInterval&&we(D,"setInterval",td),t.requestAnimationFrame&&we(D,"requestAnimationFrame",sE),t.XMLHttpRequest&&"XMLHttpRequest"in D&&we(XMLHttpRequest.prototype,"send",oE);const n=t.eventTarget;n&&(Array.isArray(n)?n:nE).forEach(s=>iE(s,t))}}};function td(e){return function(...t){const n=t[0];return t[0]=fn(n,{mechanism:{data:{function:rt(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function sE(e){return function(t){return e.apply(this,[fn(t,{mechanism:{data:{function:"requestAnimationFrame",handler:rt(e)},handled:!1,type:"instrument"}})])}}function oE(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&we(n,s,function(o){const i={mechanism:{data:{function:s,handler:rt(o)},handled:!1,type:"instrument"}},a=so(o);return a&&(i.mechanism.data.handler=rt(a)),fn(o,i)})}),e.apply(this,t)}}function iE(e,t){const r=D[e]?.prototype;r?.hasOwnProperty?.("addEventListener")&&(we(r,"addEventListener",function(s){return function(o,i,a){try{aE(i)&&(i.handleEvent=fn(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:rt(i),target:e},handled:!1,type:"instrument"}}))}catch{}return t.unregisterOriginalCallbacks&&cE(this,o,i),s.apply(this,[o,fn(i,{mechanism:{data:{function:"addEventListener",handler:rt(i),target:e},handled:!1,type:"instrument"}}),a])}}),we(r,"removeEventListener",function(s){return function(o,i,a){try{const c=i.__sentry_wrapped__;c&&s.call(this,o,c,a)}catch{}return s.call(this,o,i,a)}}))}function aE(e){return typeof e.handleEvent=="function"}function cE(e,t,n){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,n)}const nd=()=>({name:"BrowserSession",setupOnce(){if(typeof D.document>"u"){Y&&g.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}ko({ignoreDuration:!0}),Ro(),ys(({from:e,to:t})=>{e!==void 0&&e!==t&&(ko({ignoreDuration:!0}),Ro())})}}),uE="GlobalHandlers",rd=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:uE,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(lE(n),sd("onerror")),t.onunhandledrejection&&(dE(n),sd("onunhandledrejection"))}}};function lE(e){ka(t=>{const{stackParser:n,attachStacktrace:r}=od();if(R()!==e||yl())return;const{msg:s,url:o,line:i,column:a,error:c}=t,u=hE(ci(n,c||s,void 0,r,!1),o,i,a);u.level="error",Vn(u,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function dE(e){Ca(t=>{const{stackParser:n,attachStacktrace:r}=od();if(R()!==e||yl())return;const s=fE(t),o=Qt(s)?pE(s):ci(n,s,void 0,r,!0);o.level="error",Vn(o,{originalException:s,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function fE(e){if(Qt(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function pE(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function hE(e,t,n,r){const s=e.exception=e.exception||{},o=s.values=s.values||[],i=o[0]=o[0]||{},a=i.stacktrace=i.stacktrace||{},c=a.frames=a.frames||[],u=r,d=n,l=He(t)&&t.length>0?t:At();return c.length===0&&c.push({colno:u,filename:l,function:Xe,in_app:!0,lineno:d}),e}function sd(e){Y&&g.log(`Global Handler attached: ${e}`)}function od(){return R()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const id=()=>({name:"HttpContext",preprocessEvent(e){if(!D.navigator&&!D.location&&!D.document)return;const t=oi(),n={...t.headers,...e.request?.headers};e.request={...t,...e.request,headers:n}}}),mE="cause",gE=5,_E="LinkedErrors",ad=(e={})=>{const t=e.limit||gE,n=e.key||mE;return{name:_E,preprocessEvent(r,s,o){const i=o.getOptions();bg(is,i.stackParser,n,t,r,s)}}};function yE(){return SE()?(Y&&mt(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function SE(){if(typeof D.window>"u")return!1;const e=D;if(e.nw||!(e.chrome||e.browser)?.runtime?.id)return!1;const n=At(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(D===D.top&&r.some(o=>n.startsWith(`${o}://`)))}function cd(e){return[hu(),fu(),ed(),Ql(),rd(),ad(),vu(),id(),nd()]}function ud(e={}){const t=!e.skipBrowserExtensionCheck&&yE(),n={...e,enabled:t?!1:e.enabled,stackParser:Ip(e.stackParser||Jl),integrations:xm({integrations:e.integrations,defaultIntegrations:e.defaultIntegrations==null?cd():e.defaultIntegrations}),transport:e.transport||Mi};return qm(Il,n)}function bE(){}function EE(e){e()}function vE(e={}){const t=D.document,n=t?.head||t?.body;if(!n){Y&&g.error("[showReportDialog] Global document not defined");return}const r=G(),o=R()?.getDsn();if(!o){Y&&g.error("[showReportDialog] DSN not configured");return}const i={...e,user:{...r.getUser(),...e.user},eventId:e.eventId||Pc()},a=D.document.createElement("script");a.async=!0,a.crossOrigin="anonymous",a.src=Cm(o,i);const{onLoad:c,onClose:u}=i;if(c&&(a.onload=c),u){const d=l=>{if(l.data==="__sentry_reportdialog_closed__")try{u()}finally{D.removeEventListener("message",d)}};D.addEventListener("message",d)}n.appendChild(a)}const wE=B,TE="ReportingObserver",ld=new WeakMap,IE=(e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(r){if(ld.has(R()))for(const s of r)Be(o=>{o.setExtra("url",s.url);const i=`ReportingObserver [${s.type}]`;let a="No details available";if(s.body){const c={};for(const u in s.body)c[u]=s.body[u];if(o.setExtra("body",c),s.type==="crash"){const u=s.body;a=[u.crashId||"",u.reason||""].join(" ").trim()||a}else a=s.body.message||a}Wr(`${i}: ${a}`)})}return{name:TE,setupOnce(){if(!x_())return;new wE.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(r){ld.set(r,!0)}}},kE="HttpClient",CE=(e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:kE,setup(n){DE(n,t),PE(n,t)}}};function RE(e,t,n,r,s){if(pd(e,n.status,n.url)){const o=FE(t,r);let i,a,c,u;md()&&([i,c]=dd("Cookie",o),[a,u]=dd("Set-Cookie",n));const d=hd({url:o.url,method:o.method,status:n.status,requestHeaders:i,responseHeaders:a,requestCookies:c,responseCookies:u,error:s});Vn(d)}}function dd(e,t){const n=AE(t.headers);let r;try{const s=n[e]||n[e.toLowerCase()]||void 0;s&&(r=fd(s))}catch{}return[n,r]}function xE(e,t,n,r,s){if(pd(e,t.status,t.responseURL)){let o,i,a;if(md()){try{const u=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;u&&(i=fd(u))}catch{}try{a=OE(t)}catch{}o=r}const c=hd({url:t.responseURL,method:n,status:t.status,requestHeaders:o,responseHeaders:a,responseCookies:i,error:s});Vn(c)}}function ME(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function fd(e){return e.split("; ").reduce((t,n)=>{const[r,s]=n.split("=");return r&&s&&(t[r]=s),t},{})}function AE(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function OE(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[s,o]=r.split(": ");return s&&o&&(n[s]=o),n},{}):{}}function NE(e,t){return e.some(n=>typeof n=="string"?t.includes(n):n.test(t))}function LE(e,t){return e.some(n=>typeof n=="number"?n===t:t>=n[0]&&t<=n[1])}function DE(e,t){Bu()&&Ho(n=>{if(R()!==e)return;const{response:r,args:s,error:o,virtualError:i}=n,[a,c]=s;r&&RE(t,a,r,c,o||i)},!1)}function PE(e,t){"XMLHttpRequest"in B&&Ci(n=>{if(R()!==e)return;const{error:r,virtualError:s}=n,o=n.xhr,i=o[dt];if(!i)return;const{method:a,request_headers:c}=i;try{xE(t,o,a,c,r||s)}catch(u){Y&&g.warn("Error while extracting response event form XHR response",u)}})}function pd(e,t,n){return LE(e.failedRequestStatusCodes,t)&&NE(e.failedRequestTargets,n)&&!au(n,R())}function hd(e){const t=R(),n=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,r=n&&t?t.getOptions().stackParser(n,0,1):void 0,s=`HTTP Client Error with status code: ${e.status}`,o={message:s,exception:{values:[{type:"Error",value:s,stacktrace:r?{frames:r}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:ME(e.responseHeaders)}}};return St(o,{type:"http.client",handled:!1}),o}function FE(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}function md(){const e=R();return e?!!e.getOptions().sendDefaultPii:!1}const Ai=B,$E=7,BE="ContextLines",UE=(e={})=>{const t=e.frameContextLines!=null?e.frameContextLines:$E;return{name:BE,processEvent(n){return HE(n,t)}}};function HE(e,t){const n=Ai.document,r=Ai.location&&Lu(Ai.location.href);if(!n||!r)return e;const s=e.exception?.values;if(!s?.length)return e;const o=n.documentElement.innerHTML;if(!o)return e;const i=["<!DOCTYPE html>","<html>",...o.split(`
`),"</html>"];return s.forEach(a=>{const c=a.stacktrace;c?.frames&&(c.frames=c.frames.map(u=>WE(u,i,r,t)))}),e}function WE(e,t,n,r){return e.filename!==n||!e.lineno||!t.length||Fp(t,e,r),e}const zE="GraphQLClient",jE=e=>({name:zE,setup(t){qE(t,e),GE(t,e)}});function qE(e,t){e.on("beforeOutgoingRequestSpan",(n,r)=>{const o=z(n).data||{};if(!(o[Oe]==="http.client"))return;const c=o[Qp]||o["http.url"],u=o[Zp]||o["http.method"];if(!He(c)||!He(u))return;const{endpoints:d}=t,l=We(c,d),p=_d(r);if(l&&p){const f=yd(p);if(f){const h=gd(f);n.updateName(`${u} ${c} (${h})`),n.setAttribute("graphql.document",p)}}})}function GE(e,t){e.on("beforeOutgoingRequestBreadcrumb",(n,r)=>{const{category:s,type:o,data:i}=n;if(o==="http"&&(s==="fetch"||s==="xhr")){const d=i?.url,{endpoints:l}=t,p=We(d,l),f=_d(r);if(p&&i&&f){const h=yd(f);if(!i.graphql&&h){const m=gd(h);i["graphql.document"]=h.query,i["graphql.operation"]=m}}}})}function gd(e){const{query:t,operationName:n}=e,{operationName:r=n,operationType:s}=VE(t);return r?`${s} ${r}`:`${s}`}function _d(e){const t="xhr"in e;let n;if(t){const r=e.xhr[dt];n=r&&bs(r.body)[0]}else{const r=Ri(e.input);n=bs(r)[0]}return n}function VE(e){const t=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,n=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,r=e.match(t);if(r)return{operationType:r[1],operationName:r[2]};const s=e.match(n);return s?{operationType:s[1],operationName:void 0}:{operationType:void 0,operationName:void 0}}function yd(e){let t;try{const n=JSON.parse(e);!!n.query&&(t=n)}finally{return t}}const YE=jE,se=B,Oi="sentryReplaySession",XE="replay_event",Ni="Unable to send Replay",KE=3e5,JE=9e5,ZE=5e3,QE=5500,ev=6e4,tv=5e3,nv=3,Sd=15e4,ws=5e3,rv=3e3,sv=300,Li=2e7,ov=4999,iv=15e3,bd=36e5;var av=Object.defineProperty,cv=(e,t,n)=>t in e?av(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ed=(e,t,n)=>cv(e,typeof t!="symbol"?t+"":t,n),Ee=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Ee||{});function uv(e){return e.nodeType===e.ELEMENT_NODE}function ir(e){return e?.host?.shadowRoot===e}function ar(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function lv(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function dv(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function Ts(e){try{const t=e.rules||e.cssRules;return t?lv(Array.from(t,vd).join("")):null}catch{return null}}function fv(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style,s=r[n],o=r.getPropertyPriority(s);t+=`${s}:${r.getPropertyValue(s)}${o?" !important":""};`}return`${e.selectorText} { ${t} }`}function vd(e){let t;if(hv(e))try{t=Ts(e.styleSheet)||dv(e)}catch{}else if(mv(e)){let n=e.cssText;const r=e.selectorText.includes(":"),s=typeof e.style.all=="string"&&e.style.all;if(s&&(n=fv(e)),r&&(n=pv(n)),r||s)return n}return t||e.cssText}function pv(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function hv(e){return"styleSheet"in e}function mv(e){return"selectorText"in e}let wd=class{constructor(){Ed(this,"idNodeMap",new Map),Ed(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function gv(){return new wd}function Is({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function cr({isMasked:e,element:t,value:n,maskInputFn:r}){let s=n||"";return e?(r&&(s=r(s,t)),"*".repeat(s.length)):s}function yn(e){return e.toLowerCase()}function Di(e){return e.toUpperCase()}const Td="__rrweb_original__";function _v(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let r=0;r<e.width;r+=n)for(let s=0;s<e.height;s+=n){const o=t.getImageData,i=Td in o?o[Td]:o;if(new Uint32Array(i.call(t,r,s,Math.min(n,e.width-r),Math.min(n,e.height-s)).data.buffer).some(c=>c!==0))return!1}return!0}function Pi(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?yn(t):null}function ks(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function Id(e,t){let n;try{n=new URL(e,t??window.location.href)}catch{return null}const r=/\.([0-9a-z]+)(?:$)/i;return n.pathname.match(r)?.[1]??null}const kd={};function Cd(e){const t=kd[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(s)}catch{}return kd[e]=r.bind(window)}function Fi(...e){return Cd("setTimeout")(...e)}function Rd(...e){return Cd("clearTimeout")(...e)}function xd(e){try{return e.contentDocument}catch{}}let yv=1;const Sv=new RegExp("[^a-z0-9-_:]"),ur=-2;function $i(){return yv++}function bv(e){if(e instanceof HTMLFormElement)return"form";const t=yn(e.tagName);return Sv.test(t)?"div":t}function Ev(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let Sn,Md;const vv=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,wv=/^(?:[a-z+]+:)?\/\//i,Tv=/^www\..*/i,Iv=/^(data:)([^,]*),(.*)/i;function Cs(e,t){return(e||"").replace(vv,(n,r,s,o,i,a)=>{const c=s||i||a,u=r||o||"";if(!c)return n;if(wv.test(c)||Tv.test(c))return`url(${u}${c}${u})`;if(Iv.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${Ev(t)+c}${u})`;const d=t.split("/"),l=c.split("/");d.pop();for(const p of l)p!=="."&&(p===".."?d.pop():d.push(p));return`url(${u}${d.join("/")}${u})`})}const kv=/^[^ \t\n\r\u000c]+/,Cv=/^[, \t\n\r\u000c]+/;function Rv(e,t){if(t.trim()==="")return t;let n=0;function r(o){let i;const a=o.exec(t.substring(n));return a?(i=a[0],n+=i.length,i):""}const s=[];for(;r(Cv),!(n>=t.length);){let o=r(kv);if(o.slice(-1)===",")o=bn(e,o.substring(0,o.length-1)),s.push(o);else{let i="";o=bn(e,o);let a=!1;for(;;){const c=t.charAt(n);if(c===""){s.push((o+i).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,s.push((o+i).trim());break}else c==="("&&(a=!0);i+=c,n+=1}}}return s.join(", ")}const Ad=new WeakMap;function bn(e,t){return!t||t.trim()===""?t:Rs(e,t)}function xv(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function Rs(e,t){let n=Ad.get(e);if(n||(n=e.createElement("a"),Ad.set(e,n)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return n.setAttribute("href",t),n.href}function Od(e,t,n,r,s,o){return r&&(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(t==="table"||t==="td"||t==="th")?bn(e,r):n==="srcset"?Rv(e,r):n==="style"?Cs(r,Rs(e)):t==="object"&&n==="data"?bn(e,r):typeof o=="function"?o(n,r,s):r)}function Nd(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function Ld(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let s=e.classList.length;s--;){const o=e.classList[s];if(t.test(o))return!0}if(n)return e.matches(n)}catch{}return!1}function Mv(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function Yt(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Yt(e.parentNode,t,n,r+1)}function En(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(Mv(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function vn(e,t,n,r,s,o){try{const i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(i===null)return!1;if(i.tagName==="INPUT"){const u=i.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(o){if(c=Yt(i,En(r,s)),c<0)return!0;a=Yt(i,En(t,n),c>=0?c:1/0)}else{if(a=Yt(i,En(t,n)),a<0)return!1;c=Yt(i,En(r,s),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!o}catch{}return!!o}function Av(e,t,n){const r=e.contentWindow;if(!r)return;let s=!1,o;try{o=r.document.readyState}catch{return}if(o!=="complete"){const a=Fi(()=>{s||(t(),s=!0)},n);e.addEventListener("load",()=>{Rd(a),s=!0,t()});return}const i="about:blank";if(r.location.href!==i||e.src===i||e.src==="")return Fi(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function Ov(e,t,n){let r=!1,s;try{s=e.sheet}catch{return}if(s)return;const o=Fi(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{Rd(o),r=!0,t()})}function Nv(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:p,inlineStylesheet:f,maskInputOptions:h={},maskTextFn:m,maskInputFn:_,dataURLOptions:y={},inlineImages:b,recordCanvas:L,keepIframeSrcFn:k,newlyAddedElement:x=!1}=t,S=Lv(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:Ee.Document,childNodes:[],compatMode:e.compatMode}:{type:Ee.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Ee.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:S};case e.ELEMENT_NODE:return Pv(e,{doc:n,blockClass:s,blockSelector:o,unblockSelector:i,inlineStylesheet:f,maskAttributeFn:c,maskInputOptions:h,maskInputFn:_,dataURLOptions:y,inlineImages:b,recordCanvas:L,keepIframeSrcFn:k,newlyAddedElement:x,rootId:S,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:p});case e.TEXT_NODE:return Dv(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:p,maskTextFn:m,maskInputOptions:h,maskInputFn:_,rootId:S});case e.CDATA_SECTION_NODE:return{type:Ee.CDATA,textContent:"",rootId:S};case e.COMMENT_NODE:return{type:Ee.Comment,textContent:e.textContent||"",rootId:S};default:return!1}}function Lv(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return n===1?void 0:n}function Dv(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:s,maskTextSelector:o,unmaskTextSelector:i,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:d}=t,l=e.parentNode&&e.parentNode.tagName;let p=e.textContent;const f=l==="STYLE"?!0:void 0,h=l==="SCRIPT"?!0:void 0,m=l==="TEXTAREA"?!0:void 0;if(f&&p){try{e.nextSibling||e.previousSibling||e.parentNode.sheet?.cssRules&&(p=Ts(e.parentNode.sheet))}catch(y){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${y}`,e)}p=Cs(p,Rs(t.doc))}h&&(p="SCRIPT_PLACEHOLDER");const _=vn(e,r,o,s,i,n);if(!f&&!h&&!m&&p&&_&&(p=a?a(p,e.parentElement):p.replace(/[\S]/g,"*")),m&&p&&(c.textarea||_)&&(p=u?u(p,e.parentNode):p.replace(/[\S]/g,"*")),l==="OPTION"&&p){const y=Is({type:null,tagName:l,maskInputOptions:c});p=cr({isMasked:vn(e,r,o,s,i,y),element:e,value:p,maskInputFn:u})}return{type:Ee.Text,textContent:p||"",isStyle:f,rootId:d}}function Pv(e,t){const{doc:n,blockClass:r,blockSelector:s,unblockSelector:o,inlineStylesheet:i,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:l,recordCanvas:p,keepIframeSrcFn:f,newlyAddedElement:h=!1,rootId:m,maskTextClass:_,unmaskTextClass:y,maskTextSelector:b,unmaskTextSelector:L}=t,k=Ld(e,r,s,o),x=bv(e);let S={};const w=e.attributes.length;for(let E=0;E<w;E++){const I=e.attributes[E];I.name&&!Nd(x,I.name,I.value)&&(S[I.name]=Od(n,x,yn(I.name),I.value,e,c))}if(x==="link"&&i){const E=Array.from(n.styleSheets).find(U=>U.href===e.href);let I=null;E&&(I=Ts(E)),I&&(S.rel=null,S.href=null,S.crossorigin=null,S._cssText=Cs(I,E.href))}if(x==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const E=Ts(e.sheet);E&&(S._cssText=Cs(E,Rs(n)))}if(x==="input"||x==="textarea"||x==="select"||x==="option"){const E=e,I=Pi(E),U=ks(E,Di(x),I),v=E.checked;if(I!=="submit"&&I!=="button"&&U){const A=vn(E,_,b,y,L,Is({type:I,tagName:Di(x),maskInputOptions:a}));S.value=cr({isMasked:A,element:E,value:U,maskInputFn:u})}v&&(S.checked=v)}if(x==="option"&&(e.selected&&!a.select?S.selected=!0:delete S.selected),x==="canvas"&&p){if(e.__context==="2d")_v(e)||(S.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){const E=e.toDataURL(d.type,d.quality),I=n.createElement("canvas");I.width=e.width,I.height=e.height;const U=I.toDataURL(d.type,d.quality);E!==U&&(S.rr_dataURL=E)}}if(x==="img"&&l){Sn||(Sn=n.createElement("canvas"),Md=Sn.getContext("2d"));const E=e,I=E.currentSrc||E.getAttribute("src")||"<unknown-src>",U=E.crossOrigin,v=()=>{E.removeEventListener("load",v);try{Sn.width=E.naturalWidth,Sn.height=E.naturalHeight,Md.drawImage(E,0,0),S.rr_dataURL=Sn.toDataURL(d.type,d.quality)}catch(A){if(E.crossOrigin!=="anonymous"){E.crossOrigin="anonymous",E.complete&&E.naturalWidth!==0?v():E.addEventListener("load",v);return}else console.warn(`Cannot inline img src=${I}! Error: ${A}`)}E.crossOrigin==="anonymous"&&(U?S.crossOrigin=U:E.removeAttribute("crossorigin"))};E.complete&&E.naturalWidth!==0?v():E.addEventListener("load",v)}if((x==="audio"||x==="video")&&(S.rr_mediaState=e.paused?"paused":"played",S.rr_mediaCurrentTime=e.currentTime),h||(e.scrollLeft&&(S.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(S.rr_scrollTop=e.scrollTop)),k){const{width:E,height:I}=e.getBoundingClientRect();S={class:S.class,rr_width:`${E}px`,rr_height:`${I}px`}}x==="iframe"&&!f(S.src)&&(!k&&!xd(e)&&(S.rr_src=S.src),delete S.src);let C;try{customElements.get(x)&&(C=!0)}catch{}return{type:Ee.Element,tagName:x,attributes:S,childNodes:[],isSVG:xv(e)||void 0,needBlock:k,rootId:m,isCustom:C}}function oe(e){return e==null?"":e.toLowerCase()}function Fv(e,t){if(t.comment&&e.type===Ee.Comment)return!0;if(e.type===Ee.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&Id(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(oe(e.attributes.name).match(/^msapplication-tile(image|color)$/)||oe(e.attributes.name)==="application-name"||oe(e.attributes.rel)==="icon"||oe(e.attributes.rel)==="apple-touch-icon"||oe(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&oe(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(oe(e.attributes.property).match(/^(og|twitter|fb):/)||oe(e.attributes.name).match(/^(og|twitter):/)||oe(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(oe(e.attributes.name)==="robots"||oe(e.attributes.name)==="googlebot"||oe(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(oe(e.attributes.name)==="author"||oe(e.attributes.name)==="generator"||oe(e.attributes.name)==="framework"||oe(e.attributes.name)==="publisher"||oe(e.attributes.name)==="progid"||oe(e.attributes.property).match(/^article:/)||oe(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(oe(e.attributes.name)==="google-site-verification"||oe(e.attributes.name)==="yandex-verification"||oe(e.attributes.name)==="csrf-token"||oe(e.attributes.name)==="p:domain_verify"||oe(e.attributes.name)==="verify-v1"||oe(e.attributes.name)==="verification"||oe(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function wn(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:p=!1,inlineStylesheet:f=!0,maskInputOptions:h={},maskAttributeFn:m,maskTextFn:_,maskInputFn:y,slimDOMOptions:b,dataURLOptions:L={},inlineImages:k=!1,recordCanvas:x=!1,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:C=5e3,onStylesheetLoad:E,stylesheetLoadTimeout:I=5e3,keepIframeSrcFn:U=()=>!1,newlyAddedElement:v=!1}=t;let{preserveWhiteSpace:A=!0}=t;const W=Nv(e,{doc:n,mirror:r,blockClass:s,blockSelector:o,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,inlineStylesheet:f,maskInputOptions:h,maskAttributeFn:m,maskTextFn:_,maskInputFn:y,dataURLOptions:L,inlineImages:k,recordCanvas:x,keepIframeSrcFn:U,newlyAddedElement:v});if(!W)return console.warn(e,"not serialized"),null;let N;r.hasNode(e)?N=r.getId(e):Fv(W,b)||!A&&W.type===Ee.Text&&!W.isStyle&&!W.textContent.replace(/^\s+|\s+$/gm,"").length?N=ur:N=$i();const M=Object.assign(W,{id:N});if(r.add(e,M),N===ur)return null;S&&S(e);let $=!p;if(M.type===Ee.Element){$=$&&!M.needBlock,delete M.needBlock;const O=e.shadowRoot;O&&ar(O)&&(M.isShadowHost=!0)}if((M.type===Ee.Document||M.type===Ee.Element)&&$){b.headWhitespace&&M.type===Ee.Element&&M.tagName==="head"&&(A=!1);const O={doc:n,mirror:r,blockClass:s,blockSelector:o,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:p,inlineStylesheet:f,maskInputOptions:h,maskAttributeFn:m,maskTextFn:_,maskInputFn:y,slimDOMOptions:b,dataURLOptions:L,inlineImages:k,recordCanvas:x,preserveWhiteSpace:A,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:C,onStylesheetLoad:E,stylesheetLoadTimeout:I,keepIframeSrcFn:U};for(const q of Array.from(e.childNodes)){const K=wn(q,O);K&&M.childNodes.push(K)}if(uv(e)&&e.shadowRoot)for(const q of Array.from(e.shadowRoot.childNodes)){const K=wn(q,O);K&&(ar(e.shadowRoot)&&(K.isShadow=!0),M.childNodes.push(K))}}return e.parentNode&&ir(e.parentNode)&&ar(e.parentNode)&&(M.isShadow=!0),M.type===Ee.Element&&M.tagName==="iframe"&&!Ld(e,s,o,i)&&Av(e,()=>{const O=xd(e);if(O&&w){const q=wn(O,{doc:O,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:f,maskInputOptions:h,maskAttributeFn:m,maskTextFn:_,maskInputFn:y,slimDOMOptions:b,dataURLOptions:L,inlineImages:k,recordCanvas:x,preserveWhiteSpace:A,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:C,onStylesheetLoad:E,stylesheetLoadTimeout:I,keepIframeSrcFn:U});q&&w(e,q)}},C),M.type===Ee.Element&&M.tagName==="link"&&typeof M.attributes.rel=="string"&&(M.attributes.rel==="stylesheet"||M.attributes.rel==="preload"&&typeof M.attributes.href=="string"&&Id(M.attributes.href)==="css")&&Ov(e,()=>{if(E){const O=wn(e,{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:f,maskInputOptions:h,maskAttributeFn:m,maskTextFn:_,maskInputFn:y,slimDOMOptions:b,dataURLOptions:L,inlineImages:k,recordCanvas:x,preserveWhiteSpace:A,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:C,onStylesheetLoad:E,stylesheetLoadTimeout:I,keepIframeSrcFn:U});O&&E(e,O)}},I),M}function $v(e,t){const{mirror:n=new wd,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:o=null,maskAllText:i=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:d=null,inlineStylesheet:l=!0,inlineImages:p=!1,recordCanvas:f=!1,maskAllInputs:h=!1,maskAttributeFn:m,maskTextFn:_,maskInputFn:y,slimDOM:b=!1,dataURLOptions:L,preserveWhiteSpace:k,onSerialize:x,onIframeLoad:S,iframeLoadTimeout:w,onStylesheetLoad:C,stylesheetLoadTimeout:E,keepIframeSrcFn:I=()=>!1}=t||{};return wn(e,{doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,maskAllText:i,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:l,maskInputOptions:h===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:h===!1?{}:h,maskAttributeFn:m,maskTextFn:_,maskInputFn:y,slimDOMOptions:b===!0||b==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:b==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:b===!1?{}:b,dataURLOptions:L,inlineImages:p,recordCanvas:f,preserveWhiteSpace:k,onSerialize:x,onIframeLoad:S,iframeLoadTimeout:w,onStylesheetLoad:C,stylesheetLoadTimeout:E,keepIframeSrcFn:I,newlyAddedElement:!1})}function ke(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Tn=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Dd={map:{},getId(){return console.error(Tn),-1},getNode(){return console.error(Tn),null},removeNodeFromMap(){console.error(Tn)},has(){return console.error(Tn),!1},reset(){console.error(Tn)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Dd=new Proxy(Dd,{get(e,t,n){return t==="map"&&console.error(Tn),Reflect.get(e,t,n)}}));function lr(e,t,n={}){let r=null,s=0;return function(...o){const i=Date.now();!s&&n.leading===!1&&(s=i);const a=t-(i-s),c=this;a<=0||a>t?(r&&(qv(r),r=null),s=i,e.apply(c,o)):!r&&n.trailing!==!1&&(r=Ms(()=>{s=n.leading===!1?0:Date.now(),r=null,e.apply(c,o)},a))}}function Pd(e,t,n,r,s=window){const o=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(i){Ms(()=>{n.set.call(this,i)},0),o&&o.set&&o.set.call(this,i)}}),()=>Pd(e,t,o||{},!0)}function Bi(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}let xs=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(xs=()=>new Date().getTime());function Fd(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:t?.documentElement.scrollLeft||t?.body?.parentElement?.scrollLeft||t?.body?.scrollLeft||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:t?.documentElement.scrollTop||t?.body?.parentElement?.scrollTop||t?.body?.scrollTop||0}}function $d(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Bd(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Ud(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function De(e,t,n,r,s){if(!e)return!1;const o=Ud(e);if(!o)return!1;const i=En(t,n);if(!s){const u=r&&o.matches(r);return i(o)&&!u}const a=Yt(o,i);let c=-1;return a<0?!1:(r&&(c=Yt(o,En(null,r))),a>-1&&c<0?!0:a<c)}function Bv(e,t){return t.getId(e)!==-1}function Ui(e,t){return t.getId(e)===ur}function Hd(e,t){if(ir(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?Hd(e.parentNode,t):!0:!0}function Hi(e){return!!e.changedTouches}function Uv(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function Wd(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function zd(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function Wi(e){return!!e?.shadowRoot}class Hv{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return this.styleIDMap.get(t)??-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function jd(e){let t=null;return e.getRootNode?.()?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function Wv(e){let t=e,n;for(;n=jd(t);)t=n;return t}function zv(e){const t=e.ownerDocument;if(!t)return!1;const n=Wv(e);return t.contains(n)}function qd(e){const t=e.ownerDocument;return t?t.contains(e)||zv(e):!1}const Gd={};function zi(e){const t=Gd[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(s)}catch{}return Gd[e]=r.bind(window)}function jv(...e){return zi("requestAnimationFrame")(...e)}function Ms(...e){return zi("setTimeout")(...e)}function qv(...e){return zi("clearTimeout")(...e)}var X=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(X||{}),H=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(H||{}),Ce=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Ce||{}),ft=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(ft||{}),In=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(In||{});function ji(e){try{return e.contentDocument}catch{}}function Gv(e){try{return e.contentWindow}catch{}}function Vd(e){return"__ln"in e}class Vv{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=n?.next||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&Vd(t.previousSibling)){const r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&Vd(t.nextSibling)&&t.nextSibling.__ln.previous){const r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const Yd=(e,t)=>`${e}@${t}`;class Yv{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new Set,r=new Vv,s=c=>{let u=c,d=ur;for(;d===ur;)u=u&&u.nextSibling,d=u&&this.mirror.getId(u);return d},o=c=>{if(!c.parentNode||!qd(c))return;const u=ir(c.parentNode)?this.mirror.getId(jd(c)):this.mirror.getId(c.parentNode),d=s(c);if(u===-1||d===-1)return r.addNode(c);const l=wn(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:p=>{Wd(p,this.mirror)&&!De(p,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(p),zd(p,this.mirror)&&this.stylesheetManager.trackLinkElement(p),Wi(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(p,f)=>{De(p,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(p,f),p.contentWindow&&this.canvasManager.addWindow(p.contentWindow),this.shadowDomManager.observeAttachShadow(p))},onStylesheetLoad:(p,f)=>{this.stylesheetManager.attachLinkElement(p,f)}});l&&(t.push({parentId:u,nextId:d,node:l}),n.add(l.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)Xd(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||o(c);for(const c of this.addedSet)!Kd(this.droppedSet,c)&&!Xd(this.removes,c,this.mirror)||Kd(this.movedSet,c)?o(c):this.droppedSet.add(c);let i=null;for(;r.length;){let c=null;if(i){const u=this.mirror.getId(i.value.parentNode),d=s(i.value);u!==-1&&d!==-1&&(c=i)}if(!c){let u=r.tail;for(;u;){const d=u;if(u=u.previous,d){const l=this.mirror.getId(d.value.parentNode);if(s(d.value)===-1)continue;if(l!==-1){c=d;break}else{const f=d.value;if(f.parentNode&&f.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const h=f.parentNode.host;if(this.mirror.getId(h)!==-1){c=d;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}i=c.previous,r.removeNode(c.value),o(c.value)}const a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:u}=c;if(typeof u.style=="string"){const d=JSON.stringify(c.styleDiff),l=JSON.stringify(c._unchangedStyles);d.length<u.style.length&&(d+l).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!Ui(t.target,this.mirror))switch(t.type){case"characterData":{const n=t.target.textContent;!De(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:vn(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,Ud(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let r=t.attributeName,s=t.target.getAttribute(r);if(r==="value"){const i=Pi(n),a=n.tagName;s=ks(n,a,i);const c=Is({maskInputOptions:this.maskInputOptions,tagName:a,type:i}),u=vn(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);s=cr({isMasked:u,element:n,value:s,maskInputFn:this.maskInputFn})}if(De(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===t.oldValue)return;let o=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(s))if(!ji(n))r="rr_src";else return;if(o||(o={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(t.target,o)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!Nd(n.tagName,r)&&(o.attributes[r]=Od(this.doc,yn(n.tagName),yn(r),s,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const i=this.unattachedDoc.createElement("span");t.oldValue&&i.setAttribute("style",t.oldValue);for(const a of Array.from(n.style)){const c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);c!==i.style.getPropertyValue(a)||u!==i.style.getPropertyPriority(a)?u===""?o.styleDiff[a]=c:o.styleDiff[a]=[c,u]:o._unchangedStyles[a]=[c,u]}for(const a of Array.from(i.style))n.style.getPropertyValue(a)===""&&(o.styleDiff[a]=!1)}break}case"childList":{if(De(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{const r=this.mirror.getId(n),s=ir(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);De(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Ui(n,this.mirror)||!Bv(n,this.mirror)||(this.addedSet.has(n)?(qi(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||Hd(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[Yd(r,s)]?qi(this.movedSet,n):this.removes.push({parentId:s,id:r,isShadow:ir(t.target)&&ar(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(Ui(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[Yd(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);De(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes.forEach(r=>this.genAdds(r)),Wi(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function qi(e,t){e.delete(t),t.childNodes.forEach(n=>qi(e,n))}function Xd(e,t,n){return e.length===0?!1:Xv(e,t,n)}function Xv(e,t,n){let r=t.parentNode;for(;r;){const s=n.getId(r);if(e.some(o=>o.id===s))return!0;r=r.parentNode}return!1}function Kd(e,t){return e.size===0?!1:Jd(e,t)}function Jd(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:Jd(e,n):!1}let dr;function Kv(e){dr=e}function Jv(){dr=void 0}const J=e=>dr?(...n)=>{try{return e(...n)}catch(r){if(dr&&dr(r)===!0)return()=>{};throw r}}:e,kn=[];function fr(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function Zd(e,t){const n=new Yv;kn.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const s=window?.Zone?.__symbol__?.("MutationObserver");s&&window[s]&&(r=window[s]);const o=new r(J(i=>{e.onMutation&&e.onMutation(i)===!1||n.processMutations.bind(n)(i)}));return o.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),o}function Zv({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};const s=typeof t.mousemove=="number"?t.mousemove:50,o=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let i=[],a;const c=lr(J(l=>{const p=Date.now()-a;e(i.map(f=>(f.timeOffset-=p,f)),l),i=[],a=null}),o),u=J(lr(J(l=>{const p=fr(l),{clientX:f,clientY:h}=Hi(l)?l.changedTouches[0]:l;a||(a=xs()),i.push({x:f,y:h,id:r.getId(p),timeOffset:xs()-a}),c(typeof DragEvent<"u"&&l instanceof DragEvent?H.Drag:l instanceof MouseEvent?H.MouseMove:H.TouchMove)}),s,{trailing:!1})),d=[ke("mousemove",u,n),ke("touchmove",u,n),ke("drag",u,n)];return J(()=>{d.forEach(l=>l())})}function Qv({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,sampling:i}){if(i.mouseInteraction===!1)return()=>{};const a=i.mouseInteraction===!0||i.mouseInteraction===void 0?{}:i.mouseInteraction,c=[];let u=null;const d=l=>p=>{const f=fr(p);if(De(f,r,s,o,!0))return;let h=null,m=l;if("pointerType"in p){switch(p.pointerType){case"mouse":h=ft.Mouse;break;case"touch":h=ft.Touch;break;case"pen":h=ft.Pen;break}h===ft.Touch?Ce[l]===Ce.MouseDown?m="TouchStart":Ce[l]===Ce.MouseUp&&(m="TouchEnd"):ft.Pen}else Hi(p)&&(h=ft.Touch);h!==null?(u=h,(m.startsWith("Touch")&&h===ft.Touch||m.startsWith("Mouse")&&h===ft.Mouse)&&(h=null)):Ce[l]===Ce.Click&&(h=u,u=null);const _=Hi(p)?p.changedTouches[0]:p;if(!_)return;const y=n.getId(f),{clientX:b,clientY:L}=_;J(e)({type:Ce[m],id:y,x:b,y:L,...h!==null&&{pointerType:h}})};return Object.keys(Ce).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&a[l]!==!1).forEach(l=>{let p=yn(l);const f=d(l);if(window.PointerEvent)switch(Ce[l]){case Ce.MouseDown:case Ce.MouseUp:p=p.replace("mouse","pointer");break;case Ce.TouchStart:case Ce.TouchEnd:return}c.push(ke(p,f,t))}),J(()=>{c.forEach(l=>l())})}function Qd({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,sampling:i}){const a=J(lr(J(c=>{const u=fr(c);if(!u||De(u,r,s,o,!0))return;const d=n.getId(u);if(u===t&&t.defaultView){const l=Fd(t.defaultView);e({id:d,x:l.left,y:l.top})}else e({id:d,x:u.scrollLeft,y:u.scrollTop})}),i.scroll||100));return ke("scroll",a,t)}function e0({viewportResizeCb:e},{win:t}){let n=-1,r=-1;const s=J(lr(J(()=>{const o=$d(),i=Bd();(n!==o||r!==i)&&(e({width:Number(i),height:Number(o)}),n=o,r=i)}),200));return ke("resize",s,t)}const t0=["INPUT","TEXTAREA","SELECT"],ef=new WeakMap;function n0({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,ignoreClass:i,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:d,userTriggeredOnInput:l,maskTextClass:p,unmaskTextClass:f,maskTextSelector:h,unmaskTextSelector:m}){function _(w){let C=fr(w);const E=w.isTrusted,I=C&&Di(C.tagName);if(I==="OPTION"&&(C=C.parentElement),!C||!I||t0.indexOf(I)<0||De(C,r,s,o,!0))return;const U=C;if(U.classList.contains(i)||a&&U.matches(a))return;const v=Pi(C);let A=ks(U,I,v),W=!1;const N=Is({maskInputOptions:c,tagName:I,type:v}),M=vn(C,p,h,f,m,N);(v==="radio"||v==="checkbox")&&(W=C.checked),A=cr({isMasked:M,element:C,value:A,maskInputFn:u}),y(C,l?{text:A,isChecked:W,userTriggered:E}:{text:A,isChecked:W});const $=C.name;v==="radio"&&$&&W&&t.querySelectorAll(`input[type="radio"][name="${$}"]`).forEach(O=>{if(O!==C){const q=cr({isMasked:M,element:O,value:ks(O,I,v),maskInputFn:u});y(O,l?{text:q,isChecked:!W,userTriggered:!1}:{text:q,isChecked:!W})}})}function y(w,C){const E=ef.get(w);if(!E||E.text!==C.text||E.isChecked!==C.isChecked){ef.set(w,C);const I=n.getId(w);J(e)({...C,id:I})}}const L=(d.input==="last"?["change"]:["input","change"]).map(w=>ke(w,J(_),t)),k=t.defaultView;if(!k)return()=>{L.forEach(w=>w())};const x=k.Object.getOwnPropertyDescriptor(k.HTMLInputElement.prototype,"value"),S=[[k.HTMLInputElement.prototype,"value"],[k.HTMLInputElement.prototype,"checked"],[k.HTMLSelectElement.prototype,"value"],[k.HTMLTextAreaElement.prototype,"value"],[k.HTMLSelectElement.prototype,"selectedIndex"],[k.HTMLOptionElement.prototype,"selected"]];return x&&x.set&&L.push(...S.map(w=>Pd(w[0],w[1],{set(){J(_)({target:this,isTrusted:!1})}},!1,k))),J(()=>{L.forEach(w=>w())})}function As(e){const t=[];function n(r,s){if(Os("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||Os("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||Os("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||Os("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const i=Array.from(r.parentRule.cssRules).indexOf(r);s.unshift(i)}else if(r.parentStyleSheet){const i=Array.from(r.parentStyleSheet.cssRules).indexOf(r);s.unshift(i)}return s}return n(e,t)}function Ct(e,t,n){let r,s;return e?(e.ownerNode?r=t.getId(e.ownerNode):s=n.getId(e),{styleId:s,id:r}):{}}function r0({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const s=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:J((d,l,p)=>{const[f,h]=p,{id:m,styleId:_}=Ct(l,t,n.styleMirror);return(m&&m!==-1||_&&_!==-1)&&e({id:m,styleId:_,adds:[{rule:f,index:h}]}),d.apply(l,p)})});const o=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(o,{apply:J((d,l,p)=>{const[f]=p,{id:h,styleId:m}=Ct(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,removes:[{index:f}]}),d.apply(l,p)})});let i;r.CSSStyleSheet.prototype.replace&&(i=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(i,{apply:J((d,l,p)=>{const[f]=p,{id:h,styleId:m}=Ct(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,replace:f}),d.apply(l,p)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:J((d,l,p)=>{const[f]=p,{id:h,styleId:m}=Ct(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,replaceSync:f}),d.apply(l,p)})}));const c={};Ns("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Ns("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Ns("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Ns("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach(([d,l])=>{u[d]={insertRule:l.prototype.insertRule,deleteRule:l.prototype.deleteRule},l.prototype.insertRule=new Proxy(u[d].insertRule,{apply:J((p,f,h)=>{const[m,_]=h,{id:y,styleId:b}=Ct(f.parentStyleSheet,t,n.styleMirror);return(y&&y!==-1||b&&b!==-1)&&e({id:y,styleId:b,adds:[{rule:m,index:[...As(f),_||0]}]}),p.apply(f,h)})}),l.prototype.deleteRule=new Proxy(u[d].deleteRule,{apply:J((p,f,h)=>{const[m]=h,{id:_,styleId:y}=Ct(f.parentStyleSheet,t,n.styleMirror);return(_&&_!==-1||y&&y!==-1)&&e({id:_,styleId:y,removes:[{index:[...As(f),m]}]}),p.apply(f,h)})})}),J(()=>{r.CSSStyleSheet.prototype.insertRule=s,r.CSSStyleSheet.prototype.deleteRule=o,i&&(r.CSSStyleSheet.prototype.replace=i),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([d,l])=>{l.prototype.insertRule=u[d].insertRule,l.prototype.deleteRule=u[d].deleteRule})})}function tf({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);const s=n.nodeName==="#document"?n.defaultView?.Document:n.ownerDocument?.defaultView?.ShadowRoot,o=s?.prototype?Object.getOwnPropertyDescriptor(s?.prototype,"adoptedStyleSheets"):void 0;return r===null||r===-1||!s||!o?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get(){return o.get?.call(this)},set(i){const a=o.set?.call(this,i);if(r!==null&&r!==-1)try{t.adoptStyleSheets(i,r)}catch{}return a}}),J(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get:o.get,set:o.set})}))}function s0({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:s}){const o=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(o,{apply:J((a,c,u)=>{const[d,l,p]=u;if(n.has(d))return o.apply(c,[d,l,p]);const{id:f,styleId:h}=Ct(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(f&&f!==-1||h&&h!==-1)&&e({id:f,styleId:h,set:{property:d,value:l,priority:p},index:As(c.parentRule)}),a.apply(c,u)})});const i=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(i,{apply:J((a,c,u)=>{const[d]=u;if(n.has(d))return i.apply(c,[d]);const{id:l,styleId:p}=Ct(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(l&&l!==-1||p&&p!==-1)&&e({id:l,styleId:p,remove:{property:d},index:As(c.parentRule)}),a.apply(c,u)})}),J(()=>{s.CSSStyleDeclaration.prototype.setProperty=o,s.CSSStyleDeclaration.prototype.removeProperty=i})}function o0({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:s,sampling:o,doc:i}){const a=J(u=>lr(J(d=>{const l=fr(d);if(!l||De(l,t,n,r,!0))return;const{currentTime:p,volume:f,muted:h,playbackRate:m}=l;e({type:u,id:s.getId(l),currentTime:p,volume:f,muted:h,playbackRate:m})}),o.media||500)),c=[ke("play",a(In.Play),i),ke("pause",a(In.Pause),i),ke("seeked",a(In.Seeked),i),ke("volumechange",a(In.VolumeChange),i),ke("ratechange",a(In.RateChange),i)];return J(()=>{c.forEach(u=>u())})}function i0({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],s=new WeakMap,o=n.FontFace;n.FontFace=function(c,u,d){const l=new o(c,u,d);return s.set(l,{family:c,buffer:typeof u!="string",descriptors:d,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),l};const i=Bi(t.fonts,"add",function(a){return function(c){return Ms(J(()=>{const u=s.get(c);u&&(e(u),s.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=o}),r.push(i),J(()=>{r.forEach(a=>a())})}function a0(e){const{doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,selectionCb:i}=e;let a=!0;const c=J(()=>{const u=t.getSelection();if(!u||a&&u?.isCollapsed)return;a=u.isCollapsed||!1;const d=[],l=u.rangeCount||0;for(let p=0;p<l;p++){const f=u.getRangeAt(p),{startContainer:h,startOffset:m,endContainer:_,endOffset:y}=f;De(h,r,s,o,!0)||De(_,r,s,o,!0)||d.push({start:n.getId(h),startOffset:m,end:n.getId(_),endOffset:y})}i({ranges:d})});return c(),ke("selectionchange",c)}function c0({doc:e,customElementCb:t}){const n=e.defaultView;return!n||!n.customElements?()=>{}:Bi(n.customElements,"define",function(s){return function(o,i,a){try{t({define:{name:o}})}catch{}return s.apply(this,[o,i,a])}})}function u0(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=Zd(e,e.doc));const s=Zv(e),o=Qv(e),i=Qd(e),a=e0(e,{win:n}),c=n0(e),u=o0(e);let d=()=>{},l=()=>{},p=()=>{},f=()=>{};e.recordDOM&&(d=r0(e,{win:n}),l=tf(e,e.doc),p=s0(e,{win:n}),e.collectFonts&&(f=i0(e)));const h=a0(e),m=c0(e),_=[];for(const y of e.plugins)_.push(y.observer(y.callback,n,y.options));return J(()=>{kn.forEach(y=>y.reset()),r?.disconnect(),s(),o(),i(),a(),c(),u(),d(),l(),p(),f(),h(),m(),_.forEach(y=>y())})}function Os(e){return typeof window[e]<"u"}function Ns(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class Gi{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,s){const o=r||this.getIdToRemoteIdMap(t),i=s||this.getRemoteIdToIdMap(t);let a=o.get(n);return a||(a=this.generateIdFn(),o.set(n,a),i.set(a,n)),a}getIds(t,n){const r=this.getIdToRemoteIdMap(t),s=this.getRemoteIdToIdMap(t);return n.map(o=>this.getId(t,o,r,s))}getRemoteId(t,n,r){const s=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;const o=s.get(n);return o||-1}getRemoteIds(t,n){const r=this.getRemoteIdToIdMap(t);return n.map(s=>this.getRemoteId(t,s,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}class l0{constructor(){this.crossOriginIframeMirror=new Gi($i),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class d0{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Gi($i),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Gi(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&t.contentWindow?.addEventListener("message",this.handleMessage.bind(this)),this.loadListener?.(t);const r=ji(t);r&&r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(r))}handleMessage(t){const n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;const s=this.crossOriginIframeMap.get(t.source);if(!s)return;const o=this.transformCrossOriginEvent(s,n.data.event);o&&this.wrappedEmit(o,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case X.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);const r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:X.IncrementalSnapshot,data:{source:H.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case X.Meta:case X.Load:case X.DomContentLoaded:return!1;case X.Plugin:return n;case X.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case X.IncrementalSnapshot:switch(n.data.source){case H.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);const s=this.crossOriginIframeRootIdMap.get(t);s&&this.patchRootIdOnNode(r.node,s)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case H.Drag:case H.TouchMove:case H.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case H.ViewportResize:return!1;case H.MediaInteraction:case H.MouseInteraction:case H.Scroll:case H.CanvasMutation:case H.Input:return this.replaceIds(n.data,t,["id"]),n;case H.StyleSheetRule:case H.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case H.Font:return n;case H.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case H.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),n.data.styles?.forEach(r=>{this.replaceStyleIds(r,t,["styleId"])}),n}}return!1}replace(t,n,r,s){for(const o of s)!Array.isArray(n[o])&&typeof n[o]!="number"||(Array.isArray(n[o])?n[o]=t.getIds(r,n[o]):n[o]=t.getId(r,n[o]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==Ee.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class f0{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class p0{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!ar(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);const r=Zd({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(Qd({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),Ms(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(tf({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){const n=ji(t),r=Gv(t);!n||!r||this.patchAttachShadow(r.Element,n)}patchAttachShadow(t,n){const r=this;this.restoreHandlers.push(Bi(t.prototype,"attachShadow",function(s){return function(o){const i=s.call(this,o);return this.shadowRoot&&qd(this)&&r.addShadowRoot(this.shadowRoot,n),i}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}for(var nf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h0=typeof Uint8Array>"u"?[]:new Uint8Array(256),Ls=0;Ls<nf.length;Ls++)h0[nf.charCodeAt(Ls)]=Ls;class rf{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class m0{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new Hv,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const r={id:n,styleIds:[]},s=[];for(const o of t){let i;this.styleMirror.has(o)?i=this.styleMirror.getId(o):(i=this.styleMirror.add(o),s.push({styleId:i,rules:Array.from(o.rules||CSSRule,(a,c)=>({rule:vd(a),index:c}))})),r.styleIds.push(i)}s.length>0&&(r.styles=s),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class g0{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,n){const r=this.nodeMap.get(t);return r&&Array.from(r).some(s=>s!==n)}add(t,n){this.active||(this.active=!0,jv(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}destroy(){}}let fe,Ds;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const Ve=gv();function pt(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:o=null,unblockSelector:i=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:d="rr-mask",unmaskTextClass:l=null,maskTextSelector:p=null,unmaskTextSelector:f=null,inlineStylesheet:h=!0,maskAllInputs:m,maskInputOptions:_,slimDOMOptions:y,maskAttributeFn:b,maskInputFn:L,maskTextFn:k,maxCanvasSize:x=null,packFn:S,sampling:w={},dataURLOptions:C={},mousemoveWait:E,recordDOM:I=!0,recordCanvas:U=!1,recordCrossOriginIframes:v=!1,recordAfter:A=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:W=!1,collectFonts:N=!1,inlineImages:M=!1,plugins:$,keepIframeSrcFn:O=()=>!1,ignoreCSSAttributes:q=new Set([]),errorHandler:K,onMutation:ie,getCanvasManager:Ue}=e;Kv(K);const Se=v?window.parent===window:!0;let me=!1;if(!Se)try{window.parent.document&&(me=!1)}catch{me=!0}if(Se&&!t)throw new Error("emit function is required");if(!Se&&!me)return()=>{};E!==void 0&&w.mousemove===void 0&&(w.mousemove=E),Ve.reset();const Pe=m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:_!==void 0?_:{},ht=y===!0||y==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:y==="all",headMetaDescKeywords:y==="all"}:y||{};Uv();let On,Nn=0;const _r=Q=>{for(const Ye of $||[])Ye.eventProcessor&&(Q=Ye.eventProcessor(Q));return S&&!me&&(Q=S(Q)),Q};fe=(Q,Ye)=>{const Z=Q;if(Z.timestamp=xs(),kn[0]?.isFrozen()&&Z.type!==X.FullSnapshot&&!(Z.type===X.IncrementalSnapshot&&Z.data.source===H.Mutation)&&kn.forEach(Re=>Re.unfreeze()),Se)t?.(_r(Z),Ye);else if(me){const Re={type:"rrweb",event:_r(Z),origin:window.location.origin,isCheckout:Ye};window.parent.postMessage(Re,"*")}if(Z.type===X.FullSnapshot)On=Z,Nn=0;else if(Z.type===X.IncrementalSnapshot){if(Z.data.source===H.Mutation&&Z.data.isAttachIframe)return;Nn++;const Re=r&&Nn>=r,ee=n&&On&&Z.timestamp-On.timestamp>n;(Re||ee)&&ya(!0)}};const Mt=Q=>{fe({type:X.IncrementalSnapshot,data:{source:H.Mutation,...Q}})},ae=Q=>fe({type:X.IncrementalSnapshot,data:{source:H.Scroll,...Q}}),ve=Q=>fe({type:X.IncrementalSnapshot,data:{source:H.CanvasMutation,...Q}}),Qe=Q=>fe({type:X.IncrementalSnapshot,data:{source:H.AdoptedStyleSheet,...Q}}),he=new m0({mutationCb:Mt,adoptedStyleSheetCb:Qe}),be=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new l0:new d0({mirror:Ve,mutationCb:Mt,stylesheetManager:he,recordCrossOriginIframes:v,wrappedEmit:fe});for(const Q of $||[])Q.getMirror&&Q.getMirror({nodeMirror:Ve,crossOriginIframeMirror:be.crossOriginIframeMirror,crossOriginIframeStyleMirror:be.crossOriginIframeStyleMirror});const et=new g0,Jt=y0(Ue,{mirror:Ve,win:window,mutationCb:Q=>fe({type:X.IncrementalSnapshot,data:{source:H.CanvasMutation,...Q}}),recordCanvas:U,blockClass:s,blockSelector:o,unblockSelector:i,maxCanvasSize:x,sampling:w.canvas,dataURLOptions:C,errorHandler:K}),Ln=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new f0:new p0({mutationCb:Mt,scrollCb:ae,bypassOptions:{onMutation:ie,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:p,unmaskTextSelector:f,inlineStylesheet:h,maskInputOptions:Pe,dataURLOptions:C,maskAttributeFn:b,maskTextFn:k,maskInputFn:L,recordCanvas:U,inlineImages:M,sampling:w,slimDOMOptions:ht,iframeManager:be,stylesheetManager:he,canvasManager:Jt,keepIframeSrcFn:O,processedNodeManager:et},mirror:Ve}),ya=(Q=!1)=>{if(!I)return;fe({type:X.Meta,data:{href:window.location.href,width:Bd(),height:$d()}},Q),he.reset(),Ln.init(),kn.forEach(Z=>Z.lock());const Ye=$v(document,{mirror:Ve,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:p,unmaskTextSelector:f,inlineStylesheet:h,maskAllInputs:Pe,maskAttributeFn:b,maskInputFn:L,maskTextFn:k,slimDOM:ht,dataURLOptions:C,recordCanvas:U,inlineImages:M,onSerialize:Z=>{Wd(Z,Ve)&&be.addIframe(Z),zd(Z,Ve)&&he.trackLinkElement(Z),Wi(Z)&&Ln.addShadowRoot(Z.shadowRoot,document)},onIframeLoad:(Z,Re)=>{be.attachIframe(Z,Re),Z.contentWindow&&Jt.addWindow(Z.contentWindow),Ln.observeAttachShadow(Z)},onStylesheetLoad:(Z,Re)=>{he.attachLinkElement(Z,Re)},keepIframeSrcFn:O});if(!Ye)return console.warn("Failed to snapshot the document");fe({type:X.FullSnapshot,data:{node:Ye,initialOffset:Fd(window)}}),kn.forEach(Z=>Z.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&he.adoptStyleSheets(document.adoptedStyleSheets,Ve.getId(document))};Ds=ya;try{const Q=[],Ye=Re=>J(u0)({onMutation:ie,mutationCb:Mt,mousemoveCb:(ee,Sa)=>fe({type:X.IncrementalSnapshot,data:{source:Sa,positions:ee}}),mouseInteractionCb:ee=>fe({type:X.IncrementalSnapshot,data:{source:H.MouseInteraction,...ee}}),scrollCb:ae,viewportResizeCb:ee=>fe({type:X.IncrementalSnapshot,data:{source:H.ViewportResize,...ee}}),inputCb:ee=>fe({type:X.IncrementalSnapshot,data:{source:H.Input,...ee}}),mediaInteractionCb:ee=>fe({type:X.IncrementalSnapshot,data:{source:H.MediaInteraction,...ee}}),styleSheetRuleCb:ee=>fe({type:X.IncrementalSnapshot,data:{source:H.StyleSheetRule,...ee}}),styleDeclarationCb:ee=>fe({type:X.IncrementalSnapshot,data:{source:H.StyleDeclaration,...ee}}),canvasMutationCb:ve,fontCb:ee=>fe({type:X.IncrementalSnapshot,data:{source:H.Font,...ee}}),selectionCb:ee=>{fe({type:X.IncrementalSnapshot,data:{source:H.Selection,...ee}})},customElementCb:ee=>{fe({type:X.IncrementalSnapshot,data:{source:H.CustomElement,...ee}})},blockClass:s,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:p,unmaskTextSelector:f,maskInputOptions:Pe,inlineStylesheet:h,sampling:w,recordDOM:I,recordCanvas:U,inlineImages:M,userTriggeredOnInput:W,collectFonts:N,doc:Re,maskAttributeFn:b,maskInputFn:L,maskTextFn:k,keepIframeSrcFn:O,blockSelector:o,unblockSelector:i,slimDOMOptions:ht,dataURLOptions:C,mirror:Ve,iframeManager:be,stylesheetManager:he,shadowDomManager:Ln,processedNodeManager:et,canvasManager:Jt,ignoreCSSAttributes:q,plugins:$?.filter(ee=>ee.observer)?.map(ee=>({observer:ee.observer,options:ee.options,callback:Sa=>fe({type:X.Plugin,data:{plugin:ee.name,payload:Sa}})}))||[]},{});be.addLoadListener(Re=>{try{Q.push(Ye(Re.contentDocument))}catch(ee){console.warn(ee)}});const Z=()=>{ya(),Q.push(Ye(document))};return document.readyState==="interactive"||document.readyState==="complete"?Z():(Q.push(ke("DOMContentLoaded",()=>{fe({type:X.DomContentLoaded,data:{}}),A==="DOMContentLoaded"&&Z()})),Q.push(ke("load",()=>{fe({type:X.Load,data:{}}),A==="load"&&Z()},window))),()=>{Q.forEach(Re=>Re()),et.destroy(),Ds=void 0,Jv()}}catch(Q){console.warn(Q)}}function _0(e){if(!Ds)throw new Error("please take full snapshot after start recording");Ds(e)}pt.mirror=Ve,pt.takeFullSnapshot=_0;function y0(e,t){try{return e?e(t):new rf}catch{return console.warn("Unable to initialize CanvasManager"),new rf}}var sf;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(sf||(sf={}));const S0=3,b0=5;function Vi(e){return e>9999999999?e:e*1e3}function Yi(e){return e>9999999999?e/1e3:e}function pr(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:X.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Ne(t,10,1e3)}}),t.category==="console")))}const E0="button,a";function of(e){return e.closest(E0)||e}function af(e){const t=cf(e);return!t||!(t instanceof Element)?t:of(t)}function cf(e){return v0(e)?e.target:e}function v0(e){return typeof e=="object"&&!!e&&"target"in e}let Rt;function w0(e){return Rt||(Rt=[],T0()),Rt.push(e),()=>{const t=Rt?Rt.indexOf(e):-1;t>-1&&Rt.splice(t,1)}}function T0(){we(se,"open",function(e){return function(...t){if(Rt)try{Rt.forEach(n=>n())}catch{}return e.apply(se,t)}})}const I0=new Set([H.Mutation,H.StyleSheetRule,H.StyleDeclaration,H.AdoptedStyleSheet,H.CanvasMutation,H.Selection,H.MediaInteraction]);function k0(e,t,n){e.handleClick(t,n)}class C0{constructor(t,n,r=pr){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const t=w0(()=>{this._lastMutation=uf()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(x0(n,this._ignoreSelector)||!M0(t))return;const r={timestamp:Yi(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(s=>s.node===r.node&&Math.abs(s.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=Yi(t)}registerScroll(t=Date.now()){this._lastScroll=Yi(t)}registerClick(t){const n=of(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){const t=[],n=uf();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(const r of t){const s=this._clicks.indexOf(r);s>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scrollTimeout,s=t.mutationAfter&&t.mutationAfter<=this._threshold,o=!r&&!s,{clickCount:i,clickBreadcrumb:a}=t;if(o){const c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",d={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:se.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:i||1}};this._addBreadcrumbEvent(n,d);return}if(i>1){const c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:se.location.href,route:n.getCurrentRoute(),clickCount:i,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=or(()=>this._checkClicks(),1e3)}}const R0=["A","BUTTON","INPUT"];function x0(e,t){return!!(!R0.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function M0(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function uf(){return Date.now()/1e3}function A0(e,t){try{if(!O0(t))return;const{source:n}=t.data;if(I0.has(n)&&e.registerMutation(t.timestamp),n===H.Scroll&&e.registerScroll(t.timestamp),N0(t)){const{type:r,id:s}=t.data,o=pt.mirror.getNode(s);o instanceof HTMLElement&&r===Ce.Click&&e.registerClick(o)}}catch{}}function O0(e){return e.type===S0}function N0(e){return e.data.source===H.MouseInteraction}function Je(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var Xi=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Xi||{});const L0=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function D0(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(L0.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}const P0=e=>t=>{if(!e.isEnabled())return;const n=F0(t);if(!n)return;const r=t.name==="click",s=r?t.event:void 0;r&&e.clickDetector&&s?.target&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&k0(e.clickDetector,n,af(t.event)),pr(e,n)};function lf(e,t){const n=pt.mirror.getId(e),r=n&&pt.mirror.getNode(n),s=r&&pt.mirror.getMeta(r),o=s&&B0(s)?s:null;return{message:t,data:o?{nodeId:n,node:{id:n,tagName:o.tagName,textContent:Array.from(o.childNodes).map(i=>i.type===Xi.Text&&i.textContent).filter(Boolean).map(i=>i.trim()).join(""),attributes:D0(o.attributes)}}:{}}}function F0(e){const{target:t,message:n}=$0(e);return Je({category:`ui.${e.name}`,...lf(t,n)})}function $0(e){const t=e.name==="click";let n,r=null;try{r=t?af(e.event):cf(e.event),n=$e(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function B0(e){return e.type===Xi.Element}function U0(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=H0(t);n&&pr(e,n)}function H0(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:o,target:i}=e;if(!i||W0(i)||!o)return null;const a=t||r||s,c=o.length===1;if(!a&&c)return null;const u=$e(i,{maxStringLength:200})||"<unknown>",d=lf(i,u);return Je({category:"ui.keyDown",message:u,data:{...d.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:o}})}function W0(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const z0={resource:Y0,paint:G0,navigation:V0};function Ki(e,t){return({metric:n})=>void t.replayPerformanceEntries.push(e(n))}function j0(e){return e.map(q0).filter(Boolean)}function q0(e){const t=z0[e.entryType];return t?t(e):null}function Cn(e){return((Ie()||se.performance.timeOrigin)+e)/1e3}function G0(e){const{duration:t,entryType:n,name:r,startTime:s}=e,o=Cn(s);return{type:n,name:r,start:o,end:o+t,data:void 0}}function V0(e){const{entryType:t,name:n,decodedBodySize:r,duration:s,domComplete:o,encodedBodySize:i,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:d,loadEventEnd:l,redirectCount:p,startTime:f,transferSize:h,type:m}=e;return s===0?null:{type:`${t}.${m}`,start:Cn(f),end:Cn(o),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:i,duration:s,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:d,loadEventEnd:l,domComplete:o,redirectCount:p}}}function Y0(e){const{entryType:t,initiatorType:n,name:r,responseEnd:s,startTime:o,decodedBodySize:i,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:Cn(o),end:Cn(s),name:r,data:{size:u,statusCode:c,decodedBodySize:i,encodedBodySize:a}}}function X0(e){const t=e.entries[e.entries.length-1],n=t?.element?[t.element]:void 0;return Ji(e,"largest-contentful-paint",n)}function K0(e){return e.sources!==void 0}function J0(e){const t=[],n=[];for(const r of e.entries)if(K0(r)){const s=[];for(const o of r.sources)if(o.node){n.push(o.node);const i=pt.mirror.getId(o.node);i&&s.push(i)}t.push({value:r.value,nodeIds:s.length?s:void 0})}return Ji(e,"cumulative-layout-shift",n,t)}function Z0(e){const t=e.entries[e.entries.length-1],n=t?.target?[t.target]:void 0;return Ji(e,"interaction-to-next-paint",n)}function Ji(e,t,n,r){const s=e.value,o=e.rating,i=Cn(s);return{type:"web-vital",name:t,start:i,end:i,data:{value:s,size:s,rating:o,nodeIds:n?n.map(a=>pt.mirror.getId(a)):void 0,attributions:r}}}function Q0(e){function t(s){e.performanceEntries.includes(s)||e.performanceEntries.push(s)}function n({entries:s}){s.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(s=>{r.push(Vt(s,n))}),r.push(bi(Ki(X0,e)),Si(Ki(J0,e)),Ll(Ki(Z0,e))),()=>{r.forEach(s=>s())}}const P=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ew='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function tw(){const e=new Blob([ew]);return URL.createObjectURL(e)}const df=["log","warn","error"],Ps="[Replay] ";function Zi(e,t="info"){Ke({category:"console",data:{logger:"replay"},level:t,message:`${Ps}${e}`},{level:t})}function nw(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:r=>{e=!!r.captureExceptions,t=!!r.traceInternals}};return P?(df.forEach(r=>{n[r]=(...s)=>{g[r](Ps,...s),t&&Zi(s.join(""),Bo(r))}}),n.exception=(r,...s)=>{s.length&&n.error&&n.error(...s),g.error(Ps,r),e?Wt(r):t&&Zi(r,"error")},n.infoTick=(...r)=>{g.log(Ps,...r),t&&setTimeout(()=>Zi(r[0]),0)}):df.forEach(r=>{n[r]=()=>{}}),n}const F=nw();class Qi extends Error{constructor(){super(`Event buffer exceeded maximum size of ${Li}.`)}}class ff{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>Li)throw new Qi;this.events.push(t)}finish(){return new Promise(t=>{const n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(n=>n.timestamp).sort()[0];return t?Vi(t):null}}class rw{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){P&&F.log("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){const r=this._getAndIncrementId();return new Promise((s,o)=>{const i=({data:a})=>{const c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",i),!c.success){P&&F.error("Error in compression worker: ",c.response),o(new Error("Error in compression worker"));return}s(c.response)}};this._worker.addEventListener("message",i),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}}class sw{constructor(t){this._worker=new rw(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const n=Vi(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>Li?Promise.reject(new Qi):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{P&&F.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class ow{constructor(t){this._fallback=new ff,this._compression=new sw(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}set waitForCheckout(t){this._used.waitForCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){P&&F.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:n,waitForCheckout:r}=this._fallback,s=[];for(const o of t)s.push(this._compression.addEvent(o));this._compression.hasCheckout=n,this._compression.waitForCheckout=r,this._used=this._compression;try{await Promise.all(s),this._fallback.clear()}catch(o){P&&F.exception(o,"Failed to add events when switching buffers.")}}}function iw({useCompression:e,workerUrl:t}){if(e&&window.Worker){const n=aw(t);if(n)return n}return P&&F.log("Using simple buffer"),new ff}function aw(e){try{const t=e||cw();if(!t)return;P&&F.log(`Using compression worker${e?` from ${e}`:""}`);const n=new Worker(t);return new ow(n)}catch(t){P&&F.exception(t,"Failed to create compression worker")}}function cw(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?tw():""}function ea(){try{return"sessionStorage"in se&&!!se.sessionStorage}catch{return!1}}function uw(e){lw(),e.session=void 0}function lw(){if(ea())try{se.sessionStorage.removeItem(Oi)}catch{}}function pf(e){return e===void 0?!1:Math.random()<e}function ta(e){if(ea())try{se.sessionStorage.setItem(Oi,JSON.stringify(e))}catch{}}function hf(e){const t=Date.now(),n=e.id||Te(),r=e.started||t,s=e.lastActivity||t,o=e.segmentId||0,i=e.sampled,a=e.previousSessionId;return{id:n,started:r,lastActivity:s,segmentId:o,sampled:i,previousSessionId:a}}function dw(e,t){return pf(e)?"session":t?"buffer":!1}function mf({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const s=dw(e,t),o=hf({sampled:s,previousSessionId:r});return n&&ta(o),o}function fw(){if(!ea())return null;try{const e=se.sessionStorage.getItem(Oi);if(!e)return null;const t=JSON.parse(e);return P&&F.infoTick("Loading existing session"),hf(t)}catch{return null}}function na(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function gf(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return na(e.started,t,r)||na(e.lastActivity,n,r)}function _f(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!gf(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function ra({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){const s=r.stickySession&&fw();return s?_f(s,{sessionIdleExpire:e,maxReplayDuration:t})?(P&&F.infoTick("Session in sessionStorage is expired, creating new one..."),mf(r,{previousSessionId:s.id})):s:(P&&F.infoTick("Creating new session"),mf(r,{previousSessionId:n}))}function pw(e){return e.type===X.Custom}function sa(e,t,n){return Sf(e,t)?(yf(e,t,n),!0):!1}function hw(e,t,n){return Sf(e,t)?yf(e,t,n):Promise.resolve(null)}async function yf(e,t,n){const{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;const s=e.recordingMode==="buffer";try{n&&s&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);const o=e.getOptions(),i=mw(t,o.beforeAddRecordingEvent);return i?await r.addEvent(i):void 0}catch(o){const i=o&&o instanceof Qi,a=i?"addEventSizeExceeded":"addEvent";if(i&&s)return r.clear(),r.waitForCheckout=!0,null;e.handleException(o),await e.stop({reason:a});const c=R();c&&c.recordDroppedEvent("internal_sdk_error","replay")}}function Sf(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Vi(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(P&&F.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function mw(e,t){try{if(typeof t=="function"&&pw(e))return t(e)}catch(n){return P&&F.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function oa(e){return!e.type}function ia(e){return e.type==="transaction"}function gw(e){return e.type==="replay_event"}function bf(e){return e.type==="feedback"}function _w(e){return(t,n)=>{if(!e.isEnabled()||!oa(t)&&!ia(t))return;const r=n?.statusCode;if(!(!r||r<200||r>=300)){if(ia(t)){yw(e,t);return}Sw(e,t)}}}function yw(e,t){const n=e.getContext();t.contexts?.trace?.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function Sw(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||or(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(s){e.handleException(s)}})}function bw(e){return t=>{!e.isEnabled()||!oa(t)||Ew(e,t)}}function Ew(e,t){const n=t.exception?.values?.[0]?.value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const r=Je({category:"replay.hydrate-error",data:{url:At()}});pr(e,r)}}function vw(e){const t=R();t&&t.on("beforeAddBreadcrumb",n=>ww(e,n))}function ww(e,t){if(!e.isEnabled()||!Ef(t))return;const n=Tw(t);n&&pr(e,n)}function Tw(e){return!Ef(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?Iw(e):Je(e)}function Iw(e){const t=e.data?.arguments;if(!Array.isArray(t)||t.length===0)return Je(e);let n=!1;const r=t.map(s=>{if(!s)return s;if(typeof s=="string")return s.length>ws?(n=!0,`${s.slice(0,ws)}`):s;if(typeof s=="object")try{const o=Ne(s,7);return JSON.stringify(o).length>ws?(n=!0,`${JSON.stringify(o,null,2).slice(0,ws)}`):o}catch{}return s});return Je({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function Ef(e){return!!e.category}function kw(e,t){return e.type||!e.exception?.values?.length?!1:!!t.originalException?.__rrweb__}function vf(){const e=G().getPropagationContext().dsc;e&&delete e.replay_id;const t=ye();if(t){const n=je(t);delete n.replay_id}}function Cw(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:X.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function Rw(e,t){return e.recordingMode!=="buffer"||t.message===Ni||!t.exception||t.type?!1:pf(e.getOptions().errorSampleRate)}function xw(e){return Object.assign((t,n)=>!e.isEnabled()||e.isPaused()?t:gw(t)?(delete t.breadcrumbs,t):!oa(t)&&!ia(t)&&!bf(t)?t:e.checkAndHandleExpiredSession()?bf(t)?(e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),Cw(e,t),t):kw(t,n)&&!e.getOptions()._experiments.captureExceptions?(P&&F.log("Ignoring error from rrweb internals",t),null):((Rw(e,t)||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),t):(vf(),t),{id:"Replay"})}function Fs(e,t){return t.map(({type:n,start:r,end:s,name:o,data:i})=>{const a=e.throttledAddEvent({type:X.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:o,startTimestamp:r,endTimestamp:s,data:i}}});return typeof a=="string"?Promise.resolve(null):a})}function Mw(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function Aw(e){return t=>{if(!e.isEnabled())return;const n=Mw(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(Fs(e,[n]),!1)))}}function Ow(e,t){return P&&e.getOptions()._experiments.traceInternals?!1:au(t,R())}function wf(e,t){e.isEnabled()&&t!==null&&(Ow(e,t.name)||e.addUpdate(()=>(Fs(e,[t]),!0)))}function $s(e){if(!e)return;const t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=Gl(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function Tf(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Bs(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function If(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:o,statusCode:i,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:s,data:{method:o,statusCode:i,request:a,response:c}}}function hr(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function xt(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:s,warnings:o}=Nw(n);return r.body=s,o?.length&&(r._meta={warnings:o}),r}function aa(e,t){return Object.entries(e).reduce((n,[r,s])=>{const o=r.toLowerCase();return t.includes(o)&&e[r]&&(n[o]=s),n},{})}function Nw(e){if(!e||typeof e!="string")return{body:e};const t=e.length>Sd,n=Lw(e);if(t){const r=e.slice(0,Sd);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function Lw(e){const t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function Us(e,t){const n=Dw(e);return We(n,t)}function Dw(e,t=se.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(se.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function Pw(e,t,n){try{const r=await $w(e,t,n),s=If("resource.fetch",r);wf(n.replay,s)}catch(r){P&&F.exception(r,"Failed to capture fetch breadcrumb")}}function Fw(e,t){const{input:n,response:r}=t,s=n?Ri(n):void 0,o=$s(s),i=r?Tf(r.headers.get("content-length")):void 0;o!==void 0&&(e.data.request_body_size=o),i!==void 0&&(e.data.response_body_size=i)}async function $w(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:o=r}=t,{url:i,method:a,status_code:c=0,request_body_size:u,response_body_size:d}=e.data,l=Us(i,n.networkDetailAllowUrls)&&!Us(i,n.networkDetailDenyUrls),p=l?Bw(n,t.input,u):hr(u),f=await Uw(l,n,t.response,d);return{startTimestamp:s,endTimestamp:o,url:i,method:a,statusCode:c,request:p,response:f}}function Bw({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const s=n?zw(n,t):{};if(!e)return xt(s,r,void 0);const o=Ri(n),[i,a]=bs(o,F),c=xt(s,r,i);return a?Bs(c,a):c}async function Uw(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,s){if(!e&&s!==void 0)return hr(s);const o=r?kf(r.headers,n):{};if(!r||!t&&s!==void 0)return xt(o,s,void 0);const[i,a]=await Ww(r),c=Hw(i,{networkCaptureBodies:t,responseBodySize:s,captureDetails:e,headers:o});return a?Bs(c,a):c}function Hw(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:s}){try{const o=e?.length&&n===void 0?$s(e):n;return r?t?xt(s,o,e):xt(s,o,void 0):hr(o)}catch(o){return P&&F.exception(o,"Failed to serialize response body"),xt(s,n,void 0)}}async function Ww(e){const t=jw(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await qw(t)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?(P&&F.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(P&&F.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function kf(e,t){const n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function zw(e,t){return e.length===1&&typeof e[0]!="string"?Cf(e[0],t):e.length===2?Cf(e[1],t):{}}function Cf(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?kf(n,t):Array.isArray(n)?{}:aa(n,t):{}}function jw(e){try{return e.clone()}catch(t){P&&F.exception(t,"Failed to clone response body")}}function qw(e){return new Promise((t,n)=>{const r=or(()=>n(new Error("Timeout while trying to read response body")),500);Gw(e).then(s=>t(s),s=>n(s)).finally(()=>clearTimeout(r))})}async function Gw(e){return await e.text()}async function Vw(e,t,n){try{const r=Xw(e,t,n),s=If("resource.xhr",r);wf(n.replay,s)}catch(r){P&&F.exception(r,"Failed to capture xhr breadcrumb")}}function Yw(e,t){const{xhr:n,input:r}=t;if(!n)return;const s=$s(r),o=n.getResponseHeader("content-length")?Tf(n.getResponseHeader("content-length")):Qw(n.response,n.responseType);s!==void 0&&(e.data.request_body_size=s),o!==void 0&&(e.data.response_body_size=o)}function Xw(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:o=r,input:i,xhr:a}=t,{url:c,method:u,status_code:d=0,request_body_size:l,response_body_size:p}=e.data;if(!c)return null;if(!a||!Us(c,n.networkDetailAllowUrls)||Us(c,n.networkDetailDenyUrls)){const S=hr(l),w=hr(p);return{startTimestamp:s,endTimestamp:o,url:c,method:u,statusCode:d,request:S,response:w}}const f=a[dt],h=f?aa(f.request_headers,n.networkRequestHeaders):{},m=aa(Kw(a),n.networkResponseHeaders),[_,y]=n.networkCaptureBodies?bs(i,F):[void 0],[b,L]=n.networkCaptureBodies?Jw(a):[void 0],k=xt(h,l,_),x=xt(m,p,b);return{startTimestamp:s,endTimestamp:o,url:c,method:u,statusCode:d,request:y?Bs(k,y):k,response:L?Bs(x,L):x}}function Kw(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[s,o]=r.split(": ");return o&&(n[s.toLowerCase()]=o),n},{}):{}}function Jw(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return Zw(e.response,e.responseType)}catch(n){t.push(n)}return P&&F.warn("Failed to get xhr response body",...t),[void 0]}function Zw(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return P&&F.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return P&&F.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Qw(e,t){try{const n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return $s(n)}catch{return}}function eT(e){const t=R();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:i}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:i};t&&t.on("beforeAddBreadcrumb",(c,u)=>tT(a,c,u))}catch{}}function tT(e,t,n){if(t.data)try{nT(t)&&sT(n)&&(Yw(t,n),Vw(t,n,e)),rT(t)&&oT(n)&&(Fw(t,n),Pw(t,n,e))}catch(r){P&&F.exception(r,"Error when enriching network breadcrumb")}}function nT(e){return e.category==="xhr"}function rT(e){return e.category==="fetch"}function sT(e){return e?.xhr}function oT(e){return e?.response}function iT(e){const t=R();zl(P0(e)),ys(Aw(e)),vw(e),eT(e);const n=xw(e);$c(n),t&&(t.on("beforeSendEvent",bw(e)),t.on("afterSendEvent",_w(e)),t.on("createDsc",r=>{const s=e.getSessionId();s&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(r.replay_id=s)}),t.on("spanStart",r=>{e.lastActiveSpan=r}),t.on("spanEnd",r=>{e.lastActiveSpan=r}),t.on("beforeSendFeedback",async(r,s)=>{const o=e.getSessionId();s?.includeReplay&&e.isEnabled()&&o&&r.contexts?.feedback&&(r.contexts.feedback.source==="api"&&await e.sendBufferedReplayOrFlush(),r.contexts.feedback.replay_id=o)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}async function aT(e){try{return Promise.all(Fs(e,[cT(se.performance.memory)]))}catch{return[]}}function cT(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function uT(e,t,n){return cg(e,t,{...n,setTimeoutImpl:or})}const Hs=B.navigator;function lT(){return/iPhone|iPad|iPod/i.test(Hs?.userAgent??"")||/Macintosh/i.test(Hs?.userAgent??"")&&Hs?.maxTouchPoints&&Hs?.maxTouchPoints>1?{sampling:{mousemove:!1}}:{}}function dT(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){P&&F.warn("Received replay event after session expired.");return}const s=r||!t;t=!0,e.clickDetector&&A0(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&s&&e.setInitialState(),!sa(e,n,s))return!0;if(!s)return!1;const o=e.session;if(pT(e,s),e.recordingMode==="buffer"&&o&&e.eventBuffer){const i=e.eventBuffer.getEarliestTimestamp();i&&(P&&F.log(`Updating session start time to earliest event in buffer to ${new Date(i)}`),o.started=i,e.getOptions().stickySession&&ta(o))}return o?.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function fT(e){const t=e.getOptions();return{type:X.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function pT(e,t){!t||!e.session||e.session.segmentId!==0||sa(e,fT(e),!1)}function hT(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function mT(e,t,n,r){return ct(yc(e,So(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function gT({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{const o=new TextEncoder().encode(r);n=new Uint8Array(o.length+e.length),n.set(o),n.set(e,o.length)}return n}async function _T({client:e,scope:t,replayId:n,event:r}){const s=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,o={event_id:n,integrations:s};e.emit("preprocessEvent",r,o);const i=await Lc(e.getOptions(),r,o,t,e,ge());if(!i)return null;e.emit("postprocessEvent",i,o),i.platform=i.platform||"javascript";const a=e.getSdkMetadata(),{name:c,version:u}=a?.sdk||{};return i.sdk={...i.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0"},i}async function yT({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:s,session:o}){const i=gT({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:d}=r,l=R(),p=G(),f=l?.getTransport(),h=l?.getDsn();if(!l||!f||!h||!o.sampled)return ut({});const m={type:XE,replay_start_timestamp:d/1e3,timestamp:s/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:o.sampled},_=await _T({scope:p,client:l,replayId:t,event:m});if(!_)return l.recordDroppedEvent("event_processor","replay"),P&&F.log("An event processor returned `null`, will not send event."),ut({});delete _.sdkProcessingMetadata;const y=mT(_,i,h,l.getOptions().tunnel);let b;try{b=await f.send(y)}catch(k){const x=new Error(Ni);try{x.cause=k}catch{}throw x}if(typeof b.statusCode=="number"&&(b.statusCode<200||b.statusCode>=300))throw new Rf(b.statusCode);const L=su({},b);if(ru(L,"replay"))throw new ca(L);return b}class Rf extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class ca extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function xf(e,t={count:0,interval:tv}){const{recordingData:n,onError:r}=e;if(n.length)try{return await yT(e),!0}catch(s){if(s instanceof Rf||s instanceof ca)throw s;if(Dc("Replays",{_retryCount:t.count}),r&&r(s),t.count>=nv){const o=new Error(`${Ni} - max retries exceeded`);try{o.cause=s}catch{}throw o}return t.interval*=++t.count,new Promise((o,i)=>{or(async()=>{try{await xf(e,t),o(!0)}catch(a){i(a)}},t.interval)})}}const Mf="__THROTTLED",ST="__SKIPPED";function bT(e,t,n){const r=new Map,s=a=>{const c=a-n;r.forEach((u,d)=>{d<c&&r.delete(d)})},o=()=>[...r.values()].reduce((a,c)=>a+c,0);let i=!1;return(...a)=>{const c=Math.floor(Date.now()/1e3);if(s(c),o()>=t){const d=i;return i=!0,d?ST:Mf}i=!1;const u=r.get(c)||0;return r.set(c,u+1),e(...a)}}class ET{constructor({options:t,recordingOptions:n}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:KE,sessionIdleExpire:JE},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=uT(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=bT((i,a)=>hw(this,i,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:s}=this.getOptions(),o=r?{threshold:Math.min(rv,r),timeout:r,scrollTimeout:sv,ignoreSelector:s?s.join(","):""}:void 0;if(o&&(this.clickDetector=new C0(this,o)),P){const i=t._experiments;F.setConfig({captureExceptions:!!i.captureExceptions,traceInternals:!!i.traceInternals})}this._handleVisibilityChange=()=>{se.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const i=Je({category:"ui.blur"});this._doChangeToBackgroundTasks(i)},this._handleWindowFocus=()=>{const i=Je({category:"ui.focus"});this._doChangeToForegroundTasks(i)},this._handleKeyboardEvent=i=>{U0(this,i)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){P&&F.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){const{errorSampleRate:n,sessionSampleRate:r}=this._options,s=n<=0&&r<=0;if(this._requiresManualStart=s,!s){if(this._initializeSessionForSampling(t),!this.session){P&&F.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",P&&F.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){P&&F.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){P&&F.log("Buffering is in progress, call `flush()` to save the replay");return}P&&F.infoTick("Starting replay in session mode"),this._updateUserActivity();const t=ra({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){P&&F.log("Buffering is in progress, call `flush()` to save the replay");return}P&&F.infoTick("Starting replay in buffer mode");const t=ra({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=pt({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:ev}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:dT(this),...lT(),onMutation:this._onMutationHandler.bind(this),...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{P&&F.log(`Stopping Replay${n?` triggered by ${n}`:""}`),vf(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer?.destroy(),this.eventBuffer=null,uw(this)}catch(r){this.handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),P&&F.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),P&&F.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();P&&F.log("Converting buffer to session"),await this.flushImmediate();const r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const n=t();this.recordingMode==="buffer"||!this._isEnabled||n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session?.id}checkAndHandleExpiredSession(){if(this._lastActivity&&na(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t=`${se.location.pathname}${se.location.hash}${se.location.search}`,n=`${se.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){const r=this._throttledAddEvent(t,n);if(r===Mf){const s=Je({category:"replay.throttled"});this.addUpdate(()=>!sa(this,{type:b0,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}}))}return r}getCurrentRoute(){const t=this.lastActiveSpan||ye(),n=t&&_e(t),s=(n&&z(n).data||{})[Ae];if(!(!n||!s||!["route","custom"].includes(s)))return z(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=iw({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){const n=this._options.errorSampleRate>0,r=ra({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const t=this.session;return _f(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{se.document.addEventListener("visibilitychange",this._handleVisibilityChange),se.addEventListener("blur",this._handleWindowBlur),se.addEventListener("focus",this._handleWindowFocus),se.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(iT(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=Q0(this)}_removeListeners(){try{se.document.removeEventListener("visibilitychange",this._handleVisibilityChange),se.removeEventListener("blur",this._handleWindowBlur),se.removeEventListener("focus",this._handleWindowFocus),se.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}_doChangeToBackgroundTasks(t){!this.session||gf(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){P&&F.log("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:X.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=j0(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const n=this._context.initialTimestamp/1e3;t=t.filter(r=>r.start>=n)}return Promise.all(Fs(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){P&&F.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!this.eventBuffer?.hasEvents&&(await aT(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),s=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await xf({replayId:t,recordingData:o,segmentId:s,eventContext:r,session:this.session,timestamp:n,onError:i=>this.handleException(i)})}catch(n){this.handleException(n),this.stop({reason:"sendReplay"});const r=R();if(r){const s=n instanceof ca?"ratelimit_backoff":"send_error";r.recordDroppedEvent(s,"replay")}}}async _flush({force:t=!1}={}){if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){P&&F.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,s=Date.now()-n;this._debouncedFlush.cancel();const o=s<this._options.minReplayDuration,i=s>this._options.maxReplayDuration+5e3;if(o||i){P&&F.log(`Session duration (${Math.floor(s/1e3)}s) is too ${o?"short":"long"}, not sending replay.`),o&&this._debouncedFlush();return}const a=this.eventBuffer;a&&this.session.segmentId===0&&!a.hasCheckout&&P&&F.log("Flushing initial segment without checkout.");const c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(u){this.handleException(u)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&ta(this.session)}_onMutationHandler(t){const{ignoreMutations:n}=this._options._experiments;if(n?.length&&t.some(a=>{const c=hT(a.target),u=n.join(",");return c?.matches(u)}))return!1;const r=t.length,s=this._options.mutationLimit,o=this._options.mutationBreadcrumbLimit,i=s&&r>s;if(r>o||i){const a=Je({category:"replay.mutations",data:{count:r,limit:i}});this._createCustomBreadcrumb(a)}return i?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}function mr(e,t){return[...e,...t].join(",")}function vT({mask:e,unmask:t,block:n,unblock:r,ignore:s}){const o=["base","iframe[srcdoc]:not([src])"],i=mr(e,[".sentry-mask","[data-sentry-mask]"]),a=mr(t,[]);return{maskTextSelector:i,unmaskTextSelector:a,blockSelector:mr(n,[".sentry-block","[data-sentry-block]",...o]),unblockSelector:mr(r,[]),ignoreSelector:mr(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function wT({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:s,value:o}){return!r||s.unmaskTextSelector&&e.matches(s.unmaskTextSelector)?o:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?o.replace(/[\S]/g,"*"):o}const Af='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',TT=["content-length","content-type","accept"];let Of=!1;const Nf=e=>new IT(e);class IT{constructor({flushMinDelay:t=ZE,flushMaxDelay:n=QE,minReplayDuration:r=ov,maxReplayDuration:s=bd,stickySession:o=!0,useCompression:i=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:l=!0,mutationBreadcrumbLimit:p=750,mutationLimit:f=1e4,slowClickTimeout:h=7e3,slowClickIgnoreSelectors:m=[],networkDetailAllowUrls:_=[],networkDetailDenyUrls:y=[],networkCaptureBodies:b=!0,networkRequestHeaders:L=[],networkResponseHeaders:k=[],mask:x=[],maskAttributes:S=["title","placeholder","aria-label"],unmask:w=[],block:C=[],unblock:E=[],ignore:I=[],maskFn:U,beforeAddRecordingEvent:v,beforeErrorSampling:A,onError:W}={}){this.name="Replay";const N=vT({mask:x,unmask:w,block:C,unblock:E,ignore:I});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:U,maskInputFn:U,maskAttributeFn:(M,$,O)=>wT({maskAttributes:S,maskAllText:u,privacyOptions:N,key:M,value:$,el:O}),...N,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:M=>{try{M.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!c.recordCrossOriginIframes},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,iv),maxReplayDuration:Math.min(s,bd),stickySession:o,useCompression:i,workerUrl:a,blockAllMedia:l,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:p,mutationLimit:f,slowClickTimeout:h,slowClickIgnoreSelectors:m,networkDetailAllowUrls:_,networkDetailDenyUrls:y,networkCaptureBodies:b,networkRequestHeaders:Lf(L),networkResponseHeaders:Lf(k),beforeAddRecordingEvent:v,beforeErrorSampling:A,onError:W,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Af}`:Af),this._isInitialized&&zo())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Of}set _isInitialized(t){Of=t}afterAllSetup(t){!zo()||this._replay||(this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(){if(this._replay?.isEnabled())return this._replay.getSessionId()}getRecordingMode(){if(this._replay?.isEnabled())return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){const n=kT(this._initialOptions,t);this._replay=new ET({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{const n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}function kT(e,t){const n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...e},s=Pt(n.replaysSessionSampleRate),o=Pt(n.replaysOnErrorSampleRate);return s==null&&o==null&&mt(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),s!=null&&(r.sessionSampleRate=s),o!=null&&(r.errorSampleRate=o),r}function Lf(e){return[...TT,...e.map(t=>t.toLowerCase())]}function CT(){return R()?.getIntegrationByName("Replay")}var RT=Object.defineProperty,xT=(e,t,n)=>t in e?RT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Df=(e,t,n)=>xT(e,typeof t!="symbol"?t+"":t,n);class MT{constructor(){Df(this,"idNodeMap",new Map),Df(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function AT(){return new MT}function OT(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function ua(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:ua(e.parentNode,t,n,r+1)}function Pf(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(OT(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}const Rn=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Ff={map:{},getId(){return console.error(Rn),-1},getNode(){return console.error(Rn),null},removeNodeFromMap(){console.error(Rn)},has(){return console.error(Rn),!1},reset(){console.error(Rn)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Ff=new Proxy(Ff,{get(e,t,n){return t==="map"&&console.error(Rn),Reflect.get(e,t,n)}}));function la(e,t,n,r,s=window){const o=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(i){Uf(()=>{n.set.call(this,i)},0),o&&o.set&&o.set.call(this,i)}}),()=>la(e,t,o||{},!0)}function da(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}Date.now().toString();function NT(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function Ws(e,t,n,r,s){if(!e)return!1;const o=NT(e);if(!o)return!1;const i=Pf(t,n),a=ua(o,i);let c=-1;return a<0?!1:(r&&(c=ua(o,Pf(null,r))),a>-1&&c<0?!0:a<c)}const $f={};function Bf(e){const t=$f[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(s)}catch{}return $f[e]=r.bind(window)}function Xt(...e){return Bf("requestAnimationFrame")(...e)}function Uf(...e){return Bf("setTimeout")(...e)}var xn=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(xn||{});let zs;function LT(e){zs=e}const fa=e=>zs?(...n)=>{try{return e(...n)}catch(r){if(zs&&zs(r)===!0)return()=>{};throw r}}:e;for(var Mn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",DT=typeof Uint8Array>"u"?[]:new Uint8Array(256),js=0;js<Mn.length;js++)DT[Mn.charCodeAt(js)]=js;var PT=function(e){var t=new Uint8Array(e),n,r=t.length,s="";for(n=0;n<r;n+=3)s+=Mn[t[n]>>2],s+=Mn[(t[n]&3)<<4|t[n+1]>>4],s+=Mn[(t[n+1]&15)<<2|t[n+2]>>6],s+=Mn[t[n+2]&63];return r%3===2?s=s.substring(0,s.length-1)+"=":r%3===1&&(s=s.substring(0,s.length-2)+"=="),s};const Hf=new Map;function FT(e,t){let n=Hf.get(e);return n||(n=new Map,Hf.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}const Wf=(e,t,n)=>{if(!e||!(jf(e,t)||typeof e=="object"))return;const r=e.constructor.name,s=FT(n,r);let o=s.indexOf(e);return o===-1&&(o=s.length,s.push(e)),o};function qs(e,t,n){if(e instanceof Array)return e.map(r=>qs(r,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const r=e.constructor.name,s=PT(e);return{rr_type:r,base64:s}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[qs(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const r=e.constructor.name,{src:s}=e;return{rr_type:r,src:s}}else if(e instanceof HTMLCanvasElement){const r="HTMLImageElement",s=e.toDataURL();return{rr_type:r,src:s}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[qs(e.data,t,n),e.width,e.height]};if(jf(e,t)||typeof e=="object"){const r=e.constructor.name,s=Wf(e,t,n);return{rr_type:r,index:s}}}}return e}const zf=(e,t,n)=>e.map(r=>qs(r,t,n)),jf=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(s=>typeof t[s]=="function").find(s=>e instanceof t[s]);function $T(e,t,n,r,s){const o=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of i)try{if(typeof t.CanvasRenderingContext2D.prototype[a]!="function")continue;const c=da(t.CanvasRenderingContext2D.prototype,a,function(u){return function(...d){return Ws(this.canvas,n,r,s,!0)||Uf(()=>{const l=zf(d,t,this);e(this.canvas,{type:xn["2D"],property:a,args:l})},0),u.apply(this,d)}});o.push(c)}catch{const c=la(t.CanvasRenderingContext2D.prototype,a,{set(u){e(this.canvas,{type:xn["2D"],property:a,args:[u],setter:!0})}});o.push(c)}return()=>{o.forEach(a=>a())}}function BT(e){return e==="experimental-webgl"?"webgl":e}function qf(e,t,n,r,s){const o=[];try{const i=da(e.HTMLCanvasElement.prototype,"getContext",function(a){return function(c,...u){if(!Ws(this,t,n,r,!0)){const d=BT(c);if("__context"in this||(this.__context=d),s&&["webgl","webgl2"].includes(d))if(u[0]&&typeof u[0]=="object"){const l=u[0];l.preserveDrawingBuffer||(l.preserveDrawingBuffer=!0)}else u.splice(0,1,{preserveDrawingBuffer:!0})}return a.apply(this,[c,...u])}});o.push(i)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{o.forEach(i=>i())}}function Gf(e,t,n,r,s,o,i,a){const c=[],u=Object.getOwnPropertyNames(e);for(const d of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(d))try{if(typeof e[d]!="function")continue;const l=da(e,d,function(p){return function(...f){const h=p.apply(this,f);if(Wf(h,a,this),"tagName"in this.canvas&&!Ws(this.canvas,r,s,o,!0)){const m=zf(f,a,this),_={type:t,property:d,args:m};n(this.canvas,_)}return h}});c.push(l)}catch{const l=la(e,d,{set(p){n(this.canvas,{type:t,property:d,args:[p],setter:!0})}});c.push(l)}return c}function UT(e,t,n,r,s,o){const i=[];return i.push(...Gf(t.WebGLRenderingContext.prototype,xn.WebGL,e,n,r,s,o,t)),typeof t.WebGL2RenderingContext<"u"&&i.push(...Gf(t.WebGL2RenderingContext.prototype,xn.WebGL2,e,n,r,s,o,t)),()=>{i.forEach(a=>a())}}const HT='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function WT(){const e=new Blob([HT]);return URL.createObjectURL(e)}class zT{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(l,p)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(l)||this.pendingCanvasMutations.set(l,[]),this.pendingCanvasMutations.get(l).push(p)};const{sampling:n="all",win:r,blockClass:s,blockSelector:o,unblockSelector:i,maxCanvasSize:a,recordCanvas:c,dataURLOptions:u,errorHandler:d}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,d&&LT(d),(c&&typeof n=="number"||t.enableManualSnapshot)&&(this.worker=this.initFPSWorker()),this.addWindow(r),!t.enableManualSnapshot&&fa(()=>{c&&n==="all"&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),c&&typeof n=="number"&&this.initCanvasFPSObserver(n,s,o,i,a,{dataURLOptions:u})})()}reset(){this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,this.worker?.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(t){const{sampling:n="all",blockClass:r,blockSelector:s,unblockSelector:o,recordCanvas:i,enableManualSnapshot:a}=this.options;if(!this.windowsSet.has(t)){if(a){this.windowsSet.add(t),this.windows.push(new WeakRef(t));return}fa(()=>{if(i&&n==="all"&&this.initCanvasMutationObserver(t,r,s,o),i&&typeof n=="number"){const c=qf(t,r,s,o,!0);this.restoreHandlers.push(()=>{c()})}})(),this.windowsSet.add(t),this.windows.push(new WeakRef(t))}}addShadowRoot(t){this.shadowDoms.add(new WeakRef(t))}resetShadowRoots(){this.shadowDoms=new Set}initFPSWorker(){const t=new Worker(WT());return t.onmessage=n=>{const r=n.data,{id:s}=r;if(this.snapshotInProgressMap.set(s,!1),!("base64"in r))return;const{base64:o,type:i,width:a,height:c}=r;this.mutationCb({id:s,type:xn["2D"],commands:[{property:"clearRect",args:[0,0,a,c]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:o}],type:i}]},0,0,a,c]}]})},t}initCanvasFPSObserver(t,n,r,s,o,i){const a=this.takeSnapshot(!1,t,n,r,s,o,i.dataURLOptions);this.restoreHandlers.push(()=>{cancelAnimationFrame(a)})}initCanvasMutationObserver(t,n,r,s){const o=qf(t,n,r,s,!1),i=$T(this.processMutation.bind(this),t,n,r,s),a=UT(this.processMutation.bind(this),t,n,r,s,this.mirror);this.restoreHandlers.push(()=>{o(),i(),a()})}snapshot(t){const{options:n}=this,r=this.takeSnapshot(!0,n.sampling==="all"?2:n.sampling||2,n.blockClass,n.blockSelector,n.unblockSelector,n.maxCanvasSize,n.dataURLOptions,t);this.restoreHandlers.push(()=>{cancelAnimationFrame(r)})}takeSnapshot(t,n,r,s,o,i,a,c){const u=1e3/n;let d;const l=f=>{if(f)return[f];const h=[],m=_=>{_.querySelectorAll("canvas").forEach(y=>{Ws(y,r,s,o)||h.push(y)})};for(const _ of this.windows){const y=_.deref();let b;try{b=y&&y.document}catch{}b&&m(b)}for(const _ of this.shadowDoms){const y=_.deref();y&&m(y)}return h},p=f=>{if(this.windows.length){if(this.lastSnapshotTime&&f-this.lastSnapshotTime<u){d=Xt(p);return}this.lastSnapshotTime=f,l(c).forEach(h=>{if(!this.mirror.hasNode(h))return;const m=this.mirror.getId(h);if(!this.snapshotInProgressMap.get(m)&&!(!h.width||!h.height)){if(this.snapshotInProgressMap.set(m,!0),!t&&["webgl","webgl2"].includes(h.__context)){const _=h.getContext(h.__context);_?.getContextAttributes()?.preserveDrawingBuffer===!1&&_.clear(_.COLOR_BUFFER_BIT)}createImageBitmap(h).then(_=>{this.worker?.postMessage({id:m,bitmap:_,width:h.width,height:h.height,dataURLOptions:a,maxCanvasSize:i},[_])}).catch(_=>{fa(()=>{throw _})()})}}),t||(d=Xt(p))}};return d=Xt(p),d}startPendingCanvasMutationFlusher(){Xt(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=n=>{this.rafStamps.latestId=n,Xt(t)};Xt(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{const r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),Xt(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;const r=this.pendingCanvasMutations.get(t);if(!r||n===-1)return;const s=r.map(i=>{const{type:a,...c}=i;return c}),{type:o}=r[0];this.mutationCb({id:n,type:o,commands:s}),this.pendingCanvasMutations.delete(t)}}try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}AT();var Vf;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(Vf||(Vf={}));const Yf={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},jT="ReplayCanvas",Gs=1280,qT=(e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,Gs):Gs,n?Math.min(n,Gs):Gs]};let s;const o=new Promise(i=>s=i);return{name:jT,getOptions(){const{quality:i,enableManualSnapshot:a,maxCanvasSize:c}=r;return{enableManualSnapshot:a,recordCanvas:!0,getCanvasManager:u=>{const d=new zT({...u,enableManualSnapshot:a,maxCanvasSize:c,errorHandler:l=>{try{typeof l=="object"&&(l.__rrweb__=!0)}catch{}}});return s(d),d},...Yf[i]||Yf.medium}},async snapshot(i){(await o).snapshot(i)}}};function Ze(e=0){return((Ie()||performance.timeOrigin)+e)/1e3}function GT(e){const t=[];if(e.nextHopProtocol!=null){const{name:n,version:r}=Fl(e.nextHopProtocol);t.push(["network.protocol.version",r],["network.protocol.name",n])}return Ie()?[...t,["http.request.redirect_start",Ze(e.redirectStart)],["http.request.fetch_start",Ze(e.fetchStart)],["http.request.domain_lookup_start",Ze(e.domainLookupStart)],["http.request.domain_lookup_end",Ze(e.domainLookupEnd)],["http.request.connect_start",Ze(e.connectStart)],["http.request.secure_connection_start",Ze(e.secureConnectionStart)],["http.request.connection_end",Ze(e.connectEnd)],["http.request.request_start",Ze(e.requestStart)],["http.request.response_start",Ze(e.responseStart)],["http.request.response_end",Ze(e.responseEnd)]]:t}const Xf=new WeakMap,pa=new Map,ha={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function Kf(e,t){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:s,shouldCreateSpanForRequest:o,enableHTTPTimings:i,tracePropagationTargets:a,onRequestSpanStart:c}={...ha,...t},u=typeof o=="function"?o:p=>!0,d=p=>YT(p,a),l={};n&&(e.addEventProcessor(p=>(p.type==="transaction"&&p.spans&&p.spans.forEach(f=>{if(f.op==="http.client"){const h=pa.get(f.span_id);h&&(f.timestamp=h/1e3,pa.delete(f.span_id))}}),p)),s&&M_(p=>{if(p.response){const f=Xf.get(p.response);f&&p.endTimestamp&&pa.set(f,p.endTimestamp)}}),Ho(p=>{const f=y_(p,u,d,l);if(p.response&&p.fetchData.__span&&Xf.set(p.response,p.fetchData.__span),f){const h=Zf(p.fetchData.url),m=h?zt(h).host:void 0;f.setAttributes({"http.url":h,"server.address":m}),i&&Jf(f),c?.(f,{headers:p.headers})}})),r&&Ci(p=>{const f=XT(p,u,d,l);if(f){i&&Jf(f);let h;try{h=new Headers(p.xhr.__sentry_xhr_v3__?.request_headers)}catch{}c?.(f,{headers:h})}})}function VT(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function Jf(e){const{url:t}=z(e).data;if(!t||typeof t!="string")return;const n=Vt("resource",({entries:r})=>{r.forEach(s=>{VT(s)&&s.name.endsWith(t)&&(GT(s).forEach(i=>e.setAttribute(...i)),setTimeout(n))})})}function YT(e,t){const n=At();if(n){let r,s;try{r=new URL(e,n),s=new URL(n).origin}catch{return!1}const o=r.origin===s;return t?We(r.toString(),t)||o&&We(r.pathname,t):o}else{const r=!!e.match(/^\/(?!\/)/);return t?We(e,t):r}}function XT(e,t,n,r){const s=e.xhr,o=s?.[dt];if(!s||s.__sentry_own_request__||!o)return;const{url:i,method:a}=o,c=Et()&&t(i);if(e.endTimestamp&&c){const m=s.__sentry_xhr_span_id__;if(!m)return;const _=r[m];_&&o.status_code!==void 0&&(zn(_,o.status_code),_.end(),delete r[m]);return}const u=Zf(i),d=zt(u||i),l=Lu(i),p=!!ye(),f=c&&p?Ht({name:`${a} ${l}`,attributes:{url:i,type:"xhr","http.method":a,"http.url":u,"server.address":d?.host,[ce]:"auto.http.browser",[Oe]:"http.client",...d?.search&&{"http.query":d?.search},...d?.hash&&{"http.fragment":d?.hash}}}):new at;s.__sentry_xhr_span_id__=f.spanContext().spanId,r[s.__sentry_xhr_span_id__]=f,n(i)&&KT(s,Et()&&p?f:void 0);const h=R();return h&&h.emit("beforeOutgoingRequestSpan",f,e),f}function KT(e,t){const{"sentry-trace":n,baggage:r}=Po({span:t});n&&JT(e,n,r)}function JT(e,t,n){const r=e.__sentry_xhr_v3__?.request_headers;if(!r?.["sentry-trace"])try{if(e.setRequestHeader("sentry-trace",t),n){const s=r?.baggage;(!s||!ZT(s))&&e.setRequestHeader("baggage",n)}}catch{}}function ZT(e){return e.split(",").some(t=>t.trim().startsWith("sentry-"))}function Zf(e){try{return new URL(e,D.location.origin).href}catch{return}}function QT(){D.document?D.document.addEventListener("visibilitychange",()=>{const e=ye();if(!e)return;const t=_e(e);if(D.document.hidden&&t){const n="cancelled",{op:r,status:s}=z(t);Y&&g.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),s||t.setStatus({code:le,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):Y&&g.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const eI=3600,Qf="sentry_previous_trace",tI="sentry.previous_trace";function nI(e,{linkPreviousTrace:t,consistentTraceSampling:n}){const r=t==="session-storage";let s=r?oI():void 0;e.on("spanStart",i=>{if(_e(i)!==i)return;const a=G().getPropagationContext();s=rI(s,i,a),r&&sI(s)});let o=!0;n&&e.on("beforeSampling",i=>{if(!s)return;const a=G(),c=a.getPropagationContext();if(o&&c.parentSpanId){o=!1;return}a.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(s.sampleRate),sampled:String(ma(s.spanContext))},sampleRand:s.sampleRand}),i.parentSampled=ma(s.spanContext),i.parentSampleRate=s.sampleRate,i.spanAttributes={...i.spanAttributes,[ja]:s.sampleRate}})}function rI(e,t,n){const r=z(t);function s(){try{return Number(n.dsc?.sample_rate)??Number(r.data?.[kr])}catch{return 0}}const o={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:s(),sampleRand:n.sampleRand};if(!e)return o;const i=e.spanContext;return i.traceId===r.trace_id?e:(Date.now()/1e3-e.startTimestamp<=eI&&(Y&&g.log(`Adding previous_trace ${i} link to span ${{op:r.op,...t.spanContext()}}`),t.addLink({context:i,attributes:{[eh]:"previous_trace"}}),t.setAttribute(tI,`${i.traceId}-${i.spanId}-${ma(i)?1:0}`)),o)}function sI(e){try{D.sessionStorage.setItem(Qf,JSON.stringify(e))}catch(t){Y&&g.warn("Could not store previous trace in sessionStorage",t)}}function oI(){try{const e=D.sessionStorage?.getItem(Qf);return JSON.parse(e)}catch{return}}function ma(e){return e.traceFlags===1}const iI="BrowserTracing",aI={...Pr,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,_experiments:{},...ha},ep=(e={})=>{const t={name:void 0,source:void 0},n=D.document,{enableInp:r,enableElementTiming:s,enableLongTask:o,enableLongAnimationFrame:i,_experiments:{enableInteractions:a,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:u},beforeStartSpan:d,idleTimeout:l,finalTimeout:p,childSpanTimeout:f,markBackgroundSpan:h,traceFetch:m,traceXHR:_,trackFetchStreamPerformance:y,shouldCreateSpanForRequest:b,enableHTTPTimings:L,ignoreResourceSpans:k,ignorePerformanceApiSpans:x,instrumentPageLoad:S,instrumentNavigation:w,detectRedirects:C,linkPreviousTrace:E,consistentTraceSampling:I,onRequestSpanStart:U}={...aI,...e};let v,A;function W(N,M,$=!0){const O=M.op==="pageload",q=d?d(M):M,K=q.attributes||{};if(M.name!==q.name&&(K[Ae]="custom",q.attributes=K),!$){const Se=Nt();Ht({...q,startTime:Se}).end(Se);return}t.name=q.name,t.source=K[Ae];const ie=xc(q,{idleTimeout:l,finalTimeout:p,childSpanTimeout:f,disableAutoFinish:O,beforeSpanEnd:Se=>{v?.(),rb(Se,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!u,ignoreResourceSpans:k,ignorePerformanceApiSpans:x}),op(N,void 0);const me=G(),Pe=me.getPropagationContext();me.setPropagationContext({...Pe,traceId:ie.spanContext().traceId,sampled:$t(ie),dsc:je(Se)})}});op(N,ie);function Ue(){n&&["interactive","complete"].includes(n.readyState)&&N.emit("idleSpanEnableAutoFinish",ie)}O&&n&&(n.addEventListener("readystatechange",()=>{Ue()}),Ue())}return{name:iI,setup(N){if(fc(),v=KS({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:u||!1,client:N}),r&&Ib(),s&&pb(),i&&B.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?ZS():o&&JS(),a&&QS(),C&&n){const $=()=>{A=pe()};addEventListener("click",$,{capture:!0}),addEventListener("keydown",$,{capture:!0,passive:!0})}function M(){const $=gr(N);$&&!z($).timestamp&&(Y&&g.log(`[Tracing] Finishing current active span with op: ${z($).op}`),$.setAttribute(Cr,"cancelled"),$.end())}N.on("startNavigationSpan",($,O)=>{if(R()!==N)return;if(O?.isRedirect){Y&&g.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),W(N,{op:"navigation.redirect",...$},!1);return}M(),ge().setPropagationContext({traceId:it(),sampleRand:Math.random()});const q=G();q.setPropagationContext({traceId:it(),sampleRand:Math.random()}),q.setSDKProcessingMetadata({normalizedRequest:void 0}),W(N,{op:"navigation",...$})}),N.on("startPageLoadSpan",($,O={})=>{if(R()!==N)return;M();const q=O.sentryTrace||rp("sentry-trace"),K=O.baggage||rp("baggage"),ie=tc(q,K),Ue=G();Ue.setPropagationContext(ie),Ue.setSDKProcessingMetadata({normalizedRequest:oi()}),W(N,{op:"pageload",...$})})},afterAllSetup(N){let M=At();if(E!=="off"&&nI(N,{linkPreviousTrace:E,consistentTraceSampling:I}),D.location){if(S){const $=Ie();tp(N,{name:D.location.pathname,startTime:$?$/1e3:void 0,attributes:{[Ae]:"url",[ce]:"auto.pageload.browser"}})}w&&ys(({to:$,from:O})=>{if(O===void 0&&M?.indexOf($)!==-1){M=void 0;return}M=void 0;const q=Nu($),K=gr(N),ie=K&&C&&uI(K,A);np(N,{name:q?.pathname||D.location.pathname,attributes:{[Ae]:"url",[ce]:"auto.navigation.browser"}},{url:$,isRedirect:ie})})}h&&QT(),a&&cI(N,l,p,f,t),r&&Rb(),Kf(N,{traceFetch:m,traceXHR:_,trackFetchStreamPerformance:y,tracePropagationTargets:N.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:b,enableHTTPTimings:L,onRequestSpanStart:U})}}};function tp(e,t,n){e.emit("startPageLoadSpan",t,n),G().setTransactionName(t.name);const r=gr(e);return r&&e.emit("afterStartPageLoadSpan",r),r}function np(e,t,n){const{url:r,isRedirect:s}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:s}),e.emit("startNavigationSpan",t,{isRedirect:s});const o=G();return o.setTransactionName(t.name),r&&!s&&o.setSDKProcessingMetadata({normalizedRequest:{...oi(),url:r}}),gr(e)}function rp(e){return D.document?.querySelector(`meta[name=${e}]`)?.getAttribute("content")||void 0}function cI(e,t,n,r,s){const o=D.document;let i;const a=()=>{const c="ui.action.click",u=gr(e);if(u){const d=z(u).op;if(["navigation","pageload"].includes(d)){Y&&g.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(i&&(i.setAttribute(Cr,"interactionInterrupted"),i.end(),i=void 0),!s.name){Y&&g.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}i=xc({name:s.name,op:c,attributes:{[Ae]:s.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r})};o&&addEventListener("click",a,{capture:!0})}const sp="_sentry_idleSpan";function gr(e){return e[sp]}function op(e,t){xe(e,sp,t)}const ip=.3;function uI(e,t){const n=z(e),r=Nt(),s=n.start_timestamp;return!(r-s>ip||t&&r-t<=ip)}function An(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function lI(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=An(n);return s=>r.then(o=>s(o.transaction(t,"readwrite").objectStore(t)))}function ga(e){return An(e.getAllKeys())}function dI(e,t,n){return e(r=>ga(r).then(s=>{if(!(s.length>=n))return r.put(t,Math.max(...s,0)+1),An(r.transaction)}))}function fI(e,t,n){return e(r=>ga(r).then(s=>{if(!(s.length>=n))return r.put(t,Math.min(...s,0)-1),An(r.transaction)}))}function pI(e){return e(t=>ga(t).then(n=>{const r=n[0];if(r!=null)return An(t.get(r)).then(s=>(t.delete(r),An(t.transaction).then(()=>s)))}))}function hI(e){let t;function n(){return t==null&&(t=lI(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async r=>{try{const s=await Or(r);await dI(n(),s,e.maxQueueSize||30)}catch{}},unshift:async r=>{try{const s=await Or(r);await fI(n(),s,e.maxQueueSize||30)}catch{}},shift:async()=>{try{const r=await pI(n());if(r)return xh(r)}catch{}}}}function mI(e){return t=>{const n=e({...t,createStore:hI});return D.addEventListener("online",async r=>{await n.flush()}),n}}function gI(e=Mi){return mI(Jm(e))}const ap=1e6,Vs=String(0),_I="main",Ys=D.navigator;let cp="",up="",lp="",_a=Ys?.userAgent||"",dp="";const yI=Ys?.language||Ys?.languages?.[0]||"";function SI(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}const fp=Ys?.userAgentData;SI(fp)&&fp.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{if(cp=e.platform||"",lp=e.architecture||"",dp=e.model||"",up=e.platformVersion||"",e.fullVersionList?.length){const t=e.fullVersionList[e.fullVersionList.length-1];_a=`${t.brand} ${t.version}`}}).catch(e=>{});function bI(e){return!("thread_metadata"in e)}function EI(e){return bI(e)?TI(e):e}function vI(e){const t=e.contexts?.trace?.trace_id;return typeof t=="string"&&t.length!==32&&Y&&g.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function wI(e,t,n,r){if(r.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const s=vI(r),o=EI(n),i=t||(typeof r.start_timestamp=="number"?r.start_timestamp*1e3:pe()*1e3),a=typeof r.timestamp=="number"?r.timestamp*1e3:pe()*1e3;return{event_id:e,timestamp:new Date(i).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||xr,runtime:{name:"javascript",version:D.navigator.userAgent},os:{name:cp,version:up,build_number:_a},device:{locale:yI,model:dp,manufacturer:_a,architecture:lp,is_emulator:!1},debug_meta:{images:CI(n.resources)},profile:o,transactions:[{name:r.transaction||"",id:r.event_id||Te(),trace_id:s,active_thread_id:Vs,relative_start_ns:"0",relative_end_ns:((a-i)*1e6).toFixed(0)}]}}function pp(e){return z(e).op==="pageload"}function TI(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[Vs]:{name:_I}}},s=e.samples[0];if(!s)return r;const o=s.timestamp,i=Ie(),a=typeof performance.timeOrigin=="number"?performance.timeOrigin:i||0,c=a-(i||a);return e.samples.forEach((u,d)=>{if(u.stackId===void 0){t===void 0&&(t=n,r.stacks[t]=[],n++),r.samples[d]={elapsed_since_start_ns:((u.timestamp+c-o)*ap).toFixed(0),stack_id:t,thread_id:Vs};return}let l=e.stacks[u.stackId];const p=[];for(;l;){p.push(l.frameId);const h=e.frames[l.frameId];h&&r.frames[l.frameId]===void 0&&(r.frames[l.frameId]={function:h.name,abs_path:typeof h.resourceId=="number"?e.resources[h.resourceId]:void 0,lineno:h.line,colno:h.column}),l=l.parentId===void 0?void 0:e.stacks[l.parentId]}const f={elapsed_since_start_ns:((u.timestamp+c-o)*ap).toFixed(0),stack_id:n,thread_id:Vs};r.stacks[n]=p,r.samples[d]=f,n++}),r}function II(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n]);return e}function kI(e){const t=[];return Ut(e,(n,r)=>{if(r==="transaction")for(let s=1;s<n.length;s++)n[s]?.contexts?.profile?.profile_id&&t.push(n[s])}),t}function CI(e){const r=R()?.getOptions()?.stackParser;return r?om(r,e):[]}function RI(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(Y&&g.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e===!0||e===!1?!0:e<0||e>1?(Y&&g.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function xI(e){return e.samples.length<2?(Y&&g.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(Y&&g.log("[Profiling] Discarding profile because it contains no frames"),!1)}let hp=!1;const mp=3e4;function MI(e){return typeof e=="function"}function AI(){const e=D.Profiler;if(!MI(e)){Y&&g.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const t=10,n=Math.floor(mp/t);try{return new e({sampleInterval:t,maxBufferSize:n})}catch{Y&&(g.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),g.log("[Profiling] Disabling profiling for current user session.")),hp=!0}}function gp(e){if(hp)return Y&&g.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return Y&&g.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const n=R()?.getOptions();if(!n)return Y&&g.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;return RI(r)?r?(r===!0?!0:Math.random()<r)?!0:(Y&&g.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1):(Y&&g.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(Y&&g.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function OI(e,t,n,r){return xI(n)?wI(e,t,n,r):null}const Kt=new Map;function NI(){return Kt.size}function LI(e){const t=Kt.get(e);return t&&Kt.delete(e),t}function DI(e,t){if(Kt.set(e,t),Kt.size>30){const n=Kt.keys().next().value;Kt.delete(n)}}function _p(e){let t;pp(e)&&(t=pe()*1e3);const n=AI();if(!n)return;Y&&g.log(`[Profiling] started profiling span: ${z(e).description}`);const r=Te();G().setContext("profile",{profile_id:r,start_timestamp:t});async function s(){if(e&&n)return n.stop().then(c=>{if(o&&(D.clearTimeout(o),o=void 0),Y&&g.log(`[Profiling] stopped profiling of span: ${z(e).description}`),!c){Y&&g.log(`[Profiling] profiler returned null profile for: ${z(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}DI(r,c)}).catch(c=>{Y&&g.log("[Profiling] error while stopping profiler:",c)})}let o=D.setTimeout(()=>{Y&&g.log("[Profiling] max profile duration elapsed, stopping profiling for:",z(e).description),s()},mp);const i=e.end.bind(e);function a(){return e?(s().then(()=>{i()},()=>{i()}),e):i()}e.end=a}const PI="BrowserProfiling",FI=()=>({name:PI,setup(e){const t=ye(),n=t&&_e(t);n&&pp(n)&&gp(n)&&_p(n),e.on("spanStart",r=>{r===_e(r)&&gp(r)&&_p(r)}),e.on("beforeEnvelope",r=>{if(!NI())return;const s=kI(r);if(!s.length)return;const o=[];for(const i of s){const a=i?.contexts,c=a?.profile?.profile_id,u=a?.profile?.start_timestamp;if(typeof c!="string"){Y&&g.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!c){Y&&g.log("[Profiling] cannot find profile for a span without a profile context");continue}a?.profile&&delete a.profile;const d=LI(c);if(!d){Y&&g.log(`[Profiling] Could not retrieve profile for span: ${c}`);continue}const l=OI(c,u,d,i);l&&o.push(l)}II(r,o)})}}),$I="SpotlightBrowser",BI=(e={})=>{const t=e.sidecarUrl||"http://localhost:8969/stream";return{name:$I,setup:()=>{Y&&g.log("Using Sidecar URL",t)},processEvent:n=>WI(n)?null:n,afterAllSetup:n=>{UI(n,t)}}};function UI(e,t){const n=ki("fetch");let r=0;e.on("beforeEnvelope",s=>{if(r>3){g.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r);return}n(t,{method:"POST",body:Or(s),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(o=>{o.status>=200&&o.status<400&&(r=0)},o=>{r++,g.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",o)})})}const HI=BI;function WI(e){return!!(e.type==="transaction"&&e.spans&&e.contexts?.trace&&e.contexts.trace.op==="ui.action.click"&&e.spans.some(({description:t})=>t?.includes("#sentry-spotlight")))}const zI=()=>({name:"LaunchDarkly",processEvent(e,t,n){return Yn(e)}});function jI(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,n)=>{sn(e,t.value),on(e,t.value)}}}const qI=()=>({name:"OpenFeature",processEvent(e,t,n){return Yn(e)}});class GI{after(t,n){sn(n.flagKey,n.value),on(n.flagKey,n.value)}error(t,n,r){sn(t.flagKey,t.defaultValue),on(t.flagKey,t.defaultValue)}}const VI=({featureFlagClientClass:e})=>({name:"Unleash",setupOnce(){const t=e.prototype;we(t,"isEnabled",YI)},processEvent(t,n,r){return Yn(t)}});function YI(e){return function(...t){const n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"?(sn(n,r),on(n,r)):Y&&g.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${n} (${typeof n}), result: ${r} (${typeof r})`),r}}const XI=({featureFlagClient:e})=>({name:"Statsig",setup(t){e.on("gate_evaluation",n=>{sn(n.gate.name,n.gate.value),on(n.gate.name,n.gate.value)})},processEvent(t,n,r){return Yn(t)}});async function KI(){const e=R();if(!e)return"no-client-active";if(!e.getDsn())return"no-dsn-configured";try{await Ic(()=>fetch("https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7",{body:"{}",method:"POST",mode:"cors",credentials:"omit"}))}catch{return"sentry-unreachable"}}const JI="WebWorker",ZI=({worker:e})=>({name:JI,setupOnce:()=>{(Array.isArray(e)?e:[e]).forEach(t=>yp(t))},addWorker:t=>yp(t)});function yp(e){e.addEventListener("message",t=>{e1(t.data)&&(t.stopImmediatePropagation(),Y&&g.log("Sentry debugId web worker message received",t.data),D._sentryDebugIds={...t.data._sentryDebugIds,...D._sentryDebugIds})})}function QI({self:e}){e.postMessage({_sentryMessage:!0,_sentryDebugIds:e._sentryDebugIds??void 0})}function e1(e){return st(e)&&e._sentryMessage===!0&&"_sentryDebugIds"in e&&(st(e._sentryDebugIds)||e._sentryDebugIds===void 0)}const t1=Object.freeze(Object.defineProperty({__proto__:null,BrowserClient:Il,OpenFeatureIntegrationHook:GI,SDK_VERSION:tt,SEMANTIC_ATTRIBUTE_SENTRY_OP:Oe,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:ce,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:kr,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:Ae,Scope:ze,WINDOW:D,addBreadcrumb:Ke,addEventProcessor:$c,addIntegration:xo,breadcrumbsIntegration:Ql,browserApiErrorsIntegration:ed,browserProfilingIntegration:FI,browserSessionIntegration:nd,browserTracingIntegration:ep,buildLaunchDarklyFlagUsedHandler:jI,captureConsoleIntegration:kg,captureEvent:Vn,captureException:Wt,captureFeedback:Du,captureMessage:Wr,captureSession:Ro,chromeStackLineParser:Yl,close:vm,consoleLoggingIntegration:I_,contextLinesIntegration:UE,continueTrace:Gh,createTransport:ou,createUserFeedbackEnvelope:Gb,dedupeIntegration:vu,defaultRequestInstrumentationOptions:ha,defaultStackLineParsers:Kl,defaultStackParser:Jl,diagnoseSdkConnectivity:KI,endSession:Co,eventFiltersIntegration:pu,eventFromException:wl,eventFromMessage:Tl,exceptionFromError:is,extraErrorDataIntegration:Ng,featureFlagsIntegration:m_,feedbackAsyncIntegration:Qy,feedbackIntegration:El,feedbackSyncIntegration:El,flush:Em,forceLoad:bE,functionToStringIntegration:fu,geckoStackLineParser:Xl,getActiveSpan:ye,getClient:R,getCurrentScope:G,getDefaultIntegrations:cd,getFeedback:uy,getGlobalScope:Ir,getIsolationScope:ge,getReplay:CT,getRootSpan:_e,getSpanDescendants:jn,getSpanStatusFromHttpCode:qa,getTraceData:Po,globalHandlersIntegration:rd,graphqlClientIntegration:YE,httpClientIntegration:CE,httpContextIntegration:id,inboundFiltersIntegration:hu,init:ud,instrumentOutgoingRequests:Kf,instrumentSupabaseClient:Mu,isEnabled:Fc,isInitialized:wm,lastEventId:Pc,launchDarklyIntegration:zI,lazyLoadIntegration:bl,linkedErrorsIntegration:ad,logger:iS,makeBrowserOfflineTransport:gI,makeFetchTransport:Mi,makeMultiplexedTransport:eg,moduleMetadataIntegration:wg,onLoad:EE,openFeatureIntegration:qI,opera10StackLineParser:zb,opera11StackLineParser:qb,parameterize:uu,registerSpanErrorInstrumentation:fc,registerWebWorker:QI,replayCanvasIntegration:qT,replayIntegration:Nf,reportingObserverIntegration:IE,rewriteFramesIntegration:Wg,sendFeedback:zu,setContext:Dc,setCurrentClient:eu,setExtra:_m,setExtras:gm,setHttpStatus:zn,setMeasurement:Sc,setTag:Sm,setTags:ym,setUser:bm,showReportDialog:vE,spanToBaggageHeader:bh,spanToJSON:z,spanToTraceHeader:ic,spotlightBrowserIntegration:HI,startBrowserTracingNavigationSpan:np,startBrowserTracingPageLoadSpan:tp,startInactiveSpan:Ht,startNewTrace:kc,startSession:ko,startSpan:Dr,startSpanManual:qh,statsigIntegration:XI,supabaseIntegration:t_,suppressTracing:Ic,thirdPartyErrorFilterIntegration:l_,unleashIntegration:VI,updateSpanName:Sh,webWorkerIntegration:ZI,winjsStackLineParser:Hb,withActiveSpan:qn,withIsolationScope:Jp,withScope:Be,zodErrorsIntegration:u_},Symbol.toStringTag,{value:"Module"}));ud({dsn:"https://111b5e2bf66898def1d1b1b2f3ce9397@o4509807637495808.ingest.de.sentry.io/4509807640117328",sendDefaultPii:!0,integrations:[ep(),Nf()],tracesSampleRate:1,tracePropagationTargets:["localhost",/^https:\/\/yourserver\.io\/api/],replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1,environment:"production",release:"1.0.0"}),window.Sentry=t1})();
